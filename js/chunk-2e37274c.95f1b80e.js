(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e37274c"],{"0155":function(e,t,i){"use strict";i("c6d4")},5676:function(e,t,i){},"632c":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{ref:"wraper",class:e.wraperClasses,on:{mouseup:e.handleMouseup,mousemove:e.handleMousemove,mouseleave:e.handleMouseout}},["horizontal"===e.direction?t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(e.prefix,"-left-area"),style:{width:e.leftSize}},[e._t("left")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.horizontalTriggerStyle},[t("div",{staticClass:"split-pane-trigger-btn",on:{click:e.onClickHorizontal}}),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{class:"".concat(e.prefix,"-right-area"),style:{width:e.horizontalModeShowLeft?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:e.onClickHorizontal,mouseenter:e.onClickHorizontal}},[t("div",{staticClass:"split-pane-right-btn-wrapper"})]),e._t("right")],2)],2):t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(e.prefix,"-top-area"),style:{height:"move"==e.verticalMode?e.leftSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==e.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("top")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:"move"==e.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.verticalTriggerStyle},[t("div",{class:"".concat(e.prefix,"-trigger-btn")},[t("div",{on:{click:function(t){return e.setVerticalMode("top")}}}),t("div",{on:{click:function(t){return e.setVerticalMode("bottom")}}})]),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(e.prefix,"-bottom-area"),style:{height:"move"==e.verticalMode?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"top"==e.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("bottom")],2)],2)])},s=[],r=(i("c975"),i("a9e3"),function(e,t){return t.indexOf(e)>=0}),o={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(e){return r(e,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var e=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-e:e},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(e){this.$emit("on-resize",e)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(e){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",e))},transValue:function(e){return"number"===typeof e?e:Math.floor(parseFloat(e)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(e){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:e.pageX,y:e.pageY},this.$emit("on-resizing-start",e),e.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(e){if(this.canMove){var t,i=0;if("horizontal"===this.direction?(i=Math.floor((e.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((e.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-t;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else t<=this.minTransed?this.triggerOffset=Math.max(t,this.minTransed):this.triggerOffset=Math.min(t,this.maxTransed);e.atMin=100-t<=this.minTransed,e.atMax=100-t>=this.maxTransed,e.pageX>this.directionMark?e.direction=1:e.direction=0,this.directionMark=e.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",e)}},setTriggerOffset:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100,t.$emit("input",t.triggerOffset)}))}},watch:{value:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var e=this;void 0!==this.value&&(this.$nextTick((function(){e.triggerOffset="number"===typeof e.value?e.value:Math.floor(parseInt(e.value)/e.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(i("9526"),i("2877")),c=Object(l["a"])(n,a,s,!1,null,null,null),d=c.exports;t["a"]=d},9526:function(e,t,i){"use strict";i("5676")},c6d4:function(e,t,i){},d91c:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"moveX"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"safety-day-report-drawer"},[t("div",{staticClass:"safety-day-report-drawer-title",staticStyle:{height:"24px"}},[t("span",{domProps:{textContent:e._s(e.recordTitle)}}),t("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:e.handleClose}},[t("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"16px"}})])]),t("div",{staticClass:"safety-day-report-drawer-title"},[t("span",{domProps:{textContent:e._s(e.recordTime)}})]),t("div",{staticClass:"safety-day-report-drawer-video"},[t("div",{staticStyle:{border:"1px solid #e8eaec"}},[t("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:"280px",autoplay:!1}},e._l(e.imageAndVideoList,(function(i,a){return t("el-carousel-item",{key:a,attrs:{name:"carousel"+a}},[i.image&&""!=i.url?t("div",{staticClass:"full"},[t("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i.url}})]):e._e(),i.image?e._e():t("div",{staticClass:"full"},[t("video",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i.url,autoplay:"",controls:"",loop:""}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:i.image&&""==i.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images"})])})),1)],1),t("div",{staticClass:"safety-day-report-drawer-video-ctrl"},[t("el-row",{staticStyle:{height:"100%"},attrs:{gutter:4}},e._l(e.imageAndVideoList,(function(i,a){return t("el-col",{key:a,staticStyle:{height:"100%"},attrs:{span:6}},[i.image&&""!=i.url?t("div",{staticClass:"full",on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}},[t("img",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:i.url}})]):e._e(),i.image?e._e():t("div",{staticClass:"safety-video full",on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}},[t("video",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:i.url}}),t("div",{staticClass:"video-play-icon"},[t("i",{staticClass:"el-icon-video-play"})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:i.image&&""==i.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}})])})),1)],1)]),t("div",{staticClass:"safety-day-report-drawer-switch",on:{click:function(t){e.showMap=!e.showMap}}},[e.showMap?t("div",{staticClass:"common_icon_move_down"}):t("div",{staticClass:"common_icon_move_up"})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showMap,expression:"showMap"}],staticClass:"safety-day-report-drawer-map"},[t("ReportMap",{ref:"mapIns"})],1)])])},s=[],r=(i("a630"),i("14d9"),i("d3b7"),i("3ca3"),i("159b"),i("32eb")),o=i("6e52"),n={name:"SafetyDetailReport",props:{value:{type:Boolean,default:!1}},data:function(){return{showMap:!1,recordTitle:"",recordTime:"",imageAndVideoList:[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}]}},watch:{showMap:function(e){e&&this.row&&this.$refs.mapIns.singleMarkerToMap({callon:this.row.lon,callat:this.row.lat})}},components:{ReportMap:r["a"]},methods:{handleClose:function(){this.imageAndVideoList=[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}],this.$emit("input",!1)},setRecordInfo:function(e){var t=this;this.row=e,this.$refs.carousel.setActiveItem("carousel0"),this.recordTitle=o["a"].getDeviceNameByDeviceId(e.deviceid)+" - "+e.deviceid,this.recordTime=e.event+" - "+e.dateStr,this._localPlayRootPath=e._localPlayRootPath,this.imageAndVideoList=this.getImageAndVideoList(e),this.$nextTick((function(){var i=document.getElementsByClassName("default-images");i&&i.length>0&&Array.from(i).forEach((function(e){e.style.backgroundImage="url('./custom/tvdefault.jpg')"})),1==t.showMap&&t.$refs.mapIns.singleMarkerToMap({callon:e.lon,callat:e.lat})}))},getImageAndVideoList:function(e){var t="",i=[],a=this.getMediaTypeWithIndex(e,2,1),s=this.getMediaTypeWithIndex(e,0,1),r=this.getMediaTypeWithIndex(e,0,2),o=this.getMediaTypeWithIndex(e,0,3);a&&i.push({image:!a,url:a}),s&&i.push({image:!0,url:s}),r&&i.push({image:!0,url:r}),o&&i.push({image:!0,url:o});for(var n=i.length,l=0;l<4-n;l++)i.push({image:!0,url:t});return i},getMediaTypeWithIndex:function(e,t,i){for(var a=null,s=0,r=1;r<6;r++){var o=e["attachfile"+r];if(o&&1===e["attachstatus"+r]&&e["attachfiletype"+r]===t&&(s++,s===i)){a=this._localPlayRootPath+o;break}}return a}}},l=n,c=(i("0155"),i("2877")),d=Object(c["a"])(l,a,s,!1,null,"1e787c6e",null);t["a"]=d.exports},fd61:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.title,value:e.value,className:"modal-padding0",width:"440px"},on:{hide:e.handleClose,close:e.handleClose}},[t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:4}},[e._v(" "+e._s(e.$t("alarm.processType"))+" ")]),t("el-col",{attrs:{span:20}},[t("el-radio",{attrs:{label:"1"},model:{value:e.disposetype,callback:function(t){e.disposetype=t},expression:"disposetype"}},[e._v(e._s(e.$t("alarm.allAlarms")))]),t("el-radio",{attrs:{label:"2"},model:{value:e.disposetype,callback:function(t){e.disposetype=t},expression:"disposetype"}},[e._v(" "+e._s(e.$t("alarm.sameAlarms")))]),t("el-radio",{attrs:{label:"3"},model:{value:e.disposetype,callback:function(t){e.disposetype=t},expression:"disposetype"}},[e._v(" "+e._s(e.$t("alarm.singleAlarm")))])],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:4}},[t("div",{staticStyle:{"line-height":"32px"}},[e._v(" "+e._s(e.$t("common.note"))+" ")])]),t("el-col",{attrs:{span:19}},[t("el-input",{attrs:{clearable:"",type:"textarea",placeholder:e.$t("common.maxWords64"),maxlength:"64",rows:4},model:{value:e.disposecontent,callback:function(t){e.disposecontent=t},expression:"disposecontent"}})],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleAlarm}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)},s=[],r=i("5530"),o=(i("4de4"),i("14d9"),i("a9e3"),i("d3b7"),i("159b"),i("4795"),i("1c31")),n=i("589f"),l=i("6e52"),c=i("2f62"),d={name:"DisposeAlarmDialog",props:{value:{type:Boolean,default:!1}},data:function(){return{loading:!1,disposetype:"1",deviceName:"",disposecontent:""}},computed:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["allAlarmList","urgentAlarmList"])),{},{title:function(){return this.$t("common.processAlarm")+"-"+this.deviceName}}),mounted:function(){},methods:{handleClose:function(){this.$emit("input",!1)},setDeviceInfo:function(e){this.info=e,this.disposecontent=e.disposecontent,this.deviceName=l["a"].getDeviceNameByDeviceId(e.deviceid)},handleAlarm:function(){var e=this,t=this.info,i={lastalarmtime:t.lastalarmtime,deviceid:t.deviceid,alarm:t.alarm,alarmbitsstr:t.alarmbitsstr,devicealarmid:t.devicealarmid,disposetype:Number(this.disposetype),disposecontent:this.disposecontent};this.loading=!0,Object(o["f"])(i).then((function(a){e.loading=!1,0==a.status?(t.disposecontent=i.disposecontent,t.isdispose=e.$t("reportForm.handled"),t.disposestatus=1,n["a"].updateDisposeStatus(t.deviceid,t.alarm),setTimeout((function(){var t=i.deviceid,a=i.alarm;n["a"].deleteAlarmRecord(t,a,i.disposetype),e.updateAllAlarmAndUrgent()}),4e3),e.$XModal.message({message:e.$t("tips.handlingAlarmsSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.removeFail"),status:"error",zIndex:9999}),e.handleClose()})).catch((function(t){console.log("disposeAlarm",t),e.loading=!1}))},isNeedForceAlarm:function(e){var t=!1,i=this.$store.state.forcealarm;if(e&&i)for(var a=e.length,s=i.length,r=Math.min(a,s),o=0;o<r;++o){var n=e.charAt(o),l=i.charAt(o);if("1"==l&&"1"==n){t=!0;break}}return t},updateAllAlarmAndUrgent:function(){var e=this,t=this.$i18n.locale,i=n["a"].getAlarmList();i=i.filter((function(e){var t=void 0!=cacheMgr.deviceInfos[e.deviceid];return t})),i.forEach((function(e){"zh"!=t?e.stralarm=translateAlarmen(e.stralarmen):"en"==t&&(e.stralarm=e.stralarmen);var i=cacheMgr.deviceInfos[e.deviceid];i&&(e.creater=i.creater,e.groupname=i.groupname)}));var a=[];i.forEach((function(t){e.isNeedForceAlarm(t.alarmbitsstr)&&a.push(t)})),this.$store.commit("setAllAlarmList",i),this.$store.commit("setUrgentAlarmList",a)}}},h=d,u=i("2877"),f=Object(u["a"])(h,a,s,!1,null,"0b9fb11a",null);t["a"]=f.exports}}]);