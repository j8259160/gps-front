(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6556828b"],{"020c":function(t,e,i){"use strict";i("f8bb")},"0595":function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(i){return e("div",{key:i.type,style:{color:i.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(i.type)}}},[t._v(t._s(i.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},a=[],o=i("5101"),n={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,i=[],r=new Date,a=new Date;switch(e&&(r=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:i=[new Date(o["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(a,"yyyy-MM-dd")+" 23:59:59")];break;case 1:r.setTime(r.getTime()-864e5),a.setTime(a.getTime()-864e5),i=[r,a];break;case 3:r.setTime(r.getTime()-2592e5),i=[r,a];break;case 7:r.setTime(r.getTime()-6048e5),i=[r,a];break;case 10:r.setTime(r.getTime()-864e6),i=[r,a];break;case 30:r.setTime(r.getTime()-2592e6),i=[r,a];break}this.type=t,this.$emit("input",i)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},s=n,l=(i("8d09"),i("2877")),c=Object(l["a"])(s,r,a,!1,null,null,null);e["a"]=c.exports},"3b13":function(t,e,i){},"41da":function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"full",attrs:{id:t.chartId}})},a=[],o=i("ade3"),n=i("5530"),s=(i("14d9"),i("b0c0"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("43c8")),l=i.n(s),c=i("5aff"),d=i("c276"),h=i("2f62"),u={name:"TravelEchart",computed:Object(n["a"])(Object(n["a"])({},Object(h["b"])(["distanceUnit","speedUnit"])),{},{chartId:function(){return"chart_".concat(this._uid)}}),methods:{initChart:function(){var t=this;this.disMin=0,this.distance=[],this.recvtime=[],this.veo=[],this.totalad=[],this.notRunOil=[],this.oil1=[],this.oil2=[],this.oil3=[],this.oil4=[],this.devStates=[],this.devReissue=[];var e=this.$t("reportForm.oil1"),i=this.$t("reportForm.oil2"),r=this.$t("reportForm.oil3"),a=this.$t("reportForm.oil4");this.selectedLegend=Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},e,!1),i,!1),r,!1),a,!1),this.chartsIns=l.a.init(document.getElementById(this.chartId)),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.on("legendselectchanged",(function(e){t.selectedLegend=e.selected})),this.chartsIns.getZr().on("click",(function(e){var i=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",i)&&t.recvtime.length){var r=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0],a=t.records[r];t.$emit("select-point",a)}}))},resize:function(){this.chartsIns.resize()},updateChartsOption:function(t){var e=this,i=this,r=t,a=[],o=[],n=[],s=[],l=[],c=[],h=[],u=[],m=[],p=[],f=[];this.disMin=0;var g=0;r.forEach((function(t,r){t.totaldistance=t.totaldistance,0==r&&(g=t.totaldistance),c.push(t.ad0/100),h.push(t.ad1/100),u.push(t.ad2/100),m.push(t.ad3/100),p.push(t.strstatus),f.push(0==t.reissue?i.$t("header.no"):i.$t("header.yes")),s.push(t.totalad/100),l.push(t.totalnotrunningad/100),o.push(e.$dateformat.longToLocalDateTimeStr(t.updatetime)),n.push(Number(Object(d["e"])(t.speed).toFixed(0))),a.push(Number(Object(d["d"])(t.totaldistance-g).toFixed(3)))})),this.records=r,this.distance=a,this.recvtime=o,this.veo=n,this.totalad=s,this.notRunOil=l,this.oil1=c,this.oil2=h,this.oil3=u,this.oil4=m,this.devStates=p,this.devReissue=f,this.chartsIns.setOption(this.getChartsOption(),!0)},getChartsOption:function(){var t=this.distanceUnit,e=this.speedUnit,i=this.$t("reportForm.totalOil"),r=this.$t("reportForm.notRunTotalad"),a=this.$t("reportForm.speed"),o=this.$t("reportForm.mileage"),s=this.$t("reportForm.time"),l=this.$t("reportForm.oil1"),h=this.$t("reportForm.oil2"),u=this.$t("reportForm.oil3"),m=this.$t("reportForm.oil4"),p=this.$t("reportForm.status"),f=this.$t("reportForm.reissue");return{grid:{top:40,left:60,right:60,bottom:20},tooltip:Object(n["a"])(Object(n["a"])({trigger:"axis"},c["a"]),{},{formatter:function(n){var p="<div>".concat(n[0].name,"</div>");for(var f in n){var g=n[f].seriesName,v=n[f].value;g&&g!=s&&(p+=g==o?Object(d["k"])(c["b"],g,v,t):g==a?Object(d["k"])(c["h"],g,v,e):g==i?Object(d["k"])(c["k"],g,v,"L"):g==r?Object(d["k"])(c["c"],g,v,"L"):g==l?Object(d["k"])(c["d"],g,v,""):g==h?Object(d["k"])(c["e"],g,v,""):g==u?Object(d["k"])(c["f"],g,v,""):g==m?Object(d["k"])(c["g"],g,v,""):Object(d["k"])(c["m"],g,v,""))}return'<div style="width:230px">'.concat(p,"</div>")},position:c["j"]}),legend:{data:[a,o,i,r,l,h,u,m],selected:this.selectedLegend,x:"left"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:a+e,type:"value",nameTextStyle:10,nameGap:5,axisLabel:{formatter:"{value}"}},{name:o+t,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value}"},axisTick:{show:!1}}],series:[{name:s,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:a,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:c["h"],data:this.veo},{name:o,type:"line",symbol:"none",yAxisIndex:1,color:c["b"],smooth:!0,data:this.distance},{smooth:!0,name:i,type:"line",symbol:"none",color:c["k"],data:this.totalad,markPoint:{data:this.markPointData,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:r,type:"line",symbol:"none",color:c["c"],data:this.notRunOil,markPoint:{data:this.markPointDataOil99,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:l,type:"line",symbol:"none",color:c["d"],data:this.oil1,markPoint:{data:this.markPointDataOil1,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:h,type:"line",symbol:"none",color:c["e"],data:this.oil2,markPoint:{data:this.markPointDataOil2,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:u,type:"line",symbol:"none",color:c["f"],data:this.oil3,markPoint:{data:this.markPointDataOil3,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:m,type:"line",symbol:"none",color:c["g"],data:this.oil4,markPoint:{data:this.markPointDataOil4,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:p,type:"line",symbol:"none",color:c["m"],data:this.devStates},{smooth:!0,name:f,type:"line",symbol:"none",color:c["m"],data:this.devReissue}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},m=u,p=i("2877"),f=Object(p["a"])(m,r,a,!1,null,null,null);e["a"]=f.exports},4896:function(t,e,i){t.exports=i.p+"img/tripin.1821f8a3.png"},5676:function(t,e,i){},"57c9":function(t,e,i){"use strict";var r=i("0595");e["a"]=r["a"]},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"h",(function(){return a})),i.d(e,"l",(function(){return o})),i.d(e,"k",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return h})),i.d(e,"m",(function(){return u})),i.d(e,"i",(function(){return m})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return f}));var r="#2D9F28",a="#89C6F2",o="#FFC65E",n="red",s="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",h="#F180D1",u="#0F1F46",m="#000000",p={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(t,e,i,r,a){var o=t[0],n=a.contentSize,s=a.viewSize;return o+10>s[0]-n[0]?o=o-n[0]-10:o+=10,[o,"0%"]}},"5f9d":function(t,e,i){"use strict";i("a237")},"632c":function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(t.prefix,"-left-area"),style:{width:t.leftSize}},[t._t("left")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.horizontalTriggerStyle},[e("div",{staticClass:"split-pane-trigger-btn",on:{click:t.onClickHorizontal}}),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-right-area"),style:{width:t.horizontalModeShowLeft?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:t.onClickHorizontal,mouseenter:t.onClickHorizontal}},[e("div",{staticClass:"split-pane-right-btn-wrapper"})]),t._t("right")],2)],2):e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(t.prefix,"-top-area"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==t.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("top")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:"move"==t.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-btn")},[e("div",{on:{click:function(e){return t.setVerticalMode("top")}}}),e("div",{on:{click:function(e){return t.setVerticalMode("bottom")}}})]),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"top"==t.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("bottom")],2)],2)])},a=[],o=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),n={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return o(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(t){this.$emit("on-resize",t)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var r=100-e;r<=this.minTransed?this.triggerOffset=100-Math.max(r,this.minTransed):this.triggerOffset=100-Math.min(r,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},s=n,l=(i("9526"),i("2877")),c=Object(l["a"])(s,r,a,!1,null,null,null),d=c.exports;e["a"]=d},"6bef":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full trip-report"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[e("div",[e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",plain:"",loading:t.exportLoading1},on:{click:t.exportData},slot:"reference"},[t._v(t._s(t.$t("common.summary")))]),e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading2,plain:""},on:{click:t.exportDetailData},slot:"reference"},[t._v(t._s(t.$t("reportForm.detailed")))])],1),e("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("common.export")))])],1)],1)]),e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"34px","margin-top":"4px"}},[e("div",{staticClass:"f_left"},[e("TripDropdown",{model:{value:t.tripType,callback:function(e){t.tripType=e},expression:"tripType"}})],1),e("div",{staticClass:"f_left"},[e("TripPulldown",{attrs:{label:t.$t("reportForm.deliveryArea"),treeData:t.treeData},model:{value:t.startgeouuids,callback:function(e){t.startgeouuids=e},expression:"startgeouuids"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"0"!=t.tripType,expression:"tripType != '0'"}],staticClass:"f_left"},[e("TripPulldown",{attrs:{label:t.$t("reportForm.ReceivingArea"),treeData:t.treeData},model:{value:t.endgeouuids,callback:function(e){t.endgeouuids=e},expression:"endgeouuids"}})],1)]),e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.tripStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:t.$t("reportForm.tripDetails"),name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName == 'details'"}],staticStyle:{position:"absolute",left:"0px",right:"0px",top:"82px","text-align":"center"}},[e("b",{domProps:{textContent:t._s(t.devicenameAndDeviceid)}}),t._v("("+t._s(t.detailsList.length)+") ")]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"118px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",width:"120",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",width:"120",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("reportForm.creater"),width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"parents-wrapper"},t._l(t.parentsList,(function(i){return e("div",{key:i.username},[t._v(t._s(i.username)+"("+t._s(i.usertypeStr)+")")])})),0),e("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(e){return t.queryParents(i.row.creater)}},slot:"reference"},[t._v(t._s(i.row.creater))])],1)]}}])}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"tripcount",width:"80",title:t.$t("reportForm.tripCount"),sortable:""}}),e("vxe-table-column",{attrs:{field:"timeduration",width:"100",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.duration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"mileage",width:"115",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.mileage")+t.distanceUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"totalrunningfuel",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalotherfuel",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"starttimeStr",width:"150",title:t.$t("reportForm.startTime"),sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",width:"150",title:t.$t("reportForm.endTime"),sortable:""}}),e("vxe-table-column",{attrs:{field:"starttotaldistance",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startDistance")+t.distanceUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"endtotaldistance",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endDistance")+t.distanceUnit,sortable:""}})],1)],1),e("div",{style:t.detailsStyle},[e("div",{staticClass:"trip-report-details-table"},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"auto-resize":"","menu-config":t.tableMenu,"highlight-current-row":"",border:"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.cellClickEvent}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"fenceName",title:t.$t("reportForm.fence"),sortable:""}}),e("vxe-table-column",{attrs:{field:"timeduration",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.duration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"mileage",formatter:t.numberToFixed2,align:"right",width:"115",title:t.$t("reportForm.mileage")+t.distanceUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"totalrunningfuel",formatter:t.numberToFixed2,align:"right",width:"100",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalotherfuel",formatter:t.numberToFixed2,align:"right",width:"100",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"starttimeStr",width:"150",title:t.$t("reportForm.startTime"),sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",width:"150",title:t.$t("reportForm.endTime"),sortable:""}}),e("vxe-table-column",{attrs:{field:"starttotaldistance",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.startDistance")+t.distanceUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"endtotaldistance",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.endDistance")+t.distanceUnit,sortable:""}})],1)],1),e("div",{staticClass:"trip-report-details"},[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"1200"},on:{"on-resize":t.onResize,"on-resizing-end":t.onResizingEnd},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"left"},slot:"left"},[e("ReportMap",{ref:"mapIns"})],1),e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"right"},slot:"right"},[e("TravelEchart",{ref:"echartIns"})],1)])],1)])])],1)])},a=[],o=i("5530"),n=(i("99af"),i("14d9"),i("b0c0"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("e561")),s=i("d462"),l=i("57c9"),c=i("80f4"),d=i("41da"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice trip-dropdown",style:t.warpStyle},[e("div",{staticClass:"multi-choice-label"},[t._v(" "+t._s(t.$t("reportForm.statisticalType"))+" ")]),e("div",{staticClass:"multi-choice-input"},[e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.onClickDropdownMenu}},[e("div",{staticClass:"trip-dropdown-button el-button--mini el-dropdown-selfdefine",staticStyle:{width:"240px","text-align":"left"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:"0"==t.value,expression:"value=='0'"}],staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon1}}),e("img",{directives:[{name:"show",rawName:"v-show",value:"1"==t.value,expression:"value=='1'"}],staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon2}}),e("img",{directives:[{name:"show",rawName:"v-show",value:"2"==t.value,expression:"value=='2'"}],staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon3}}),e("span",[t._v(t._s(t.tripSettingStr))])]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"0"}},[e("img",{staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon1}}),e("span",[t._v(t._s(t.$t("reportForm.tripRule1")))])]),e("el-dropdown-item",{attrs:{command:"1"}},[e("img",{staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon2}}),e("span",[t._v(t._s(t.$t("reportForm.tripRule2")))])]),e("el-dropdown-item",{attrs:{command:"2"}},[e("img",{staticStyle:{width:"36px",height:"18px","margin-right":"4px"},attrs:{src:t.icon3}}),e("span",[t._v(t._s(t.$t("reportForm.tripRule3")))])])],1)],1)],1)])},u=[],m=i("4896"),p=i("c89f"),f=i("da25"),g={name:"TripDropdown",props:{value:{type:String,default:"0"}},data:function(){return{icon1:m,icon2:p,icon3:f}},computed:{warpStyle:function(){return{width:"320px"}},tripSettingStr:function(){return this.$t("reportForm.tripRule".concat(Number(this.value)+1))}},methods:{onClickDropdownMenu:function(t){this.$emit("input",t)}},mounted:function(){}},v=g,b=(i("de80"),i("2877")),y=Object(b["a"])(v,h,u,!1,null,null,null),x=y.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice trip-pulldown",style:t.warpStyle},[e("div",{staticClass:"multi-choice-label"},[t._v(" "+t._s(t.label)+" ")]),e("div",{staticClass:"multi-choice-input"},[e("div",{staticClass:"trip-pulldown-wrapper"},[e("el-popover",{attrs:{placement:"bottom",width:"180",trigger:"manual","append-to-body":!1,"popper-options":{boundariesElement:"body",gpuAcceleration:!0,positionFixed:!0,preventOverflow:!0}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClickOutside,expression:"handleClickOutside"}],staticClass:"ztree-drapdown",staticStyle:{height:"180px",width:"100%",overflow:"hidden"}},[e("el-scrollbar",{staticStyle:{height:"100%"}},[e("el-tree",{ref:"elTree",attrs:{"default-checked-keys":t.checkedKeys,data:t.treeData,"filter-node-method":t.filterNode,"show-checkbox":""},on:{"check-change":t.handleCheckChange}})],1)],1),e("el-input",{attrs:{slot:"reference",clearable:"","prefix-icon":"el-icon-search"},on:{input:t.onInputChange},nativeOn:{click:function(e){t.show=!0}},slot:"reference",model:{value:t.textVal,callback:function(e){t.textVal=e},expression:"textVal"}})],1)],1)])])},$=[],S=(i("4de4"),i("c975"),i("a15b"),i("d81d"),i("9169")),k={name:"TripPulldown",props:{value:{type:Array,default:[]},label:{type:String,default:""},treeData:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,textVal:"",checkedKeys:[]}},directives:{Clickoutside:S["a"]},computed:{warpStyle:function(){return{width:"240px"}}},methods:{handleClickOutside:function(){this.show=!1},handleCheckChange:function(){var t=this.$refs.elTree.getCheckedNodes(),e=t.filter((function(t){return void 0==t.children})).map((function(t){return t.value})),i=t.filter((function(t){return void 0==t.children})).map((function(t){return t.label}));this.textVal=i.join(","),this.$emit("input",e)},onInputChange:function(t){""==t?this.$refs.elTree.filter(""):this.$refs.elTree.filter(t)},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)}},mounted:function(){}},T=k,F=(i("020c"),Object(b["a"])(T,w,$,!1,null,null,null)),O=F.exports,C=i("632c"),D=i("5101"),M=i("1c31"),z=i("7cf8"),_=i("6e52"),j=i("4c3c"),L=i("a05b"),N=i("0c87"),R=i("c276"),I=i("2f62"),E={name:"tripReport",data:function(){return{loading:!1,exportLoading1:!1,exportLoading2:!1,offsetVertical:Number(50),horizontalModeShowLeft:!0,activeName:"tabTotal",tripType:"0",dateRange:[new Date,new Date],treeData:[],startgeouuids:[],endgeouuids:[],totalList:[],detailsList:[],devicenameAndDeviceid:""}},mixins:[j["a"],L["a"],N["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},components:{MultiChoiceVehicle:n["a"],SelectDate:s["a"],QuickTimeRange:l["a"],TripDropdown:x,TripPulldown:O,ReportMap:c["a"],TravelEchart:d["a"],SplitPane:C["a"]},computed:Object(o["a"])(Object(o["a"])({},Object(I["b"])(["distanceUnit"])),{},{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}}),methods:{numberToFixed2:R["qb"],onResizingEnd:function(){this.onResize(this.horizontalModeShowLeft)},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){e.$refs.echartIns.resize()}),300)},onSelectDevice:function(t){this.deviceids=t},handleClickRow:function(t){var e=this;if(t.records.length>0){if(this.devicenameAndDeviceid=t.devicename+" - "+t.deviceid,this.activeName="details",this.detailsList=t.records,this.detailsList.length>0){var i=this.detailsList[0],r=i.starttime,a=i.endtime,o={deviceid:i.deviceid,endtimeutclong:a,begintimeutclong:r,begintime:i.starttimeStr,endtime:i.endtimeStr,timezone:D["a"].getOffset()};Object(z["Z"])(o).then((function(t){var r=t.records;r&&(e.$refs.mapIns.drawFenceAndLine(r,i.points),e.$refs.echartIns.updateChartsOption(r))})),this.$refs.xTable.setCurrentRow(i)}}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},cellClickEvent:function(t){var e=this,i=t.row,r=i.starttime,a=i.endtime,o={deviceid:i.deviceid,begintime:i.starttimeStr,endtime:i.endtimeStr,timezone:D["a"].getOffset(),begintimeutclong:r,endtimeutclong:a};Object(z["Z"])(o).then((function(t){var r=t.records;r&&(e.$refs.mapIns.drawFenceAndLine(r,i.points),e.$refs.echartIns.updateChartsOption(r))}))},handleQuery:function(){var t=this,e=this.deviceids,i=this.dateRange,r=Number(this.tripType),a=this.startgeouuids,o=this.endgeouuids;if(0!=e.length)if(0!=i.length){if("details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]),0==r){if(0==a.length)return void this.$XModal.message({message:this.$t("tips.selectDeliveryArea"),status:"error",zIndex:9999})}else if(0==a.length||0==o.length)return void this.$XModal.message({message:this.$t("tips.selectReceivingArea"),status:"error",zIndex:9999});var n=D["a"].format(i[0],"yyyy-MM-dd"),s=D["a"].format(i[1],"yyyy-MM-dd"),l={startday:n,endday:s,offset:D["a"].getOffset(),deviceids:e,triptype:r,startgeouuids:a,endgeouuids:o};this.loading=!0,Object(M["ob"])(l).then((function(e){var i=e.summaries;t.loading=!1,t.queryDetailDateRange="".concat(n," ").concat(s);var r=[];i&&(r=t.getAllTripTableData(i)),t.totalList=r})).catch((function(e){t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getAllTripTableData:function(t){var e=this.tripType;return t.forEach((function(t){var i=t.deviceid,r=_["a"].deviceInfos[i],a=r.devicename,o=_["a"].getShowName(r.creater),n=r.groupname;t.devicename=a,t.creater=o,t.groupname=n,t.tripcount=t.records.length,t.starttimeStr=t.starttime>0?D["a"].longToLocalDateTimeStr(t.starttime):0,t.endtimeStr=t.endtime>0?D["a"].longToLocalDateTimeStr(t.endtime):0,t.timeduration=t.timeduration/1e3/3600,t.totaldistanceduration=t.totaldistanceduration/1e3,t.starttotaldistance=Object(R["d"])(t.starttotaldistance),t.endtotaldistance=Object(R["d"])(t.endtotaldistance),t.totalrunningfuel=t.totalrunningfuel/100,t.totalotherfuel=t.totalotherfuel/100,t.mileage=Number((t.endtotaldistance-t.starttotaldistance).toFixed(2)),t.records.forEach((function(t){var r="";t.deviceid=i,t.devicename=a,t.creater=o,t.groupname=n,t.starttimeStr=D["a"].longToLocalDateTimeStr(t.starttime),t.endtimeStr=D["a"].longToLocalDateTimeStr(t.endtime),t.timeduration=t.timeduration/1e3/3600,t.totaldistanceduration=t.totaldistanceduration/1e3,t.starttotaldistance=Object(R["d"])(t.starttotaldistance),t.endtotaldistance=Object(R["d"])(t.endtotaldistance),t.totalrunningfuel=t.totalrunningfuel/100,t.totalotherfuel=t.totalotherfuel/100,t.mileage=Number((t.endtotaldistance-t.starttotaldistance).toFixed(2)),"0"==e?r=t.points[0].geosystemrecord.name:"1"==e?r=t.points[1].geosystemrecord.name+"→"+t.points[2].geosystemrecord.name:"2"==e&&(r=t.points[1].geosystemrecord.name+"←→"+t.points[2].geosystemrecord.name),t.fenceName=r}))})),t},exportData:function(){if(this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.tripCount"),this.$t("reportForm.duration"),this.$t("reportForm.mileage")+this.distanceUnit,this.$t("reportForm.oilConsumption"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.startDistance")+this.distanceUnit,this.$t("reportForm.endDistance")+this.distanceUnit]];this.totalList.forEach((function(e,i){var r=[];r.push(i),r.push(e.devicename),r.push(e.deviceid),r.push(e.creater),r.push(e.groupname),r.push(e.tripcount),r.push(Object(R["qb"])(e.timeduration)),r.push(Object(R["qb"])(e.mileage)),r.push(Object(R["qb"])(e.totalrunningfuel)),r.push(Object(R["qb"])(e.totalotherfuel)),r.push(e.starttimeStr),r.push(e.endtimeStr),r.push(Object(R["qb"])(e.starttotaldistance)),r.push(Object(R["qb"])(e.endtotaldistance)),t.push(r)}));var e={title:this.$t("reportForm.tripReport"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}},exportDetailData:function(){if(this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.fence"),this.$t("reportForm.duration"),this.$t("reportForm.mileage")+this.distanceUnit,this.$t("reportForm.oilConsumption"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.startDistance")+this.distanceUnit,this.$t("reportForm.endDistance")+this.distanceUnit]],e="",i=this.totalList.length;this.totalList.forEach((function(r,a){if(r.records.length){r.records.forEach((function(r,a){1==i&&(e=r.devicename);var o=[];o.push(a),o.push(r.devicename),o.push(r.deviceid),o.push(r.fenceName),o.push(Object(R["qb"])(r.timeduration)),o.push(Object(R["qb"])(r.mileage)),o.push(Object(R["qb"])(r.totalrunningfuel)),o.push(Object(R["qb"])(r.totalotherfuel)),o.push(r.starttimeStr),o.push(r.endtimeStr),o.push(Object(R["qb"])(r.starttotaldistance)),o.push(Object(R["qb"])(r.endtotaldistance)),t.push(o)}));var o=[];o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),o.push(""),t.push(o)}}));var r={title:this.$t("reportForm.tripDetails")+(e?" - "+e:""),data:t,dateRange:this.queryDetailDateRange};this.exportLoading2=!0,new ExcelCls(r).exportExcel(this)}}},mounted:function(){var t=this;this.deviceids=[],this.queryDetailDateRange=null,Object(z["O"])().then((function(e){var i=e.categorys,r=[];i&&i.forEach((function(t){var e={label:t.name,value:t.categoryid,children:[]};t&&t.records.forEach((function(t){1==t.useas&&e.children.push({label:t.name,value:t.georecorduuid})})),e.children.length>0&&r.push(e)})),t.treeData=r}))}},A=E,q=(i("5f9d"),Object(b["a"])(A,r,a,!1,null,null,null)),P=q.exports;e["default"]=P},7031:function(t,e,i){"use strict";i("3b13")},"80f4":function(t,e,i){"use strict";var r=i("32eb");e["a"]=r["a"]},"8d09":function(t,e,i){"use strict";i("a818")},9526:function(t,e,i){"use strict";i("5676")},a237:function(t,e,i){},a818:function(t,e,i){},b0bf:function(t,e,i){},c89f:function(t,e,i){t.exports=i.p+"img/tripinout.87117ef7.png"},da25:function(t,e,i){t.exports=i.p+"img/tripinoutin.80fb57fe.png"},de80:function(t,e,i){"use strict";i("b0bf")},e561:function(t,e,i){"use strict";var r=i("ea22");e["a"]=r["a"]},ea22:function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},a=[],o=i("5530"),n=(i("4795"),i("2f62")),s=i("2df7"),l={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(o["a"])({},Object(n["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:s["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(n["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},c=l,d=(i("7031"),i("2877")),h=Object(d["a"])(c,r,a,!1,null,null,null);e["a"]=h.exports},f8bb:function(t,e,i){}}]);