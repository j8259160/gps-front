(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0e4528"],{"600f":function(t,e,i){"use strict";i.r(e);i("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report full"},[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"600"},on:{"on-resize":t.onResize,"on-resizing-end":t.handleMoving},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticClass:"report-left",attrs:{slot:"left"},slot:"left"},[e("div",{staticClass:"report-left-search"},[e("div",{staticClass:"report-left-search-input"},[e("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:t.$t("common.pleaseEnterReportName"),"prefix-icon":"el-icon-search"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),e("div",{staticClass:"report-left-search-popup"},[e("NavView",{attrs:{navList:t.navList},on:{select:t.onSelect}})],1)]),e("div",{staticClass:"report-left-tab"},[e("div",{class:["all"==t.tabActive?"tab_active":""],on:{click:function(e){t.tabActive="all"}}},[t._v(t._s(t.$t("monitor.all"))+"("+t._s(t.allCount)+")")]),e("div",{class:["stared"==t.tabActive?"tab_active":""],on:{click:function(e){t.tabActive="stared"}}},[t._v(t._s(t.$t("monitor.stared"))+"("+t._s(t.likeList.length)+")")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"all"==t.tabActive,expression:"tabActive == 'all'"}],staticClass:"report-left-menu"},[e("div",[e("el-menu",{attrs:{"default-active":t.defaultActive,"default-openeds":t.defaultOpeneds,"background-color":"#ffffff","text-color":"#000","active-text-color":"#2681FF","collapse-transition":t.transition,"unique-opened":t.uniquePpened},on:{select:t.onSelect}},[t._l(t.navList,(function(i){return[e("el-submenu",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{class:["icon",i.iconClass]}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(i.title)+"("+t._s(i.children.length)+") ")])]),t._l(i.children,(function(i){return e("el-menu-item",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"from-like"},[e("div",{class:[1==i.stared?"form-like-icon":"form-like-def-icon"],attrs:{routeName:i.key},on:{click:t.onClickLike}})])])],2)}))],2)]}))],2)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:"stared"==t.tabActive,expression:"tabActive == 'stared'"}],staticClass:"report-left-menu"},[e("div",[e("el-menu",{attrs:{"default-active":t.defaultActive,"background-color":"#ffffff","text-color":"#000","active-text-color":"#2681FF"},on:{select:t.onSelect}},[t._l(t.likeList,(function(i){return[e("el-menu-item",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"from-like",staticStyle:{"padding-top":"20px"}},[e("div",{class:[1==i.stared?"form-like-icon":"form-like-def-icon"],attrs:{routeName:i.key},on:{click:t.onClickLike}})])])],2)]}))],2)],1)])]),e("div",{staticClass:"report-content",attrs:{slot:"right"},slot:"right"},[e("div",{staticClass:"report-content-nav"},[e("NavTag",{attrs:{prefix:"reportForm",defaultActive:t.defaultActive,type:"reportrecent"},on:{select:t.onSelect},model:{value:t.reportTagList,callback:function(e){t.reportTagList=e},expression:"reportTagList"}})],1),e("div",{staticClass:"report-content-view"},["reportForm"==t.$route.name?e("div",{staticClass:"full",staticStyle:{padding:"10px 10px 10px 16px"}},[e("div",{staticClass:"full",staticStyle:{position:"relative"}},[e("div",{staticClass:"default-background"},[e("div"),e("p",[e("span",{staticStyle:{"margin-left":"30px"}},[t._v(t._s(t.$t("tips.selectReport")))])])])])]):t._e(),e("keep-alive",{directives:[{name:"show",rawName:"v-show",value:"reportForm"!==t.$route.name,expression:"$route.name !== 'reportForm'"}],attrs:{include:t.reportTagList,exclude:["safetyDayReport"]}},[e("router-view",{ref:"routerView"})],1)],1)])])],1)},s=[],r=i("c7eb"),o=i("1da1"),n=i("5530"),c=(i("4de4"),i("caad"),i("c975"),i("14d9"),i("b64b"),i("d3b7"),i("07ac"),i("2532"),i("159b"),i("4795"),i("6e52")),l=i("632c"),u=i("243a"),f=i("adb3"),d=i("232d"),p=i("1c31"),h=i("2f62"),v={name:"ReportForm",data:function(){return{tabActive:"all",searchText:"",offsetVertical:"300px",defaultActive:"",allCount:0,navList:[],likeList:[],defaultOpeneds:[],uniquePpened:!1,horizontalModeShowLeft:!0,transition:!1}},components:{SplitPane:l["a"],NavView:u["a"],NavTag:f["a"]},computed:Object(n["a"])({},Object(h["b"])(["isQueryInitData","reportDefaultRouter","reportTagList","permissionList"])),beforeRouteEnter:function(t,e,i){i()},mounted:function(){this.cacheNavList=[],null!=this.reportDefaultRouter&&this.onSelect(this.reportDefaultRouter),this.isQueryInitData&&this.init()},watch:{isQueryInitData:function(t){t&&(this.defaultActive=this.$route.name,this.init())},$route:function(t){this.defaultActive=t.name},searchText:function(t){if(t=t.toLowerCase(),"all"==this.tabActive)if(""==t)this.defaultOpeneds=[],this.uniquePpened=!0,this.navList=this.cacheNavList;else{this.uniquePpened=!1;var e=[],i={};this.cacheNavList.forEach((function(a){if(a.title.toLowerCase().indexOf(t)>-1)i[a.key]=a.key,e.push(Object(n["a"])({},a));else{var s=[];a.children.forEach((function(e){e.title.toLowerCase().indexOf(t)>-1&&s.push(Object(n["a"])({},e))}));var r=Object(n["a"])({},a);i[r.key]=r.key,r.children=s,s.length>0&&e.push(r)}})),this.navList=e,this.defaultOpeneds=Object.keys(i)}else if(""==t)this.likeList=this.cacheLikeList;else{var a=[];this.cacheLikeList.forEach((function(e){e.title.toLowerCase().indexOf(t)>-1&&a.push(Object(n["a"])({},e))})),this.likeList=a}}},methods:Object(n["a"])(Object(n["a"])({},Object(h["c"])(["setReportDefaultRouter","setReportTagList"])),{},{init:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var i,a,s,o,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=c["a"].isQueryStaredReports){e.next=6;break}return e.next=3,Object(p["r"])();case 3:i=e.sent,a=i.favorites,c["a"].setStaredReports(a);case 6:s=t.getNavList(d["a"]),o=s.allCount,n=s.navList,t.navList=n,t.cacheNavList=n,t.allCount=o,t.likeList=t.getLikeList(),t.cacheLikeList=t.likeList;case 12:case"end":return e.stop()}}),e)})))()},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){try{e.$refs.routerView.$refs.echartsIns&&e.$refs.routerView.$refs.echartsIns.resize(),e.$refs.routerView.resize&&e.$refs.routerView.resize()}catch(t){console.log(t)}}),300)},handleMoving:function(){this.onResize(this.horizontalModeShowLeft)},onClickLike:function(t){var e=this;t.stopPropagation();var i=t.target,a=i.getAttribute("routeName"),s=null,r=null;this.navList.forEach((function(t,e){t.children.forEach((function(t){t.key==a&&(s=t,r=e)}))}));var o=1==s.stared,n={subaction:o?"remove":"add",favoritename:s.key,type:"reportstared"};Object(p["y"])(n).then((function(t){var i=t.status;0==i&&(s.stared=o?0:1,e.cacheNavList[r].stared=o?0:1,c["a"].staredReports[s.key]=o?0:1,e.likeList=e.getLikeList(),e.cacheLikeList=e.likeList)}))},onSelect:function(t){if(t!=this.defaultActive&&(this.setReportDefaultRouter(t),this.$router.push("/reportForm/".concat(t)),0==this.reportTagList.includes(t))){var e={subaction:"add",favoritename:t,type:"reportrecent"};Object(p["y"])(e),this.reportTagList.push(t)}},getNavList:function(t){var e=this,i={},a=0,s=c["a"].staredReports,r=this.permissionList;return t.forEach((function(t,o){var n=t.path,c=t.meta,l=c.isChildren,u=c.titleI18n,f=c.parentI18n,d=c.permissionKey;if(l){if(void 0==i[f]&&(i[f]={title:e.$t("reportForm.".concat(f)),key:f,children:[],iconClass:"".concat(f,"_icon")}),-1==r.indexOf(d))return;"deviceType"==u&&(u="modelOverview"),i[f].children.push({title:e.$t("reportForm.".concat(u)),key:n,stared:void 0==s[n]?0:s[n]}),a++}else i[n]={title:e.$t("reportForm.".concat(u)),key:n}})),{allCount:a,navList:Object.values(i).filter((function(t){return t.children.length>0}))}},getLikeList:function(){var t=[];return this.navList.forEach((function(e,i){e.children.forEach((function(e){1==e.stared&&t.push(Object(n["a"])({},e))}))})),t}})},m=v,k=(i("c314"),i("2877")),L=Object(k["a"])(m,a,s,!1,null,null,null),b=L.exports;e["default"]=b},babe:function(t,e,i){},c314:function(t,e,i){"use strict";i("babe")}}]);