(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c52fa1f"],{"0155":function(e,t,i){"use strict";i("c6d4")},"0595":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quick-time-range"},[t("div",{staticClass:"quick-time-range-wrapper"},e._l(e.list,(function(i){return t("div",{key:i.type,style:{color:i.type==e.type?"#409EFF":""},on:{click:function(t){return e.selectDate(i.type)}}},[e._v(e._s(i.label))])})),0),t("div",{staticClass:"quick-time-range-space"}),t("div",{staticClass:"quick-time-range-btn",on:{click:function(t){e.isCollapse=!e.isCollapse}}},[e.isCollapse?t("i",{staticClass:"el-icon-arrow-right"}):t("i",{staticClass:"el-icon-arrow-left"})])])},r=[],s=i("5101"),o={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(e){var t="datetimerange"==this.dateType,i=[],a=new Date,r=new Date;switch(t&&(a=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),r=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),e){case 0:i=[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(r,"yyyy-MM-dd")+" 23:59:59")];break;case 1:a.setTime(a.getTime()-864e5),r.setTime(r.getTime()-864e5),i=[a,r];break;case 3:a.setTime(a.getTime()-2592e5),i=[a,r];break;case 7:a.setTime(a.getTime()-6048e5),i=[a,r];break;case 10:a.setTime(a.getTime()-864e6),i=[a,r];break;case 30:a.setTime(a.getTime()-2592e6),i=[a,r];break}this.type=e,this.$emit("input",i)}},mounted:function(){var e=this;this.$nextTick((function(){e.setList()}))}},n=o,l=(i("8d09"),i("2877")),c=Object(l["a"])(n,a,r,!1,null,null,null);t["a"]=c.exports},"3b13":function(e,t,i){},5676:function(e,t,i){},"57c9":function(e,t,i){"use strict";var a=i("0595");t["a"]=a["a"]},"632c":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{ref:"wraper",class:e.wraperClasses,on:{mouseup:e.handleMouseup,mousemove:e.handleMousemove,mouseleave:e.handleMouseout}},["horizontal"===e.direction?t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(e.prefix,"-left-area"),style:{width:e.leftSize}},[e._t("left")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.horizontalTriggerStyle},[t("div",{staticClass:"split-pane-trigger-btn",on:{click:e.onClickHorizontal}}),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{class:"".concat(e.prefix,"-right-area"),style:{width:e.horizontalModeShowLeft?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:e.onClickHorizontal,mouseenter:e.onClickHorizontal}},[t("div",{staticClass:"split-pane-right-btn-wrapper"})]),e._t("right")],2)],2):t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(e.prefix,"-top-area"),style:{height:"move"==e.verticalMode?e.leftSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==e.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("top")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:"move"==e.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.verticalTriggerStyle},[t("div",{class:"".concat(e.prefix,"-trigger-btn")},[t("div",{on:{click:function(t){return e.setVerticalMode("top")}}}),t("div",{on:{click:function(t){return e.setVerticalMode("bottom")}}})]),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(e.prefix,"-bottom-area"),style:{height:"move"==e.verticalMode?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"top"==e.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("bottom")],2)],2)])},r=[],s=(i("c975"),i("a9e3"),function(e,t){return t.indexOf(e)>=0}),o={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(e){return s(e,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var e=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-e:e},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(e){this.$emit("on-resize",e)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(e){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",e))},transValue:function(e){return"number"===typeof e?e:Math.floor(parseFloat(e)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(e){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:e.pageX,y:e.pageY},this.$emit("on-resizing-start",e),e.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(e){if(this.canMove){var t,i=0;if("horizontal"===this.direction?(i=Math.floor((e.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((e.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-t;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else t<=this.minTransed?this.triggerOffset=Math.max(t,this.minTransed):this.triggerOffset=Math.min(t,this.maxTransed);e.atMin=100-t<=this.minTransed,e.atMax=100-t>=this.maxTransed,e.pageX>this.directionMark?e.direction=1:e.direction=0,this.directionMark=e.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",e)}},setTriggerOffset:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100,t.$emit("input",t.triggerOffset)}))}},watch:{value:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var e=this;void 0!==this.value&&(this.$nextTick((function(){e.triggerOffset="number"===typeof e.value?e.value:Math.floor(parseInt(e.value)/e.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(i("9526"),i("2877")),c=Object(l["a"])(n,a,r,!1,null,null,null),d=c.exports;t["a"]=d},7031:function(e,t,i){"use strict";i("3b13")},"8d09":function(e,t,i){"use strict";i("a818")},9526:function(e,t,i){"use strict";i("5676")},a314:function(e,t,i){"use strict";i("f86c")},a818:function(e,t,i){},bfa7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{ref:"multiChoiceVehicle",on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("QuickTimeRange",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",verticalMode:e.verticalMode},on:{"on-resize":e.onSplitPaneResize},model:{value:e.triggerOffsetV,callback:function(t){e.triggerOffsetV=t},expression:"triggerOffsetV"}},[t("div",{staticStyle:{position:"relative",height:"100%",border:""},attrs:{slot:"top"},slot:"top"},[t("div",{staticStyle:{position:"absolute",left:"-4px",right:"-4px",top:"0px",bottom:"0px"}},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu,"checkbox-change":e.selectChangeRow,"cell-click":e.cellClickRow}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),t("vxe-table-column",{attrs:{field:"index",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("reportForm.creater"),width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(i){return t("div",{key:i.username},[e._v(e._s(i.username)+"("+e._s(i.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(i.row.creater)}},slot:"reference"},[e._v(e._s(i.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),width:"100",sortable:""}}),t("vxe-table-column",{attrs:{field:"startalarmtimeStr",title:e.$t("alarm.alarmTime"),width:"150",sortable:""}}),t("vxe-table-column",{attrs:{field:"stralarm",title:e.$t("alarm.alarmType"),width:"90",sortable:""}}),t("vxe-table-column",{attrs:{field:"notifyresult",title:e.$t("reportForm.notifyResult"),width:"120",sortable:""}}),t("vxe-table-column",{attrs:{field:"address",title:e.$t("reportForm.address"),width:"200"}})],1)],1)]),t("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[t("ReportMap",{ref:"mapIns"})],1)])],1)]),t("SafetyDetailReport",{ref:"safetyDetail",model:{value:e.safetyDrawer,callback:function(t){e.safetyDrawer=t},expression:"safetyDrawer"}})],1)},r=[],s=i("5530"),o=(i("14d9"),i("d3b7"),i("159b"),i("e561")),n=i("d462"),l=i("57c9"),c=i("632c"),d=i("32eb"),u=i("d91c"),h=i("1c31"),f=i("7cf8"),m=i("6e52"),p=i("5101"),v=i("2f62"),g=i("c276"),y=i("4c3c"),w=i("a05b"),b=i("0c87"),x={name:"PhoneAlarm",data:function(){return{loading:!1,safetyDrawer:!1,exportLoading1:!1,dateRange:[new Date,new Date],totalList:[],selectRowList:[],triggerOffsetV:50,verticalMode:"move"}},mixins:[y["a"],w["a"],b["a"]],beforeRouteEnter:function(e,t,i){i((function(t){t.notifytype=e.meta.notifytype,t.$refs.mapIns&&t.$refs.mapIns.clear&&t.$refs.mapIns.clear(),t.totalList=[],t.safetyDrawer=!1}))},computed:Object(s["a"])({},Object(v["b"])(["isZh","alarmTypeList","reportTagList"])),components:{MultiChoiceVehicle:o["a"],SelectDate:n["a"],QuickTimeRange:l["a"],SplitPane:c["a"],ReportMap:d["a"],SafetyDetailReport:u["a"]},watch:{dateRange:function(){this.handleQuery()}},activated:function(){this.autoQueryAllDeviceAlarms()},methods:Object(s["a"])(Object(s["a"])({},Object(v["c"])(["setAllAlarmList","setUrgentAlarmList","setReportTagList"])),{},{onSplitPaneResize:function(e){this.verticalMode=e},cellClickRow:function(e){var t=e.row;this.$refs.mapIns.singleMarkerToMap(t),this.queryActiveSafetyRecord(t)},queryActiveSafetyRecord:function(e){var t=this,i=35184372088832;if(e.alarm==i){var a={deviceid:e.deviceid,updatetime:e.startalarmtime,activesafetyid:e.av};Object(f["B"])(a).then((function(e){var i=e.playrootpath,a=e.record;if(a){a._localPlayRootPath=i;var r=a.alarmtype;100==r?a.event=Object(g["A"])(a):101==r?a.event=Object(g["m"])(a):103==r&&(a.event=Object(g["o"])(a)),a.dateStr=p["a"].longToLocalDateTimeStr(a.updatetime),t.$refs.safetyDetail.setRecordInfo(a),t.safetyDrawer=!0}}))}},isNeedForceAlarm:function(e){var t=!1,i=this.$store.state.forcealarm;if(e&&i)for(var a=e.length,r=i.length,s=Math.min(a,r),o=0;o<s;++o){var n=e.charAt(o),l=i.charAt(o);if("1"==l&&"1"==n){t=!0;break}}return t},onSelectDevice:function(e){this.deviceids=e},selectChangeRow:function(e){var t=e.records;this.selectRowList=t},exportData:function(){var e=this,t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("alarm.alarmTime"),this.$t("alarm.alarmType"),this.$t("alarm.alarmCount"),this.$t("reportForm.status"),this.$t("reportForm.address")]];if(this.totalList.length){var i=this.$refs.xTable.getTableData().visibleData;i.forEach((function(i,a){var r=0===i.disposestatus?e.$t("reportForm.untreated"):e.$t("reportForm.handled"),s=[];s.push(a+1),s.push(i.devicename),s.push(i.deviceid),s.push(i.startalarmtimeStr),s.push(i.stralarm),s.push(i.alarmcount),s.push(r),s.push(i.address),t.push(s)}));var a={title:this.$t("reportForm.allAlarm"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(a).exportExcel(this)}},handleQuery:function(){var e=this,t=this.deviceids,i=this.dateRange;if(0!=t.length){var a=p["a"].format(i[0],"yyyy-MM-dd"),r=p["a"].format(i[1],"yyyy-MM-dd"),s={deviceids:t,notifytype:this.notifytype,startday:a,endday:r,timezone:p["a"].getOffset(),needaddress:1};this.loading=!0,this.queryDetailDateRange=s.startday+"  "+s.endday,Object(h["s"])(s).then((function(t){var i=t.alarmrecords,a=t.addressmap;e.loading=!1,e.selectRowList=[];var r=[];if(null!=i){var s=i.length;i.forEach((function(t,i){var o=m["a"].deviceInfos[t.deviceid],n=0===t.disposestatus?e.$t("reportForm.untreated"):e.$t("reportForm.handled");r.push({index:s-i,deviceid:t.deviceid,devicename:o.devicename,creater:m["a"].getShowName(o.creater),groupname:o.groupname,alarmcount:t.alarmcount,startalarmtimeStr:p["a"].longToLocalDateTimeStr(t.startalarmtime),isdispose:n,stralarm:e.isZh?t.stralarm:Object(g["Wb"])(t.stralarmen),disposeperson:t.disposeperson?t.disposeperson:"",disposestatus:t.disposestatus,disposecontent:t.disposecontent,createrrecords:[],callat:t.lat,callon:t.lon,alarm:t.alarm,devicealarmid:t.devicealarmid,notifyresult:t.notifyresult,av:t.av,startalarmtime:t.startalarmtime,address:Object(g["L"])(a,t.lat,t.lon)})}))}if(e.totalList=r,r.length){var o=r[0];e.$refs.xTable.setCurrentRow(o),e.$refs.xTable.scrollToRow(o),e.$refs.mapIns.singleMarkerToMap(o)}}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}}),mounted:function(){this.deviceids=[]}},M=x,T=(i("a314"),i("2877")),S=Object(T["a"])(M,a,r,!1,null,null,null),C=S.exports;t["default"]=C},c6d4:function(e,t,i){},d91c:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"moveX"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"safety-day-report-drawer"},[t("div",{staticClass:"safety-day-report-drawer-title",staticStyle:{height:"24px"}},[t("span",{domProps:{textContent:e._s(e.recordTitle)}}),t("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:e.handleClose}},[t("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"16px"}})])]),t("div",{staticClass:"safety-day-report-drawer-title"},[t("span",{domProps:{textContent:e._s(e.recordTime)}})]),t("div",{staticClass:"safety-day-report-drawer-video"},[t("div",{staticStyle:{border:"1px solid #e8eaec"}},[t("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:"280px",autoplay:!1}},e._l(e.imageAndVideoList,(function(i,a){return t("el-carousel-item",{key:a,attrs:{name:"carousel"+a}},[i.image&&""!=i.url?t("div",{staticClass:"full"},[t("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i.url}})]):e._e(),i.image?e._e():t("div",{staticClass:"full"},[t("video",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i.url,autoplay:"",controls:"",loop:""}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:i.image&&""==i.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images"})])})),1)],1),t("div",{staticClass:"safety-day-report-drawer-video-ctrl"},[t("el-row",{staticStyle:{height:"100%"},attrs:{gutter:4}},e._l(e.imageAndVideoList,(function(i,a){return t("el-col",{key:a,staticStyle:{height:"100%"},attrs:{span:6}},[i.image&&""!=i.url?t("div",{staticClass:"full",on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}},[t("img",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:i.url}})]):e._e(),i.image?e._e():t("div",{staticClass:"safety-video full",on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}},[t("video",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:i.url}}),t("div",{staticClass:"video-play-icon"},[t("i",{staticClass:"el-icon-video-play"})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:i.image&&""==i.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$refs.carousel.setActiveItem("carousel"+a)}}})])})),1)],1)]),t("div",{staticClass:"safety-day-report-drawer-switch",on:{click:function(t){e.showMap=!e.showMap}}},[e.showMap?t("div",{staticClass:"common_icon_move_down"}):t("div",{staticClass:"common_icon_move_up"})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showMap,expression:"showMap"}],staticClass:"safety-day-report-drawer-map"},[t("ReportMap",{ref:"mapIns"})],1)])])},r=[],s=(i("a630"),i("14d9"),i("d3b7"),i("3ca3"),i("159b"),i("32eb")),o=i("6e52"),n={name:"SafetyDetailReport",props:{value:{type:Boolean,default:!1}},data:function(){return{showMap:!1,recordTitle:"",recordTime:"",imageAndVideoList:[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}]}},watch:{showMap:function(e){e&&this.row&&this.$refs.mapIns.singleMarkerToMap({callon:this.row.lon,callat:this.row.lat})}},components:{ReportMap:s["a"]},methods:{handleClose:function(){this.imageAndVideoList=[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}],this.$emit("input",!1)},setRecordInfo:function(e){var t=this;this.row=e,this.$refs.carousel.setActiveItem("carousel0"),this.recordTitle=o["a"].getDeviceNameByDeviceId(e.deviceid)+" - "+e.deviceid,this.recordTime=e.event+" - "+e.dateStr,this._localPlayRootPath=e._localPlayRootPath,this.imageAndVideoList=this.getImageAndVideoList(e),this.$nextTick((function(){var i=document.getElementsByClassName("default-images");i&&i.length>0&&Array.from(i).forEach((function(e){e.style.backgroundImage="url('./custom/tvdefault.jpg')"})),1==t.showMap&&t.$refs.mapIns.singleMarkerToMap({callon:e.lon,callat:e.lat})}))},getImageAndVideoList:function(e){var t="",i=[],a=this.getMediaTypeWithIndex(e,2,1),r=this.getMediaTypeWithIndex(e,0,1),s=this.getMediaTypeWithIndex(e,0,2),o=this.getMediaTypeWithIndex(e,0,3);a&&i.push({image:!a,url:a}),r&&i.push({image:!0,url:r}),s&&i.push({image:!0,url:s}),o&&i.push({image:!0,url:o});for(var n=i.length,l=0;l<4-n;l++)i.push({image:!0,url:t});return i},getMediaTypeWithIndex:function(e,t,i){for(var a=null,r=0,s=1;s<6;s++){var o=e["attachfile"+s];if(o&&1===e["attachstatus"+s]&&e["attachfiletype"+s]===t&&(r++,r===i)){a=this._localPlayRootPath+o;break}}return a}}},l=n,c=(i("0155"),i("2877")),d=Object(c["a"])(l,a,r,!1,null,"1e787c6e",null);t["a"]=d.exports},e561:function(e,t,i){"use strict";var a=i("ea22");t["a"]=a["a"]},ea22:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice multi-choice-vehicle"},[t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:e.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:e.isQueryInitData,selectDeviceIds:e.multipleDeviceids},on:{onTreeCheck:e.onTreeCheck}})],1)])},r=[],s=i("5530"),o=(i("4795"),i("2f62")),n=i("2df7"),l={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(s["a"])({},Object(o["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:n["a"]},methods:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(e){this.$emit("onSelectDevice",e),this.setMultipleDeviceids(e)},clearText:function(){var e=this;setTimeout((function(){e.$refs.ztreeDevice.clearText()}),300)}})},c=l,d=(i("7031"),i("2877")),u=Object(d["a"])(c,a,r,!1,null,null,null);t["a"]=u.exports},f86c:function(e,t,i){}}]);