(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73c6e108"],{"2e3b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full checkRefuel"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("SingleChoiceVehicle",{attrs:{disableShare:"",placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:t.deviceid,callback:function(e){t.deviceid=e},expression:"deviceid"}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"daterange"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("div",{staticStyle:{padding:"4px 10px 0px 10px"}},[e("el-checkbox",{model:{value:t.isAll,callback:function(e){t.isAll=e},expression:"isAll"}},[t._v(t._s(t.$t("monitor.all")))])],1)]),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary"},on:{click:t.batchSetOilRecords}},[t._v(t._s(t.$t("common.batchSettingOil")))])],1),e("div",{staticClass:"f_right",staticStyle:{position:"relative",top:"-1px"}},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading2},on:{click:t.exportDetailData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticStyle:{"line-height":"40px","text-align":"center"}},[e("b",{domProps:{textContent:t._s(t.deviceNameTitle)}})]),e("OilRecordDialog",{ref:"oilRecord",on:{onSucc:t.onEditOilRecordSucc,onDelete:t.onDeleteOilRecord},model:{value:t.oilRecordDialog,callback:function(e){t.oilRecordDialog=e},expression:"oilRecordDialog"}}),e("BatchSetOilRecordDialog",{ref:"oilBatchRecord",model:{value:t.oilBatchRecordDialog,callback:function(e){t.oilBatchRecordDialog=e},expression:"oilBatchRecordDialog"}}),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"75px"}},[e("div",[e("div",[e("vxe-table",{ref:"xTable",attrs:{"row-class-name":t.rowClassName,"cell-class-name":t.headerCellClassName,"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",height:"auto",data:t.totalList,size:"mini"},on:{"cell-click":t.handleClickRow}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"44"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticStyle:{"padding-top":"7px"}},[e("span",{staticStyle:{padding:"0px 11px 0px 0px"}},[e("img",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{src:t.editIcon},on:{click:function(e){return t.handleEditSingle(i)}}})])])]}}])}),e("vxe-table-column",{attrs:{field:"statisticsday",width:"300",title:t.$t("reportForm.time")}}),e("vxe-table-column",{attrs:{field:"oilIndexStr",width:"80",title:t.$t("reportForm.oilIndex")}}),e("vxe-table-column",{attrs:{field:"oilStatus",sortable:"",width:"70",title:t.$t("reportForm.status")}}),e("vxe-table-column",{attrs:{field:"oil",sortable:"",width:"80",title:t.$t("reportForm.oil")}}),e("vxe-table-column",{attrs:{field:"soil",width:"80",title:t.$t("reportForm.startOil")}}),e("vxe-table-column",{attrs:{field:"eoil",width:"80",title:t.$t("reportForm.endOil")}}),e("vxe-table-column",{attrs:{field:"marker",sortable:"",title:t.$t("reportForm.remarks")}}),e("vxe-table-column",{attrs:{field:"address",title:t.$t("reportForm.address")}})],1)],1),e("div",[e("div",{staticClass:"fuel-leak-oil-month-map"},[e("ReportMap",{ref:"mapIns"})],1),e("div",{staticClass:"fuel-leak-oil-month-echarts"},[e("FuelLeakOilEcharts",{ref:"echartsIns",on:{"select-index":t.onSelectIndex}})],1)])])])],1)])},o=[],r=i("5530"),s=(i("99af"),i("14d9"),i("4e82"),i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("d3b7"),i("159b"),i("4795"),i("d462")),l=i("d03a"),n=i("80f4"),c=i("945e"),d=i("4258"),m=function(){var t=this,e=t._self._c;return e("vxe-modal",{attrs:{title:t.title,value:t.value,className:"modal-padding0",width:"720px"},on:{hide:function(e){return t.$emit("input",!1)},close:function(e){return t.$emit("input",!1)}}},[e("vxe-table",{ref:"xTable",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-hover-row":"",height:"300",data:t.tableData,size:"mini"}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"status",width:"80",title:t.$t("reportForm.checkResult")}}),e("vxe-table-column",{attrs:{field:"statisticsday",width:"270",title:t.$t("reportForm.time")}}),e("vxe-table-column",{attrs:{field:"oilIndexStr",width:"80",title:t.$t("reportForm.oilIndex")}}),e("vxe-table-column",{attrs:{field:"oilStatus",type:"html",width:"70",title:t.$t("reportForm.status")}}),e("vxe-table-column",{attrs:{field:"beforeOil",title:t.$t("bgManage.beforeAdjustment")}}),e("vxe-table-column",{attrs:{field:"afterOil",title:t.$t("bgManage.afterAdjustment")}})],1),e("div",{staticStyle:{height:"40px","line-height":"40px"}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("span",{domProps:{textContent:t._s(t.$t("bgManage.beforeAdjustment"))}}),t._v(": "),e("span",{domProps:{textContent:t._s(t.beforeTotalOil)}})])],1)],1),e("div",{staticStyle:{height:"30px","line-height":"30px"}},[e("el-row",[e("el-col",{attrs:{span:24}},[e("span",{domProps:{textContent:t._s(t.$t("bgManage.afterAdjustment"))}}),t._v(": "),e("span",{domProps:{textContent:t._s(t.afterTotalOil)}})])],1)],1),e("div",{staticStyle:{"margin-top":"10px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-radio",{attrs:{label:1},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("bgManage.percentage")))]),e("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",disabled:1!=t.radio},model:{value:t.percentage,callback:function(e){t.percentage=t._n(e)},expression:"percentage"}}),e("span",{staticStyle:{"padding-left":"4px"}},[t._v("%")])],1),e("el-col",{attrs:{span:12}},[e("el-radio",{attrs:{label:2},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.$t("bgManage.value")))]),e("el-input",{staticStyle:{width:"100px"},attrs:{clearable:"",disabled:2!=t.radio},model:{value:t.numericalValue,callback:function(e){t.numericalValue=t._n(e)},expression:"numericalValue"}}),e("span",{staticStyle:{"padding-left":"4px"}},[t._v("L")])],1)],1)],1),e("div",{staticStyle:{height:"40px","line-height":"40px","text-align":"center"}},[e("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:t.loading},on:{click:t.handleBatchEdit}},[t._v(t._s(t.$t("common.submit")))])],1)],1)},u=[],h=(i("d81d"),i("201d")),p=i("1c31"),f=i("2f62"),b={name:"OilRecordDialog",props:{value:{type:Boolean,default:!1}},data:function(){return{loading:!1,title:"",beforeTotalOil:"",afterTotalOil:"",radio:1,percentage:"",numericalValue:"",tableData:[]}},computed:Object(r["a"])({},Object(f["b"])(["isZh"])),components:{LabelWrap:h["a"]},watch:{percentage:function(t){if(isNaN(t))this.$XModal.message({message:this.$t("tips.inputNumber"),status:"error",zIndex:9999});else{var e=0,i=0;this.tableData.forEach((function(a){a.afterOil=Number((Number(a.beforeOil)*((100+t)/100)).toFixed(2)),-1==a.oilstate?i+=Number(a.afterOil):1==a.oilstate&&(Number(a.afterOil)<0&&(a.afterOil=0),e+=Number(a.afterOil))})),e=Number(e.toFixed(2)),i=Number(i.toFixed(2)),this.afterTotalOil="".concat(this.$t("reportForm.totalFuelVolume"),":").concat(e,"L ").concat(this.$t("reportForm.totalLeakVolume"),":").concat(i,"L")}},numericalValue:function(t){if(isNaN(t))this.$XModal.message({message:this.$t("tips.inputNumber"),status:"error",zIndex:9999});else{var e=0,i=0;this.tableData.forEach((function(a){a.afterOil=Number((Number(a.beforeOil)+t).toFixed(2)),-1==a.oilstate?i+=Number(a.afterOil):1==a.oilstate&&(Number(a.afterOil)<0&&(a.afterOil=0),e+=Number(a.afterOil))})),e=Number(e.toFixed(2)),i=Number(i.toFixed(2)),this.afterTotalOil="".concat(this.$t("reportForm.totalFuelVolume"),":").concat(e,"L ").concat(this.$t("reportForm.totalLeakVolume"),":").concat(i,"L")}}},methods:{setOilRecordInfo:function(t){var e=t.title,i=t.records,a=t.beforeTotalOil,o=t.afterTotalOil;this.title=e,this.beforeTotalOil=a,this.afterTotalOil=o,this.records=i,this.tableData=i.map((function(t){return{status:"-",statisticsday:t.statisticsday,oilIndexStr:t.oilIndexStr,oilStatus:t.oilStatus,oilstate:t.oilstate,beforeOil:t.oil,afterOil:t.oil}}))},handleBatchEdit:function(){var t=this,e=this.radio,i=this.records,a=JSON.parse(JSON.stringify(i)),o=this.percentage,r=this.numericalValue;if(1==e){if(""==o||isNaN(o))return void this.$XModal.message({message:this.$t("tips.inputNumber"),status:"error",zIndex:9999});a.map((function(t){return t.oil=Number((Number(t.oil)*((100-o)/100)).toFixed(2)),t.eoil=Number((t.soil+t.oil).toFixed(2)),t.oil*=100,t.soil*=100,t.eoil*=100,t}))}else{if(""==r||isNaN(r))return void this.$XModal.message({message:this.$t("tips.inputNumber"),status:"error",zIndex:9999});a.map((function(t){return t.oil=Number((t.oil+r).toFixed(2)),t.eoil=Number((t.soil+t.oil).toFixed(2)),t.oil*=100,t.soil*=100,t.eoil*=100,t}))}this.loading=!0;var s=this.tableData,l=this.$parent;Object(p["j"])({oilrecords:a}).then((function(a){t.loading=!1;var n=a.records;if(0==a.status){n.forEach((function(t){var a=t.cause,l=t.oilrecordid,n=t.status;i.forEach((function(t,i){l==t.oilrecordid&&(0==n?(s[i].status=a,1==e?(t.oil=Number((Number(t.oil)*((100-o)/100)).toFixed(2)),t.eoil=Number((t.soil+t.oil).toFixed(2))):(t.oil=Number((t.oil+r).toFixed(2)),t.eoil=Number((t.soil+t.oil).toFixed(2)))):s[i].status=a)}))}));var c=0,d=0;i.forEach((function(t){1==t.oilstate?c+=Number(t.oil):-1==t.oilstate&&(d+=Math.abs(Number(t.oil)))})),c=Number(c.toFixed(2)),d=Number(d.toFixed(2)),l.deviceNameTitle=t.title+" "+"".concat(t.$t("reportForm.totalFuelVolume"),":").concat(c,"L ").concat(t.$t("reportForm.totalLeakVolume"),":").concat(d,"L"),t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999})}else t.$XModal.message({message:t.$t("tips.editFail"),status:"error",zIndex:9999})}))}}},v=b,g=i("2877"),x=Object(g["a"])(v,m,u,!1,null,null,null),$=x.exports,O=i("7cf8"),y=i("5101"),F=i("c276"),k=i("6e52"),S=i("61fc"),N={name:"CheckRefuel",data:function(){return{editIcon:S,deviceid:"",deviceNameTitle:"",tableTitle:"",dateRange:[new Date,new Date],exportLoading2:!1,isAll:!1,loading:!1,oilRecordDialog:!1,oilBatchRecordDialog:!1,totalList:[],oilindex:"0",oilstate:99,oilIndexList:[{label:this.$t("reportForm.totalDriving"),value:"0"},{label:this.$t("reportForm.tank1"),value:"1"},{label:this.$t("reportForm.tank2"),value:"2"},{label:this.$t("reportForm.tank3"),value:"3"},{label:this.$t("reportForm.tank4"),value:"4"},{label:this.$t("reportForm.totalNotRun"),value:"99"}]}},components:{SingleChoiceVehicle:l["a"],SelectDate:s["a"],ReportMap:n["a"],FuelLeakOilEcharts:c["a"],OilRecordDialog:d["a"],BatchSetOilRecordDialog:$},watch:{deviceid:function(t){this.setSingleDeviceid(t)},month:function(){this.loading||this.handleQuery()}},computed:Object(r["a"])({},Object(f["b"])(["singleDeviceid"])),methods:Object(r["a"])(Object(r["a"])({},Object(f["c"])(["setSingleDeviceid"])),{},{rowClassName:function(t){var e=t.row;t.rowIndex;return e.isSelected?"row--current":1==e.maunedit?"row-yellow":""},headerCellClassName:function(t){var e=t.column,i=t.row;if("oilStatus"===e.field){var a=i.oilstate,o="";switch(a){case-1:o="red-font";break}return o}return null},handleEditSingle:function(t){var e=t.row,i=t.rowIndex,a=JSON.parse(JSON.stringify(e));a.soil*=100,a.eoil*=100,a.dateStr=y["a"].longToLocalDateTimeStr(a.endtime),this.$refs.oilRecord.setOilRecordInfo(a),this.oilRecordDialog=!0,this.selectRow=e,this.rowIndex=i},onEditOilRecordSucc:function(t){var e=this.selectRow;e.soil=t.soil/100,e.eoil=t.eoil/100,e.oil=Number((e.eoil-e.soil).toFixed(2)),e.maunedit=1,e.marker=t.marker,this.handleClickRow({row:e})},onDeleteOilRecord:function(){this.$delete(this.totalList,this.rowIndex),this.$refs.mapIns.markersAndLineLayerToMap([]),this.$refs.echartsIns.updateChartsOption([]);var t=0,e=0,i="",a="";this.totalList.forEach((function(o){i=o.devicename,a=o.deviceid,-1==o.oilstate?e+=Number(o.oil):1==o.oilstate&&(t+=Number(o.oil))})),this.deviceNameTitle=i+"-"+a+" (".concat(this.totalList.length,") ").concat(this.$t("reportForm.totalFuelVolume"),":").concat(t.toFixed(2),"L ").concat(this.$t("reportForm.totalLeakVolume"),":").concat(e.toFixed(2),"L")},batchSetOilRecords:function(){if(this.totalList.length>0){var t=0,e=0,i="",a="";this.totalList.forEach((function(o){i=o.devicename,a=o.deviceid,-1==o.oilstate?e+=Number(o.oil):1==o.oilstate&&(t+=Number(o.oil))})),t=t.toFixed(2),e=e.toFixed(2);var o={title:"".concat(i," - ").concat(a," (").concat(this.totalList.length,")"),beforeTotalOil:"".concat(this.$t("reportForm.totalFuelVolume"),":").concat(t,"L ").concat(this.$t("reportForm.totalLeakVolume"),":").concat(e,"L"),afterTotalOil:"".concat(this.$t("reportForm.totalFuelVolume"),":").concat(t,"L ").concat(this.$t("reportForm.totalLeakVolume"),":").concat(e,"L"),records:this.totalList};this.$refs.oilBatchRecord.setOilRecordInfo(o),this.oilBatchRecordDialog=!0}else this.$XModal.message({message:this.$t("tips.noRecordsPleaseCheck"),status:"error",zIndex:9999})},onSelectIndex:function(t){this.$refs.mapIns.moveingCarMarker(t)},handleClickRow:function(t){var e=this,i=t.row,a=y["a"].longToLocalDateTimeStr(i.begintime-6e5),o=y["a"].longToLocalDateTimeStr(i.endtime+6e5),r={deviceid:i.deviceid,begintime:a,endtime:o,timezone:y["a"].getOffset()};Object(O["Z"])(r).then((function(t){var a=t.records;a&&a.length?(e.$refs.mapIns.carMarkersAndLineLayerToMap(a,i),e.$refs.echartsIns.updateChartsOption(a,[i])):(e.$XModal.message({message:e.$t("device.dataEmptyTips"),status:"error",zIndex:9999}),e.$refs.mapIns.markersAndLineLayerToMap([]),e.$refs.echartsIns.updateChartsOption([]))}))},handleQuery:function(){var t=this,e=this,i=this.deviceid,a=this.dateRange;if(i){var o=null,r=null;this.isAll?(o=y["a"].format(new Date(Date.now()-63072e6),"yyyy-MM-dd"),r=y["a"].format(new Date,"yyyy-MM-dd")):(o=y["a"].format(a[0],"yyyy-MM-dd"),r=y["a"].format(a[1],"yyyy-MM-dd"));var s={startday:o,endday:r,oilstate:this.oilstate,oilindex:Number(this.oilindex),deviceids:[i],offset:y["a"].getOffset()};this.loading=!0,Object(p["eb"])(s).then((function(i){var a=i.records,s=i.addressmap;t.addressmap=s,t.loading=!1;var l=[],n="";a&&a.length&&a.forEach((function(e){var i=e.deviceid,a=k["a"].deviceInfos[i],c=a.devicename,d=a.creater,m=a.groupname,u=e.records,h=0,p=0;e.devicename=c,n=c+"-"+i,u.sort((function(t,e){return e.begintime-t.begintime})),u.forEach((function(e){e.devicename=c,e.deviceid=i,e.creater=d,e.groupname=m,e.soil=e.soil/100,e.eoil=e.eoil/100;var a=Number(Math.abs(e.eoil-e.soil).toFixed(2)),o="";-1==e.oilstate?(o=t.$t("reportForm.leak"),p+=Number(a),e.oil=Number("-"+a)):1==e.oilstate&&(o=t.$t("reportForm.refuel"),h+=Number(a),e.oil=a),e.devicename=c,e.deviceid=i,e.oilIndexStr=Object(F["U"])(e.oilindex),e.oilStatus=o,e.statisticsday=y["a"].longToLocalDateTimeStr(e.begintime)+" - "+y["a"].longToLocalDateTimeStr(e.endtime);var r=Object(F["L"])(s,e.slat,e.slon);e.address=r||"-"})),u.length>0?(e.begintimeStr=y["a"].longToLocalDateTimeStr(u[0].begintime),e.endtimeStr=y["a"].longToLocalDateTimeStr(u[u.length-1].endtime)):(e.begintimeStr=o+" 00:00:00",e.endtimeStr=r+" 23:59:59"),n+=" (".concat(u.length,") ").concat(t.$t("reportForm.totalFuelVolume"),":").concat(h.toFixed(2),"L ").concat(t.$t("reportForm.totalLeakVolume"),":").concat(p.toFixed(2),"L"),l=u})),t.deviceNameTitle=n,t.totalList=l,l.length>0&&setTimeout((function(){e.$refs.xTable.setCurrentRow(l[0],!0),e.handleClickRow({row:l[0]})}),400)})).catch((function(t){console.log(t)}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportDetailData:function(){var t=this;if(this.totalList.length>0){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.time"),this.$t("reportForm.oilIndex"),this.$t("reportForm.status"),this.$t("reportForm.oil"),this.$t("reportForm.startOil"),this.$t("reportForm.endOil"),this.$t("reportForm.address")]];this.totalList.forEach((function(i,a){var o=[];o.push(a+1),o.push(i.devicename),o.push(i.deviceid),o.push(i.creater),o.push(i.groupname),o.push(i.statisticsday),o.push(i.oilIndexStr),-1==i.oilstate?o.push(t.$t("reportForm.leak")):1==i.oilstate&&o.push(t.$t("reportForm.refuel")),o.push(i.oil),o.push(i.soil),o.push(i.eoil),o.push(i.address),e.push(o)}));var i={title:this.$t("bgManage.checkRefuel"),data:e};this.exportLoading2=!0,new ExcelCls(i).exportExcel(this)}}}),mounted:function(){this.singleDeviceid&&(this.deviceid=this.singleDeviceid)}},w=N,D=(i("df6c"),Object(g["a"])(w,a,o,!1,null,null,null)),L=D.exports;e["default"]=L},4258:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("vxe-modal",{attrs:{title:t.title,value:t.value,className:"modal-padding0",width:"360px"},on:{hide:function(e){return t.$emit("input",!1)},close:function(e){return t.$emit("input",!1)}}},[e("div",{staticClass:"margin_b10"},[e("LabelWrap",{attrs:{label:t.$t("reportForm.date")}},[e("div",{staticStyle:{"font-size":"13px",padding:"6px 0px 0px 10px"},domProps:{textContent:t._s(t.dateStr)}})])],1),t.isRefuel?e("div",{staticClass:"margin_b10 add_oil_input"},[e("LabelWrap",{attrs:{label:t.$t("reportForm.refuel")+"(L)"}},[e("el-input",{attrs:{clearable:""},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1)],1):e("div",{staticClass:"margin_b10 leak_oil_input"},[e("LabelWrap",{attrs:{label:t.$t("reportForm.leak")+"(L)"}},[e("el-input",{attrs:{clearable:""},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1)],1),e("div",{staticClass:"margin_b10"},[e("el-input",{attrs:{clearable:"",type:"textarea",rows:"4",placeholder:t.remarkPlaceholder},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),e("div",{staticClass:"margin_b10",staticStyle:{"text-align":"center"}},[e("el-row",[e("el-col",{attrs:{span:8,offset:3}},[e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),title:t.$t("tips.confirmDelete")},on:{confirm:t.handleDelete}},[e("el-button",{staticStyle:{width:"100%"},attrs:{slot:"reference",type:"danger",loading:t.loading},slot:"reference"},[t._v(t._s(t.$t("common.delete")))])],1)],1),e("el-col",{attrs:{span:8,offset:2}},[e("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("common.confirm")))])],1)],1)],1)])},o=[],r=i("5530"),s=(i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("201d")),l=i("1c31"),n=i("2f62"),c={name:"OilRecordDialog",props:{value:{type:Boolean,default:!1}},data:function(){return{isRefuel:!1,loading:!1,dateStr:"",volume:"",remarks:""}},computed:Object(r["a"])(Object(r["a"])({},Object(n["b"])(["isZh"])),{},{title:function(){return this.isRefuel?this.$t("missing.refuelingRecord"):this.$t("missing.leakageRecord")},remarkPlaceholder:function(){return this.$t("missing.pleaseEnterremarks")}}),components:{LabelWrap:s["a"]},mounted:function(){},methods:{handleDelete:function(){var t=this;this.loading=!0,Object(l["b"])(this.data).then((function(e){var i=e.status;t.loading=!1,0==i?(t.$emit("onDelete",t.data),t.$emit("input",!1),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.recordInUse"),status:"error",zIndex:9999})}))},setOilRecordInfo:function(t){this.data=t,1==t.oilstate?(this.isRefuel=!0,this.volume=Number((Math.abs(t.eoil-t.soil)/100).toFixed(2))):-1==t.oilstate&&(this.isRefuel=!1,this.volume=Number((Math.abs(t.eoil-t.soil)/100).toFixed(2))),this.dateStr=t.dateStr,this.remarks=t.marker?t.marker:""},handleSubmit:function(){var t=this,e=JSON.parse(JSON.stringify(this.data));e.marker=this.remarks,e.eoil=e.soil+100*Number(this.volume),Object(l["i"])(e).then((function(i){var a=i.status,o=i.cause;0==a?(e.maunedit=1,t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999}),t.$emit("onSucc",Object.assign(t.data,e)),t.$emit("input",!1)):1==a?t.$XModal.message({message:t.$t("tips.recordInUse"),status:"error",zIndex:9999}):t.$XModal.message({message:t.$t("tips.editFail")+":"+o,status:"error",zIndex:9999})}))}}},d=c,m=(i("5561"),i("2877")),u=Object(m["a"])(d,a,o,!1,null,null,null);e["a"]=u.exports},5561:function(t,e,i){"use strict";i("d720")},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"h",(function(){return o})),i.d(e,"l",(function(){return r})),i.d(e,"k",(function(){return s})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return m})),i.d(e,"m",(function(){return u})),i.d(e,"i",(function(){return h})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return f}));var a="#2D9F28",o="#89C6F2",r="#FFC65E",s="red",l="#1EBEFF",n="#E505F7",c="#40A703",d="#F27908",m="#F180D1",u="#0F1F46",h="#000000",p={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(t,e,i,a,o){var r=t[0],s=o.contentSize,l=o.viewSize;return r+10>l[0]-s[0]?r=r-s[0]-10:r+=10,[r,"0%"]}},"7f6d":function(t,e,i){},"80f4":function(t,e,i){"use strict";var a=i("32eb");e["a"]=a["a"]},"945e":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},o=[],r=i("ade3"),s=i("5530"),l=(i("14d9"),i("b0c0"),i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("d3b7"),i("159b"),i("43c8")),n=i.n(l),c=i("2f62"),d=i("c276"),m=i("5101"),u=i("5aff"),h={name:"FuelLeakOilEcharts",computed:Object(s["a"])({},Object(c["b"])(["isZh","distanceUnit","speedUnit"])),methods:{initChart:function(){var t=this;this.distance=[],this.recvtime=[],this.veo=[],this.totalad=[],this.notRunOil=[],this.oil1=[],this.oil2=[],this.oil3=[],this.oil4=[],this.devStates=[],this.devReissue=[],this.markPointData=[],this.markPointDataOil1=[],this.markPointDataOil2=[],this.markPointDataOil3=[],this.markPointDataOil4=[],this.markPointDataOil99=[],this.disMin=0,this.totalDistanceMin=0;var e=this.$t("reportForm.oil2"),i=this.$t("reportForm.oil3"),a=this.$t("reportForm.oil4");this.selectedLegend=Object(r["a"])(Object(r["a"])(Object(r["a"])({},e,!1),i,!1),a,!1),this.chartsIns=n.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(e){var i=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",i)&&t.recvtime.length){var a=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];t.$emit("select-index",a)}}))},updateChartsOption:function(t,e){var i=this,a=[],o=[],r=[],s=[],l=[],n=[],c=[],u=[],h=[],p=[],f=[],b=0;t.forEach((function(t,e){t.totalad=t.totalad/100,t.ad0=t.ad0/100,t.ad1=t.ad1/100,t.ad2=t.ad2/100,t.ad3=t.ad3/100,0==e&&(b=t.totaldistance),n.push(t.ad0),c.push(t.ad1),u.push(t.ad2),h.push(t.ad3),p.push(t.strstatus),f.push(0==t.reissue?i.$t("header.no"):i.$t("header.yes")),s.push(t.totalad),l.push(t.totalnotrunningad),o.push(m["a"].longToLocalDateTimeStr(t.updatetime)),r.push(Number(Object(d["e"])(t.speed).toFixed(0))),a.push(Number(Object(d["d"])(t.totaldistance-b).toFixed(3)))})),this.distance=a,this.recvtime=o,this.veo=r,this.totalad=s,this.notRunOil=l,this.oil1=n,this.oil2=c,this.oil3=u,this.oil4=h,this.devStates=p,this.devReissue=f,e&&(e=JSON.parse(JSON.stringify(e)),e.forEach((function(t){t.eoil=100*t.eoil,t.soil=100*t.soil}))),this.markPointData=Object(d["a"])(t,e,0),this.totalDistanceMin=b,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var t=this.$t("reportForm.totalOil"),e=this.$t("reportForm.notRunTotalad"),i=this.$t("reportForm.speed"),a=this.$t("reportForm.mileage"),o=this.$t("reportForm.time"),r=this.$t("reportForm.oil1"),l=this.$t("reportForm.oil2"),n=this.$t("reportForm.oil3"),c=this.$t("reportForm.oil4"),m=this.$t("reportForm.status"),h=this.$t("reportForm.reissue"),p=this.distanceUnit,f=this.speedUnit;return{grid:{top:40,left:60,right:60,bottom:20},tooltip:Object(s["a"])(Object(s["a"])({trigger:"axis"},u["a"]),{},{formatter:function(s){var m="<div>".concat(s[0].name,"</div>");for(var h in s){var b=s[h].seriesName,v=s[h].value;b&&b!=o&&(m+=b==a?Object(d["k"])(u["b"],b,v,p):b==i?Object(d["k"])(u["h"],b,v,f):b==t?Object(d["k"])(u["k"],b,v,"L"):b==e?Object(d["k"])(u["c"],b,v,"L"):b==r?Object(d["k"])(u["d"],b,v,""):b==l?Object(d["k"])(u["e"],b,v,""):b==n?Object(d["k"])(u["f"],b,v,""):b==c?Object(d["k"])(u["g"],b,v,""):Object(d["k"])(u["m"],b,v,""))}return'<div style="width:230px">'.concat(m,"</div>")}}),legend:{data:[i,a,t,e,r,l,n,c],selected:this.selectedLegend,x:"left"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:this.$t("reportForm.oil"),type:"value",nameTextStyle:10,padding:2,nameGap:5,axisLabel:{formatter:"{value} L"}},{name:a+p,type:"value",nameTextStyle:10,nameGap:2,padding:5,min:this.disMin,axisTick:{show:!1}}],series:[{name:o,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:i,type:"line",symbol:"none",yAxisIndex:1,smooth:!0,color:u["h"],data:this.veo},{name:a,type:"line",symbol:"none",yAxisIndex:1,color:u["b"],smooth:!0,data:this.distance},{smooth:!0,name:t,type:"line",symbol:"none",color:u["k"],data:this.totalad,markPoint:{data:this.markPointData,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:e,type:"line",symbol:"none",color:u["c"],data:this.notRunOil,markPoint:{data:this.markPointDataOil99,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:r,type:"line",symbol:"none",color:u["d"],data:this.oil1,markPoint:{data:this.markPointDataOil1,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:l,type:"line",symbol:"none",color:u["e"],data:this.oil2,markPoint:{data:this.markPointDataOil2,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:n,type:"line",symbol:"none",color:u["f"],data:this.oil3,markPoint:{data:this.markPointDataOil3,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:c,type:"line",symbol:"none",color:u["g"],data:this.oil4,markPoint:{data:this.markPointDataOil4,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:m,type:"line",symbol:"none",color:u["m"],data:this.devStates},{smooth:!0,name:h,type:"line",symbol:"none",color:u["m"],data:this.devReissue}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},p=h,f=i("2877"),b=Object(f["a"])(p,a,o,!1,null,null,null);e["a"]=b.exports},d720:function(t,e,i){},df6c:function(t,e,i){"use strict";i("7f6d")}}]);