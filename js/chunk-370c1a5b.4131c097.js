(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-370c1a5b"],{"0dbf":function(e,t,i){},"141b":function(e,t,i){"use strict";i("0dbf")},"242d":function(e,t,i){"use strict";i("498a");var a=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.$t("common.renew"),className:"modal-padding0",value:e.value,width:"366px"},on:{hide:e.handleClose,close:e.handleClose}},[e.loading?t("div",{staticStyle:{height:"254px",position:"relative"}},[t("MyLoading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}})],1):t("div",[t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",attrs:{span:6}},[e._v(" "+e._s(e.$t("missing.currentUser"))+" : ")]),t("el-col",{staticClass:"renew-col-value",attrs:{span:18}},[e._v(" "+e._s(e.userName)+" ")])],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",attrs:{span:6}},[e._v(" "+e._s(e.$t("missing.surplus"))+" : ")]),t("el-col",{staticClass:"renew-col-value",attrs:{span:18}},[t("span",{domProps:{textContent:e._s(e.bonuspoints)}})])],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",attrs:{span:6}},[e._v(" "+e._s(e.$t("common.renew"))+" : ")]),t("el-col",{staticClass:"renew-col-value",attrs:{span:8}},[t("el-input",{attrs:{clearable:""},model:{value:e.points,callback:function(t){e.points=e._n("string"===typeof t?t.trim():t)},expression:"points"}})],1)],1),t("el-row",{staticClass:"renew-row-quick",staticStyle:{padding:"10px 0px"}},[t("el-col",{staticClass:"renew-col-label",attrs:{span:6}},[e._v(" "+e._s(e.$t("missing.quickJindou"))+" : ")]),t("el-col",{attrs:{span:18}},[t("div",e._l(e.discounts,(function(i,a){return t("span",{key:a,staticClass:"quick-option",class:[e.points==i.bonus?"quick-option-active":""],on:{click:function(t){e.points=i.bonus}}},[e._v(" "+e._s(i.bonus)+" "),1==e.userType?t("span",{staticStyle:{"font-size":"12px"}},[e._v(" ("+e._s(i.discount+e.$t("common.lose"))+") ")]):e._e()])})),0)])],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",attrs:{span:6}},[e._v(" "+e._s(e.$t("missing.payMode"))+" : ")]),t("el-col",{staticClass:"renew-col-value",attrs:{span:16}},[t("el-row",[t("el-col",{staticClass:"hide_label",attrs:{span:2}},[t("div",[t("el-radio",{attrs:{label:"alipay"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1)]),t("el-col",{staticStyle:{cursor:"pointer"},attrs:{span:6}},[t("img",{attrs:{src:e.zfbIcon,width:"30"},on:{click:function(t){e.radio="alipay"}}})]),t("el-col",{staticClass:"hide_label",attrs:{span:2}},[t("div",[t("el-radio",{attrs:{label:"wxpay"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1)]),t("el-col",{staticStyle:{cursor:"pointer"},attrs:{span:6}},[t("img",{attrs:{src:e.wxIcon,width:"30"},on:{click:function(t){e.radio="wxpay"}}})]),e.points>=100?t("el-col",{attrs:{span:8}},[t("b",{staticStyle:{color:"#ff6600","font-size":"18px"}},[e._v(e._s(1==e.userType?e.moneyRmb:e.points?e.points:"0")+e._s(e.isZh?"元":"RMB"))])]):t("el-col",{attrs:{span:8}},[t("b",{staticStyle:{color:"#ff6600","font-size":"18px"}},[e._v(e._s(e.points)+e._s(e.isZh?"元":"RMB"))])])],1)],1)],1),t("el-row",{staticStyle:{margin:"20px 0px"}},[t("el-col",{attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100%","background-color":"#00c91a",border:"none"},attrs:{type:"primary",loading:e.chargeloading},on:{click:e.chargeBonuspoints}},[t("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.$t("missing.pay")))])])],1)],1)],1),t("vxe-modal",{attrs:{title:"wxpay"==e.radio?e.$t("missing.wechatScanning"):e.$t("missing.zhifubaoScanning"),className:"modal-padding0",value:e.wxShow,width:"366px"},on:{hide:function(t){e.wxShow=!1},close:function(t){e.wxShow=!1}}},[""==e.wxCodeUrl?t("div",{staticStyle:{width:"208px",height:"248px",margin:"25px auto"}},[t("MyLoading",{model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}})],1):t("div",{staticStyle:{height:"268px"}},[t("div",{staticStyle:{width:"208px",height:"208px",margin:"10px auto 10px auto"},attrs:{id:"wx-el"}}),t("div",{staticStyle:{"text-align":"center","font-size":"20px",color:"#ff6600","padding-top":"10px"}},[t("b",[e._v(e._s(e.amount)+e._s(e.isZh?"元":"RMB"))])])])])],1)},s=[],o=i("5530"),c=(i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("2f62")),r=i("45f0"),n=i("e285"),l=i("b562"),d=i("e078"),u=i("3947"),p={name:"RechargeDialong",props:{value:{type:Boolean,default:!1},tableList:{type:Array,default:function(){return[]}}},data:function(){return{wxIcon:d,zfbIcon:u,wxShow:!1,radio:"alipay",loading:!1,chargeloading:!1,bonuspoints:"",points:100,wxCodeUrl:"",amount:0,discounts:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["isZh","userName","userType"])),{},{moneyRmb:function(){var e=0,t=this.points,i=null;return this.discounts.forEach((function(a){a.bonus==t&&(e=t*a.discount/100),t>=a.bonus&&(i=a.discount/100)})),0==e&&(e=t*i),e?Number(e.toFixed(2)):"0"}}),components:{MyLoading:r["a"]},watch:{value:function(e){var t=this;e?(this.bonuspoints="",this.loading=!0,Object(n["hb"])().then((function(e){var i=e.bonuspoints,a=e.discounts;t.loading=!1,t.bonuspoints=null!=i?i.toFixed(2):0,t.discounts=a})),this.$bus.$on("wxpayresultSucc",(function(){t.wxShow=!1,t.loading=!0,Object(n["hb"])().then((function(e){var i=e.bonuspoints;t.loading=!1,t.bonuspoints=null!=i?i.toFixed(2):0,t.$XModal.message({message:t.$t("tips.rechargedSuccessfully"),status:"success",zIndex:9999})}))}))):this.$bus.$off("wxpayresultSucc")}},methods:{handleClose:function(){this.$emit("input",!1)},chargeBonuspoints:function(){var e=this,t=this.points;if(t&&t>0){this.chargeloading=!0,this.wxCodeUrl="";var i={bonuspoints:t,payway:this.radio};Object(l["k"])(i).then((function(t){var i=t.status,a=t.codeurl,s=t.amount;if(0==i){if(null==a)return void e.$XModal.message({message:"wxpay"==e.radio?e.$t("tips.aliPayment"):e.$t("tips.wxPayment"),status:"error",zIndex:9999});e.wxCodeUrl=a,e.wxShow=!0,e.amount=s/100,setTimeout((function(){var e=document.getElementById("wx-el");e.innerHTML="";new QRCode(e,{text:a,width:208,height:208,correctLevel:0})}),300)}else e.$XModal.message({message:e.$t("tips.networkError"),status:"error",zIndex:9999})})).finally((function(){e.chargeloading=!1}))}else this.$XModal.message({message:this.$t("tips.chargeBonuspointsTips"),status:"error",zIndex:9999})}}},h=p,m=(i("d0ba"),i("2877")),v=Object(m["a"])(h,a,s,!1,null,null,null);t["a"]=v.exports},3947:function(e,t){e.exports="data:image/png;base64,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"},6706:function(e,t,i){"use strict";i("8be6")},"7fa3":function(e,t,i){"use strict";i.r(t);i("c975");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"expire-mgr full"},[t("div",{staticClass:"expire-mgr-left"},[t("div",{staticClass:"expire-mgr-left-title"},[t("i",{staticClass:"circle"}),t("b",[e._v(e._s(e.$t("common.selectDevice")))])]),t("div",{staticClass:"expire-mgr-left-content"},[t("SearchDeviceZtree",{ref:"deviceZtree",attrs:{showClear:""},on:{onTreeCheck:e.onTreeCheck}})],1)]),t("div",{staticClass:"expire-mgr-right"},[t("div",{staticStyle:{position:"absolute",top:"0px",left:"0px",right:"0px","z-index":"999","border-right":"1px solid #e4e7ed","border-left":"1px solid #e4e7ed","border-top":"1px solid #e4e7ed","overflow-x":"auto","overflow-y":"hidden"}},[t("div",{staticClass:"expire-mgr-right-title",staticStyle:{height:"118px"}},[t("div",{staticClass:"f_left radio-wrap4"},[t("div",{staticStyle:{"padding-top":"18.5px",height:"118px"}},[t("div",{on:{click:function(t){return e.handleSelectRadio("0")}}},[t("el-radio",{attrs:{label:"0"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("monitor.all"))+"("+e._s(e.totalCount)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-2")}}},[t("el-radio",{attrs:{label:"-2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.notActive"))+"("+e._s(e.notActiveCount)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-3")}}},[t("el-radio",{attrs:{label:"-3"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.notActiveNotRecharg"))+"("+e._s(e.notActiveNotRechargCount)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-4")}}},[t("el-radio",{attrs:{label:"-4"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.notActiveRecharged"))+"("+e._s(e.notActiveRechargedCount)+")")])],1)])]),t("div",{staticClass:"f_left radio-title",staticStyle:{width:"92px",height:"118px"}},[t("div",{staticStyle:{padding:"0px",width:"92px","line-height":"118px"}},[e._v(e._s(e.$t("bgManage.dueSoon")))])]),t("div",{staticClass:"f_left radio-wrap4"},[t("div",{staticStyle:{"padding-top":"8px",height:"118px"}},[t("div",{on:{click:function(t){return e.handleSelectRadio("-1")}}},[t("el-radio",{attrs:{label:"-1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.activeNotchargedCount"))+"("+e._s(e.notRecharged)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("7")}}},[t("el-radio",{attrs:{label:"7"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within7Days"))+"("+e._s(e.effective7)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("30")}}},[t("el-radio",{attrs:{label:"30"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within30Days"))+"("+e._s(e.effective30)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("60")}}},[t("el-radio",{attrs:{label:"60"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within60Days"))+"("+e._s(e.effective60)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("90")}}},[t("el-radio",{attrs:{label:"90"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within90Days"))+"("+e._s(e.effective90)+")")])],1)])]),t("div",{staticClass:"f_left radio-title",staticStyle:{width:"90px",height:"118px"}},[t("div",{staticStyle:{padding:"0px",width:"90px","line-height":"118px"}},[e._v(e._s(e.$t("device.expired")))])]),t("div",{staticClass:"f_left radio-wrap4"},[t("div",{staticStyle:{"padding-top":"8px",height:"118px"}},[t("div",{on:{click:function(t){return e.handleSelectRadio("-5")}}},[t("el-radio",{attrs:{label:"-5"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("bgManage.notRecharged"))+"("+e._s(e.notRechargedOverdued)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-7")}}},[t("el-radio",{attrs:{label:"-7"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within7Days"))+"("+e._s(e.invalid7)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-30")}}},[t("el-radio",{attrs:{label:"-30"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within30Days"))+"("+e._s(e.invalid30)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-60")}}},[t("el-radio",{attrs:{label:"-60"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.within60Days"))+"("+e._s(e.invalid60)+")")])],1),t("div",{on:{click:function(t){return e.handleSelectRadio("-61")}}},[t("el-radio",{attrs:{label:"-61"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(e.$t("common.exceed60Days"))+"("+e._s(e.exceed61)+")")])],1)])]),t("div",{staticClass:"f_left",staticStyle:{padding:"0px 0px 0px 10px"}},[e.chargecoinPermission?t("div",{staticClass:"hover-btn",staticStyle:{"padding-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:function(t){e.rechargeDialog=!0}}},[e._v(e._s(e.$t("common.renew")))])],1):e._e(),t("div",{staticClass:"hover-btn",staticStyle:{"padding-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:e.handleRenew}},[e._v(e._s(e.$t("bgManage.platformRenewal")))])],1),t("div",{staticClass:"hover-btn",staticStyle:{"padding-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:function(t){e.transferDialog=!0}}},[e._v(e._s(e.$t("bgManage.bTransfer")))])],1),t("div",{staticClass:"hover-btn",staticStyle:{"padding-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:e.clearTable}},[e._v(e._s(e.$t("common.clearList")))])],1)]),t("div",{staticClass:"f_left",staticStyle:{padding:"0px 0px 0px 10px"}},[t("div",{staticClass:"hover-btn",staticStyle:{"margin-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:function(t){e.importDialog=!0}}},[e._v(e._s(e.$t("common.importQuery")))])],1),t("div",{staticClass:"hover-btn",staticStyle:{"margin-top":"4px"}},[t("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[t("div",[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini",plain:"",loading:e.exportLoading1},on:{click:e.exportAllData}},[e._v(e._s(e.$t("monitor.all")))]),t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",size:"mini",plain:"",loading:e.exportLoading2},on:{click:e.exportData}},[e._v(e._s(e.$t("missing.checked")))])],1),t("el-button",{staticClass:"other",attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(e.$t("common.exportData")))])],1)],1),e.userType<2?t("div",{staticClass:"hover-btn",staticStyle:{"margin-top":"4px"}},[t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDeleteCount",{count:e.selectList.length})},on:{confirm:e.handleSubmitDelete}},[t("el-button",{staticClass:"other",attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(e.$t("common.deleteDevice")))])],1)],1):e._e(),t("div",{staticClass:"hover-btn",staticStyle:{"margin-top":"4px"}},[t("el-button",{staticClass:"other",attrs:{type:"primary"},on:{click:function(t){e.expireDialog=!0}}},[e._v(e._s(e.$t("bgManage.deviceExpire")))])],1)])])]),t("div",{staticClass:"expire-mgr-right-table",staticStyle:{bottom:"40px",top:"118px"}},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":e.sortConfig,"cell-class-name":e.getActonStatusClassName,"menu-config":e.tableMenu,"auto-resize":"",border:"",resizable:"","highlight-current-row":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.tableList},on:{"menu-click":e.handleClickTableMenu,"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectChangeEvent,"cell-click":e.cellclick,"cell-dblclick":e.cellDblclick,"filter-change":e.onFilterChange}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",width:"140",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",width:"140",title:e.$t("alarm.devNum"),sortable:""}}),t("vxe-table-column",{attrs:{field:"simnum",title:e.$t("common.simnum"),sortable:"",width:"140"}}),t("vxe-table-column",{attrs:{field:"roleStr",title:e.$t("bgManage.useState"),sortable:"",width:"110","filter-multiple":!1}}),t("vxe-table-column",{attrs:{field:"overdueTime",title:e.$t("alarm.overdueTime"),width:"110",sortable:""}}),t("vxe-table-column",{attrs:{field:"expirenotifyTime",title:e.$t("alarm.expireTime"),width:"110",sortable:""}}),t("vxe-table-column",{attrs:{field:"firstloctimeStr",title:e.$t("bgManage.firstloctimeStr"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"lastValidpoistiontime",title:e.$t("bgManage.lastOnlineTime"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"initloctimeStr",title:e.$t("reportForm.initLocTime"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"createTime",title:e.$t("alarm.createTime"),sortable:"",width:"120"}}),t("vxe-table-column",{attrs:{field:"deviceType",filters:e.typeOptions,"filter-multiple":!1,"filter-method":e.filterTypeMethod,sortable:"",title:e.$t("reportForm.deviceType"),width:"120"}}),e.isHasDeviceTag?t("vxe-table-column",{attrs:{field:"devicetag",title:e.$t("monitor.deviceTag"),filters:e.tagOptions,"filter-multiple":!1,"filter-method":e.filterTagMethod,width:"110",sortable:""}}):e._e(),t("vxe-table-column",{attrs:{field:"creater",width:"140",title:e.$t("reportForm.creater"),sortable:""}}),t("vxe-table-column",{attrs:{field:"groupname",width:"120",title:e.$t("reportForm.groupName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"price",title:e.$t("bgManage.unitPrice"),sortable:"",width:"140"}}),t("vxe-table-column",{attrs:{field:"simiccid",title:"ICCID",width:"140",sortable:""}}),t("vxe-table-column",{attrs:{field:"prechargeyears",title:e.$t("bgManage.renewYears"),width:"100",sortable:""}}),e.permissionList.indexOf("monitor-viewsimdetail")>-1?t("vxe-table-column",{attrs:{title:e.$t("common.simDetail"),width:"85"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleSeeSim(i)}}},[e._v(e._s(e.$t("common.see")))])]}}],null,!1,1974703607)}):e._e(),t("vxe-table-column",{attrs:{field:"packagesStr",sortable:"",title:e.$t("systemManage.packages"),width:"200"}})],1)],1),t("div",{staticStyle:{position:"absolute",left:"0px",right:"0px",bottom:"0px",height:"40px","padding-top":"8px"}},[t("div",{staticStyle:{float:"left","line-height":"28px"}},[t("span",{staticStyle:{"font-size":"14px",color:"#409eff"}},[e._v(" "+e._s(e.$t("missing.checked"))+" "+e._s(e.selectList.length))])]),t("div",{staticStyle:{float:"left"}},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50,100,200,500],"page-size":e.pageSize,layout:"sizes, prev, pager, next",total:e.tableTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])]),t("RechargeDialog",{model:{value:e.rechargeDialog,callback:function(t){e.rechargeDialog=t},expression:"rechargeDialog"}}),t("RenewDialog",{attrs:{tableList:e.selectList,packages:e.packages},on:{onRenewSucc:e.onRenewSucc},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}}),t("AdminRenewDialog",{attrs:{tableList:e.selectList,packages:e.packages},on:{onRenewSucc:e.onRenewSucc},model:{value:e.adminDialog,callback:function(t){e.adminDialog=t},expression:"adminDialog"}}),t("RenewSuccessDeviceList",{ref:"renewSuccess",model:{value:e.renewSuccess,callback:function(t){e.renewSuccess=t},expression:"renewSuccess"}}),t("ImportDeviceidsDialog",{on:{"on-import":e.onImportDevice},model:{value:e.importDialog,callback:function(t){e.importDialog=t},expression:"importDialog"}}),t("NotFindDialog",{ref:"notFind",model:{value:e.notFindDialog,callback:function(t){e.notFindDialog=t},expression:"notFindDialog"}}),t("EditDevice",{attrs:{deviceid:e.deviceid,info:e.currentRow},on:{editSucc:e.onEditSucc},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}}),t("TransferDeviceDialog",{attrs:{selectList:e.selectList},on:{transferSucc:e.transferSucc},model:{value:e.transferDialog,callback:function(t){e.transferDialog=t},expression:"transferDialog"}}),t("ExpireTimeDialog",{attrs:{tableList:e.selectList},on:{onRenewSucc:e.onExpireSucc},model:{value:e.expireDialog,callback:function(t){e.expireDialog=t},expression:"expireDialog"}})],1)},s=[],o=i("5530"),c=(i("99af"),i("4de4"),i("caad"),i("d81d"),i("14d9"),i("fb6a"),i("4e82"),i("a434"),i("a9e3"),i("d3b7"),i("07ac"),i("2532"),i("159b"),i("4795"),i("2f62")),r=i("7a80"),n=i("f641"),l=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{value:e.value,className:"modal-padding0",width:"766px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("div",{domProps:{textContent:e._s(e.$t("missing.renewalSuccList"))}}),t("div",[t("span",{domProps:{textContent:e._s(e.$t("bgManage.totalGoldenBeans"))}}),e._v(": "),t("span",{domProps:{textContent:e._s(e.title)}})])]),t("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,"auto-resize":"",border:"",resizable:"","highlight-current-row":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"400",data:e.tableList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"creater",width:"100",title:e.$t("reportForm.creater"),sortable:""}}),t("vxe-table-column",{attrs:{field:"groupname",width:"100",title:e.$t("reportForm.groupName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"devicename",width:"110",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",width:"110",title:e.$t("alarm.devNum"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceType",title:e.$t("reportForm.deviceType"),width:"120",sortable:""}}),t("vxe-table-column",{attrs:{field:"role",type:"html",title:e.$t("bgManage.useState"),formatter:e.formatRole,sortable:"",width:"110"}}),t("vxe-table-column",{attrs:{field:"overdueTime",title:e.$t("alarm.overdueTime"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"lastValidpoistiontime",title:e.$t("bgManage.lastOnlineTime"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"firstloctimeStr",title:e.$t("bgManage.firstloctimeStr"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"createTime",title:e.$t("alarm.createTime"),sortable:"",width:"120"}}),t("vxe-table-column",{attrs:{field:"packagesStr",sortable:"",title:e.$t("systemManage.packages"),width:"200"}})],1),t("div",{staticStyle:{"padding-top":"10px","text-align":"center"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.handleClose}},[e._v(e._s(e.$t("common.determine")))])],1)],1)},d=[],u=i("a05b"),p=i("c276"),h={name:"RenewSuccessDeviceList",mixins:[u["a"]],props:{value:{type:Boolean,default:!1}},data:function(){return{title:"",tableList:[]}},computed:Object(o["a"])({},Object(c["b"])(["isZh"])),methods:{handleClose:function(){this.$emit("input",!1)},formatRole:function(e){var t=e.row,i=Object(p["u"])(t.isfree);return'<span style="color:'.concat(i.color,'">').concat(i.stateStr,"</span>")},setTableList:function(e){var t=e.renewList,i=e.title;this.title=i,this.tableList=t}}},m=h,v=i("2877"),f=Object(v["a"])(m,l,d,!1,null,null,null),g=f.exports,b=i("242d"),x=i("5bca"),y=i("7e15"),w=i("8913"),D=i("ae31"),k=i("f1b2"),C=i("8ecb"),S=i("6e52"),A=i("5101"),T=i("b562"),M=i("7cf8"),$=i("4c3c"),R=i("e173"),L={name:"PlatformExpire",data:function(){return{totalColumns:["creater","groupname","devicename","deviceid","simnum","roleStr","overdueTime","expirenotifyTime","lastValidpoistiontime","initloctimeStr","firstloctimeStr","createTime","deviceType","price","simiccid"],deleteIcon:R,radio:"0",dialog:!1,transferDialog:!1,exportLoading1:!1,exportLoading2:!1,adminDialog:!1,rechargeDialog:!1,renewSuccess:!1,importDialog:!1,expireDialog:!1,notFindDialog:!1,tableList:[],editDialog:!1,deviceid:"",currentRow:{},selectList:[],packages:[],totalCount:0,notActiveCount:0,notActiveNotRechargCount:0,notActiveRechargedCount:0,activeNotchargedCount:0,notRecharged:0,notRechargedOverdued:0,effective7:0,effective30:0,effective60:0,effective90:0,invalid7:0,invalid30:0,invalid60:0,invalid90:0,exceed61:0,currentPage:1,pageSize:500,tableTotal:0,typeOptions:[],tagOptions:[]}},mixins:[u["a"],$["a"]],components:{SearchDeviceZtree:y["a"],RenewDialog:r["a"],RechargeDialog:b["a"],AdminRenewDialog:n["a"],ImportDeviceidsDialog:x["a"],EditDevice:k["a"],RenewSuccessDeviceList:g,TransferDeviceDialog:D["a"],ExpireTimeDialog:C["a"],NotFindDialog:w["a"]},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["isZh","deviceTypes","userType","permissionList"])),{},{userType:function(){return this.$store.state.user.userType},chargecoinPermission:function(){return-1!=this.permissionList.indexOf("manage-manageoverdue-recharge-chargecoin")},isHasDeviceTag:function(){return this.permissionList.includes("monitor-editdevice-viewdevicetag")}}),watch:{dialog:function(e){if(0==e){var t=this.$refs.xTable.getCheckboxRecords();this.selectList=t}},adminDialog:function(e){if(0==e){var t=this.$refs.xTable.getCheckboxRecords();this.selectList=t}}},methods:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["setIsReloadRootuser","setReportTagList"])),{},{getActonStatusClassName:p["n"],filterTypeMethod:function(e){var t=e.value,i=e.row;return t==i.devicetype},filterTagMethod:function(e){var t=e.value,i=e.row;return t==i.devicetag},onFilterChange:function(){var e=this,t=this.$refs.xTable.getTableData(),i=t.visibleData;setTimeout((function(){e.$refs.xTable.setAllCheckboxRow(!0),e.selectList=i}),30)},setTypeOptions:function(e){var t=this.$i18n.locale,i=[],a={},s=this.deviceTypes,o={},c=e.concat([]);c.sort((function(e,t){return e.devicetype-t.devicetype})),c.forEach((function(e){var c=e.devicetag;c&&(a[c]||(a[c]={label:c,value:c}));var r=e.devicetype;if(void 0==o[r]){o[r]=1;var n=s[r];i.push({label:n.typename+"-"+("zh"==t?n.remark:n.remarken),typename:n.typename,value:n.devicetypeid})}else o[r]++})),i.forEach((function(e){e.label+="("+o[e.value]+")"})),this.typeOptions=i,this.tagOptions=Object.values(a)},transferSucc:function(){var e=this.tableList,t=cacheMgr.deviceInfos;e.forEach((function(e){var i=t[e.deviceid];e.groupname=i.groupname,e.creater=i.creater})),this.$refs.deviceZtree.updateZtreeIns()},onExpireSucc:function(e){var t=e.deviceids,i=[];this.tableList.forEach((function(e){var a=e.deviceid;if(t.includes(a)){var s=cacheMgr.deviceInfos[a];e.isfree=s.isfree,e.expirenotifyTime=A["a"].format(new Date(s.expirenotifytime),"yyyy-MM-dd")}i.push(e)})),this.tableList=i},handleSeeSim:function(e){var t=this,i=this.$loading({lock:!0,text:this.$t("missing.loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=e.row.deviceid;Object(M["V"])(a).then((function(e){var i=e.status,a=e.accessurl;if(0==i){var s=document.createElement("a");s.setAttribute("target","_blank"),s.href=a,s.click()}else 1==i?t.$XModal.message({message:t.$t("tips.noPermission"),status:"success",zIndex:9999}):2==i?t.$XModal.message({message:t.$t("tips.deviceNotIncludedSim"),status:"success",zIndex:9999}):3==i&&t.$XModal.message({message:t.$t("tips.notFoundSim"),status:"success",zIndex:9999})})).finally((function(){i.close()}))},loadScript:function(){if(void 0==window.QRCode){var e=document.createElement("script");e.src="./js/qrcode.min.js",document.head.appendChild(e)}},cellclick:function(e){var t=e.row;t.isfree},handleSelectRadio:function(e){this.setTableList(e)},handleSizeChange:function(e){this.pageSize=e,this.splitCacheToTableList()},handleCurrentChange:function(e){this.splitCacheToTableList()},onEditSucc:function(e){var t=cacheMgr.deviceInfos[e.deviceid];t.offlinedelay=e.offlinedelay,this.row.devicename=e.devicename;var i=this.deviceTypes[e.devicetype],a=i.typename,s=i.price,o=i.price3,c=i.price5,r=i.price10,n=null;this.tableList.forEach((function(t){t.deviceid===e.deviceid&&(n=t)})),n.deviceType=a,n.price=s,n.price3=o,n.price5=c,n.price10=r,this.$refs.deviceZtree.updateNodes([e.deviceid])},cellDblclick:function(e){var t=e.column,i=e.row;"devicename"==t.property&&(this.row=i,this.currentRow={creater:i.creater},this.deviceid=i.deviceid,this.editDialog=!0)},selectAllEvent:function(e){e.checked;var t=e.records;this.selectList=t},selectChangeEvent:function(e){e.checked;var t=e.records;this.selectList=t},clearTable:function(){this.tableList=[],this.selectList=[],this.cacheDeviceids=[],this.calcStateCount(),this.$refs.deviceZtree.checkAllNodes(!1)},handleRenew:function(){this.selectList.length>0?0==this.userType?this.adminDialog=!0:this.dialog=!0:this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleSubmitDelete:function(){var e=this,t=this.selectList,i=t.map((function(e){var t=e.deviceid;return t}));if(i.length>0){var a=this.$loading({lock:!0,text:this.$t("missing.loading"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s={deviceids:i};Object(T["p"])(s).then((function(s){a.close(),0==s.status?(i.forEach((function(i){t.forEach((function(a,s){a.deviceid==i&&(delete S["a"].lastPositions[i],e.$delete(t,s))}))})),Object(T["S"])().then((function(t){var i=t.status,a=t.rootuser;0==i&&(S["a"].rootuser=a,cacheMgr.setDeviceInfos(a),e.$refs.deviceZtree.refreshZtree(),e.setReportTagList([]),e.setIsReloadRootuser(!0))})),e.$XModal.message({message:e.$t("tips.deleteSucc"),status:"success",zIndex:9999})):1==s.status?e.$XModal.message({message:e.$t("tips.deleteDeviceTip"),status:"error",zIndex:9999}):2==s.status?e.$XModal.message({message:e.$t("tips.deleteDevice100Tip"),status:"error",zIndex:9999}):3==s.status?e.$XModal.message({message:e.$t("tips.noPermission"),status:"error",zIndex:9999}):e.$XModal.message({message:e.$t("tips.deleteFail")+":"+s.cause,status:"error",zIndex:9999})}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleDelete:function(e){var t=e.rowIndex,i=e.row.deviceid;this.$delete(this.tableList,t);var a=[];this.cacheDeviceids.forEach((function(e){e!=i&&a.push(e)})),this.cacheDeviceids=a,this.$refs.deviceZtree.cancelCheckNode(i),this.calcStateCount()},exportAllData:function(){var e=[[this.$t("reportForm.index"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("common.simnum"),this.$t("reportForm.deviceType"),this.$t("monitor.deviceTag"),this.$t("systemManage.packages"),this.$t("bgManage.useState"),this.$t("alarm.createTime"),this.$t("reportForm.initLocTime"),this.$t("bgManage.firstloctimeStr"),this.$t("bgManage.lastOnlineTime"),this.$t("alarm.overdueTime"),this.$t("alarm.expireTime"),this.$t("bgManage.unitPrice"),"ICCID",this.$t("bgManage.renewYears")]],t=this.packages,i=this.deviceTypes,a=S["a"].deviceInfos,s=1;if(0!=this.cacheDeviceids.length){this.cacheDeviceids.forEach((function(o){var c=a[o],r=i[c.devicetype],n=r.typename,l=r.price,d=[];Object(p["tb"])(c,t,c.packageids);var u=A["a"].format(new Date(c.createtime),"yyyy-MM-dd"),h=0!=c.initloctime?A["a"].format(new Date(c.initloctime),"yyyy-MM-dd"):"-",m=0!=c.firstloctime?A["a"].format(new Date(c.firstloctime),"yyyy-MM-dd"):"-",v=0!=c.lastactivetime?A["a"].format(new Date(c.lastactivetime),"yyyy-MM-dd"):"-",f=Object(p["X"])(c),g=0==c.expirenotifytime?"-":A["a"].format(new Date(c.expirenotifytime),"yyyy-MM-dd");d.push(s),d.push(c.creater),d.push(c.groupname),d.push(c.devicename),d.push(c.deviceid),d.push(c.simnum?c.simnum:""),d.push(n),d.push(c.devicetag),d.push(c.packagesStr),d.push(Object(p["u"])(c.isfree).stateStr),d.push(u),d.push(h),d.push(m),d.push(v),d.push(f),d.push(g),d.push(l),d.push(c.simiccid?c.simiccid:""),d.push(c.prechargeyears),s++,e.push(d)}));var o={title:this.$t("bgManage.renewList"),data:e,exportMaxLength:1e5};this.exportLoading1=!0,new ExcelCls(o).exportExcel(this)}},exportData:function(){if(0!=this.tableList.length){var e=this.isHasDeviceTag,t=this.$refs.xTable.getTableData().visibleData,i=[[this.$t("reportForm.index"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("common.simnum"),this.$t("reportForm.deviceType"),this.$t("monitor.deviceTag"),this.$t("systemManage.packages"),this.$t("bgManage.useState"),this.$t("alarm.createTime"),this.$t("reportForm.initLocTime"),this.$t("bgManage.firstloctimeStr"),this.$t("bgManage.lastOnlineTime"),this.$t("alarm.overdueTime"),this.$t("alarm.expireTime"),this.$t("bgManage.unitPrice"),"ICCID"]];0==e&&i[0].splice(7,1),t.forEach((function(t,a){var s=[];s.push(a+1),s.push(t.creater),s.push(t.groupname),s.push(t.devicename),s.push(t.deviceid),s.push(t.simnum?t.simnum:""),s.push(t.deviceType),e&&s.push(t.devicetag),s.push(t.packagesStr),s.push(Object(p["u"])(t.isfree).stateStr),s.push(t.createTime),s.push(t.initloctimeStr),s.push(t.firstloctimeStr),s.push(t.lastValidpoistiontime),s.push(t.overdueTime),s.push(t.expirenotifyTime),s.push(t.price),s.push(t.simiccid?t.simiccid:""),i.push(s)}));var a={title:this.$t("bgManage.renewList"),data:i};this.exportLoading2=!0,new ExcelCls(a).exportExcel(this)}},onImportDevice:function(e){this.radio="0";var t=[],i=[],a=cacheMgr.deviceInfos,s=Object(p["t"])(a),o=s.simMap,c=s.iccidMap;e.forEach((function(e){var s=Object(p["ob"])(a,o,c,e);s?t.push(s.deviceid):i.push(e)})),this.cacheDeviceids=t,this.calcStateCount(),this.setTableList(this.radio),i.length>0&&(this.notFindDialog=!0,this.$refs.notFind.setDeviceids(this.$t("tips.deviceNotFound"),i))},onRenewSucc:function(e){var t=e.deviceids,i=(e.devices,e.title);this.calcStateCount();var a=[];this.tableList.forEach((function(e){var t=e.deviceid,i=S["a"].deviceInfos[t];e.isfree=i.isfree,e.overdueTime=A["a"].format(new Date(i.overduetime),"yyyy-MM-dd"),a.push(e)})),this.tableList=a,this.$refs.deviceZtree.updateNodes(t),this.handleSelectRadio(this.radio);var s=this.packages,o=[],c=this.deviceTypes;t.forEach((function(e){var t=S["a"].deviceInfos[e],i=c[t.devicetype],a=i.typename,r={creater:t.creater,deviceid:t.deviceid,devicename:t.devicename,groupname:t.groupname,deviceType:a,isfree:t.isfree,devicetype:t.devicetype,roleStr:Object(p["u"])(t.isfree).stateStr,createTime:A["a"].format(new Date(t.createtime),"yyyy-MM-dd"),firstloctimeStr:0!=t.firstloctime?A["a"].format(new Date(t.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=t.lastactivetime?A["a"].format(new Date(t.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:Object(p["X"])(t),expirenotifyTime:0==t.expirenotifytime?"-":A["a"].format(new Date(t.expirenotifytime),"yyyy-MM-dd"),packageids:t.packageids,devicetag:t.devicetag};Object(p["tb"])(r,s,t.packageids),o.push(r)})),this.$refs.renewSuccess.setTableList({renewList:o,title:i}),this.renewSuccess=!0},onTreeCheck:function(e){this.cacheDeviceids=e,this.calcStateCount(),this.setTableList(this.radio)},calcStateCount:function(){var e=0,t=0,i=0,a=0,s=0,o=0,c=0,r=0,n=0,l=0,d=0,u=0,p=0,h=0,m=0,v=Date.now(),f=864e5,g=7*f,b=30*f,x=60*f,y=90*f;this.cacheDeviceids.forEach((function(f){var w=S["a"].deviceInfos[f];if(w){var D=w.isfree,k=w.overduetime-v;0==w.firstloctime?(e++,0==w.firstloctime&&0==w.overduetime&&a++,0==w.firstloctime&&w.overduetime>0&&s++,w.firstloctime>0&&0==w.overduetime&&t++):0==w.overduetime?(t++,o++,2!=D&&(k=Math.abs(k),k<=g&&d++,k<=b&&u++,k<x&&p++,k>=x&&h++,i++)):k>=0?(k<g&&c++,k<b&&r++,k<x&&n++,k<y&&l++):(k=Math.abs(k),w.overduetime>0&&k>=x&&m++,k<g&&d++,k<b&&u++,k<x&&p++)}})),this.notActiveCount=e,this.notRecharged=t,this.notRechargedOverdued=i,this.notActiveNotRechargCount=a,this.notActiveRechargedCount=s,this.activeNotchargedCount=o,this.effective7=c,this.effective30=r,this.effective60=n,this.effective90=l,this.invalid7=d,this.invalid30=u,this.invalid60=p,this.invalid90=h,this.exceed61=m,this.totalCount=this.cacheDeviceids.length},splitCacheToTableList:function(){var e=this,t=this.currentPage-1,i=this.pageSize,a=t*i;this.tableList=this.cacheList.slice(a,a+i),this.$refs.xTable.scrollTo(0,0),setTimeout((function(){e.$refs.xTable.setAllCheckboxRow(!0),e.selectList=e.tableList}),30)},setTableList:function(e){var t=[];switch(e){case"-1":t=this.getNotRechargedTableList();break;case"0":t=this.getAllTableList();break;case"-2":t=this.getUnactiveTableList();break;case"-3":t=this.getUnactiveNotRechargTableList();break;case"-4":t=this.getUnactiveRechargedTableList();break;case"-5":t=this.getActiveNotRechargOverdTableList();break;case"-6":t=this.getActiveNotRechargTableList();break;case"7":case"30":case"60":case"90":t=this.getFastExpirationTableList(Number(e));break;case"-7":case"-30":case"-60":case"-90":case"-61":t=this.getExpirationTableList(Number(e));break}this.currentPage=1,this.tableTotal=t.length,this.cacheList=t,this.splitCacheToTableList(),this.setTypeOptions(t)},getAllTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o){var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getUnactiveTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o&&0==o.firstloctime){var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getUnactiveNotRechargTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o&&0==o.firstloctime&&0==o.overduetime){var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getUnactiveRechargedTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o&&0==o.firstloctime&&o.overduetime>0){var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getActiveNotRechargOverdTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o){var c=o.isfree;if(o.firstloctime>0&&0==o.overduetime&&2!=c){var r=e.getRowData(o,a);Object(p["tb"])(r,t,o.packageids),i.push(r)}}})),i},getActiveNotRechargTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o&&o.firstloctime>0&&0==o.overduetime){var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getNotRechargedTableList:function(){var e=this,t=this.packages,i=[],a=this.deviceTypes;return this.cacheDeviceids.forEach((function(s){var o=S["a"].deviceInfos[s];if(o){if(0==o.firstloctime)return;if(0!==o.overduetime)return;var c=e.getRowData(o,a);Object(p["tb"])(c,t,o.packageids),i.push(c)}})),i},getFastExpirationTableList:function(e){var t=this,i=24*e*3600*1e3,a=Date.now(),s=[],o=this.deviceTypes,c=this.packages;return this.cacheDeviceids.forEach((function(e){var r=S["a"].deviceInfos[e];if(r){var n=r.overduetime,l=n-a;if(0==r.firstloctime)return;if(l>0&&i>l){var d=t.getRowData(r,o);Object(p["tb"])(d,c,r.packageids),s.push(d)}}})),s},getExpirationTableList:function(e){var t=this,i=this.packages,a=24*e*3600*1e3,s=Date.now(),o=[],c=this.deviceTypes;return this.cacheDeviceids.forEach((function(r){var n=S["a"].deviceInfos[r];if(n){var l=n.isfree;if(0!==n.firstloctime&&n.overduetime>0&&2!=l){var d=n.overduetime-s;if(d<0){var u=!1;if(d=Math.abs(d),0==n.overduetime&&(d=864e5),a=Math.abs(a),"-61"==e?d>=5184e6&&(u=!0):d<=a&&(u=!0),u){var h=t.getRowData(n,c);Object(p["tb"])(h,i,n.packageids),o.push(h)}}}}})),o},getRowData:function(e,t){var i=t[e.devicetype],a=i.typename,s=i.price,o=i.price3,c=i.price5,r=i.price10;return{creater:e.creater,deviceid:e.deviceid,devicename:e.devicename,groupname:e.groupname,deviceType:a,isfree:e.isfree,devicetype:e.devicetype,roleStr:Object(p["u"])(e.isfree).stateStr,createTime:A["a"].format(new Date(e.createtime),"yyyy-MM-dd"),initloctimeStr:e.initloctime?A["a"].format(new Date(e.initloctime),"yyyy-MM-dd"):"-",firstloctimeStr:0!=e.firstloctime?A["a"].format(new Date(e.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=e.lastactivetime?A["a"].longToLocalDateTimeStr(new Date(e.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:Object(p["X"])(e),prechargeyears:e.prechargeyears,expirenotifyTime:0==e.expirenotifytime?"-":A["a"].format(new Date(e.expirenotifytime),"yyyy-MM-dd"),price:s,price3:o,price5:c,price10:r,simnum:e.simnum?e.simnum:"",simiccid:e.simiccid?e.simiccid:"",packageids:e.packageids,devicetag:e.devicetag}}}),mounted:function(){var e=this;this.packages=[],this.allpackages=[],this.cacheDeviceids=[],this.loadScript(),Object(T["Z"])({filterenabled:0}).then((function(t){var i=t.packages;i=i||[],i.forEach((function(e){e.packagename=Object(p["Y"])(e)})),e.packages=i.filter((function(e){return 1==e.enabled})),e.allpackages=i}))}},E=L,_=(i("141b"),Object(v["a"])(E,a,s,!1,null,null,null)),I=_.exports;t["default"]=I},"8be6":function(e,t,i){},"8ecb":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.$t("bgManage.batchSetDeviceExpiration"),className:"vxe-modal-visible modal-padding0",value:e.value,width:"366px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",[e.isZh?t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",attrs:{span:8}},[e._v(" "+e._s(e.$t("missing.selectedDevice"))+": ")]),t("el-col",{staticClass:"renew-col-value",attrs:{span:4}},[t("b",[t("span",{domProps:{textContent:e._s(e.tableList.length)}})])])],1):e._e(),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{offset:2,span:10}},[t("el-radio",{attrs:{label:0},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" "+e._s(e.$t("bgManage.specifyDate")))])],1),t("el-col",{staticClass:"renew-col-value",attrs:{span:9}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","picker-options":e.unicoPickerOptions,clearable:!1},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{offset:2,span:10}},[t("el-radio",{attrs:{label:2},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" "+e._s(e.$t("bgManage.increaseDay")))])],1),t("el-col",{staticClass:"renew-col-value",attrs:{span:9}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:365},model:{value:e.addDays,callback:function(t){e.addDays=t},expression:"addDays"}})],1)],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{offset:2,span:10}},[t("el-radio",{attrs:{label:3},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" "+e._s(e.$t("bgManage.reduceDay")))])],1),t("el-col",{staticClass:"renew-col-value",attrs:{span:9}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:365},model:{value:e.reduceDays,callback:function(t){e.reduceDays=t},expression:"reduceDays"}})],1)],1),t("el-row",{staticClass:"renew-row"},[t("el-col",{staticClass:"renew-col-label",staticStyle:{"text-align":"left","padding-left":"30px"},attrs:{offset:2,span:10}},[t("el-radio",{attrs:{label:1},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(" "+e._s(e.$t("bgManage.syncPlatformExpirationDate")))])],1)],1),t("el-row",{staticStyle:{margin:"20px 0px 10px 0px"}},[t("el-col",{attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.batchOperate}},[e._v(e._s(e.$t("common.submitSave")))])],1)],1)],1)])},s=[],o=i("5530"),c=(i("d81d"),i("a9e3"),i("d3b7"),i("159b"),i("5867")),r=i("e285"),n=i("6e52"),l=i("2f62"),d=i("5101"),u={name:"ExpireTimeDialog",props:{value:{type:Boolean,default:!1},tableList:{type:Array,default:function(){return[]}}},mixins:[c["a"]],data:function(){return{loading:!1,radio:0,date:new Date(new Date(d["a"].format(new Date,"yyyy-MM-dd")).getTime()+31536e6),addDays:30,reduceDays:30}},computed:Object(o["a"])({},Object(l["b"])(["isZh"])),methods:{handleClose:function(){this.$emit("input",!1),this.loading&&(this.loading=!0)},batchOperate:function(){var e=this,t=this.tableList.map((function(e){var t=e.deviceid;return t}));if(t.length>0){var i={deviceids:t,action:"modifyexpiretime"};switch(this.radio){case 0:i.modifyexpiretimetype="expiretime",i.expiretime=this.date.getTime();break;case 1:i.modifyexpiretimetype="syncoverduetime";break;case 2:i.modifyexpiretimetype="diffday",i.diffday=Number(this.addDays);break;case 3:i.modifyexpiretimetype="diffday",i.diffday=-Number(this.reduceDays);break}this.loading=!0,Object(r["m"])(i).then((function(t){var a=t.status,s=t.successrecords,o=t.cause;0==a?(s.forEach((function(e){var t=e.device,i=e.deviceid,a=n["a"].deviceInfos[i];a.expirenotifytime=t.expirenotifytime,a.isfree=t.isfree})),e.$XModal.message({message:e.$t("tips.saveSucc"),status:"success",zIndex:9999}),e.$emit("onRenewSucc",i),e.handleClose()):e.$XModal.message({message:e.$t("tips.saveFail")+":"+o,status:"error",zIndex:9999})})).finally((function(){e.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}}},p=u,h=(i("6706"),i("2877")),m=Object(h["a"])(p,a,s,!1,null,null,null);t["a"]=m.exports},"9e85":function(e,t,i){},d0ba:function(e,t,i){"use strict";i("9e85")},e078:function(e,t){e.exports="data:image/png;base64,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"}}]);