(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-032ece38"],{"04e5":function(t,e,i){"use strict";i("5211")},"1cea":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticStyle:{width:"100%",height:"380px"}},[e("div",{staticStyle:{margin:"0px auto",width:"600px",height:"380px"}},[e("WeightEcharts",{ref:"echartsIns"})],1)]),e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.weightSummary"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"载重详情",name:"details"}})],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"460px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"emptyDurationTime",align:"right",title:t.$t("reportForm.emptyDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"emptyDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.emptyMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"halfLoadDurationTime",align:"right",title:t.$t("reportForm.halfLoadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"halfLoadDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.halfLoadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"overDurationTime",align:"right",title:t.$t("reportForm.overloadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"overDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.overloadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"fullDurationTime",align:"right",title:t.$t("reportForm.fullLoadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"fullDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.fullLoadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"loadingDurationTime",align:"right",title:t.$t("reportForm.loadingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"loadingDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.loadingMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"unloadDurationTime",align:"right",title:t.$t("reportForm.unloadingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"unloadDurationDist",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.unloadingMileage"),sortable:""}})],1)],1),e("div",{style:t.detailsStyle},[e("vxe-table",{attrs:{"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),width:"120"}}),e("vxe-table-column",{attrs:{field:"statisticsday",title:t.$t("reportForm.date"),width:"120"}}),e("vxe-table-column",{attrs:{field:"emptyDurationTime",align:"right",title:t.$t("reportForm.emptyDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"emptyDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.emptyMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"halfLoadDurationTime",align:"right",title:t.$t("reportForm.halfLoadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"halfLoadDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.halfLoadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"overDurationTime",align:"right",title:t.$t("reportForm.overloadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"overDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.overloadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"fullDurationTime",align:"right",title:t.$t("reportForm.fullLoadDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"fullDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.fullLoadMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"loadingDurationTime",align:"right",title:t.$t("reportForm.loadingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"loadingDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.loadingMileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"unloadDurationTime",align:"right",title:t.$t("reportForm.unloadingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"unloadDurationDist",formatter:t.numberToFixed2,title:t.$t("reportForm.unloadingMileage"),sortable:""}})],1)],1)])],1)])},r=[],o=(i("14d9"),i("d3b7"),i("159b"),i("ea22")),n=i("2ddc"),l=i("1c31"),s=i("c276"),d=i("5101"),u=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},c=[],m=i("5530"),h=i("43c8"),b=i.n(h),f=i("2f62"),v={name:"WeightEcharts",computed:Object(m["a"])({},Object(f["b"])(["isZh"])),methods:{initChart:function(){var t=[{value:12,name:this.$t("reportForm.weightDuration")},{value:112,name:this.$t("reportForm.loadingMileage")},{value:92,name:this.$t("reportForm.halfLoadDuration")},{value:12,name:this.$t("reportForm.halfLoadMileage")}];this.chartsIns=b.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(t),!0)},updateChartsOption:function(t){this.chartsIns.setOption(this.getChartsOption([]),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(t){return{title:{text:this.$t("reportForm.weightDuration"),bottom:"auto"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},series:[{type:"pie",radius:"70%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},D=v,p=i("2877"),g=Object(p["a"])(D,u,c,!1,null,null,null),x=g.exports,y=i("6e52"),T=i("4c3c"),F=i("a05b"),$={name:"weightState",data:function(){return{loading:!1,activeName:"tabTotal",dateRange:[new Date,new Date],totalList:[],detailsList:[]}},mixins:[T["a"],F["a"]],components:{MultiChoiceVehicle:o["a"],SelectDate:n["a"],WeightEcharts:x},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},methods:{numberToFixed2:s["qb"],onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids;if(e.length>0){var i=this.dateRange,a=d["a"].format(i[0],"yyyy-MM-dd"),r=d["a"].format(i[1],"yyyy-MM-dd"),o={startday:a,endday:r,offset:d["a"].getOffset(),devices:e};this.loading=!0,Object(l["pb"])(o).then((function(e){var i=e.status,a=e.records,r=[];0==i&&a&&a.forEach((function(t,e){var i={index:e+1,deviceid:t.deviceid,devicename:y["a"].deviceInfos[t.deviceid].devicename,dailyrecords:t.dailyrecords,records:t.records};t.totalrecords.forEach((function(t){switch(t.loadstatus){case 0:i.emptyDurationTime=Object(s["Rb"])(t.durationtime),i.emptyDurationDist=t.durationdistance,i.durationtime0=t.durationtime/1e3/60;break;case 1:i.halfLoadDurationTime=Object(s["Rb"])(t.durationtime),i.halfLoadDurationDist=t.durationdistance,i.durationtime1=t.durationtime/1e3/60;break;case 2:i.overDurationTime=Object(s["Rb"])(t.durationtime),i.overDurationDist=t.durationdistance,i.durationtime2=t.durationtime/1e3/60;break;case 3:i.fullDurationTime=Object(s["Rb"])(t.durationtime),i.fullDurationDist=t.durationdistance,i.durationtime3=t.durationtime/1e3/60;break;case 4:i.loadingDurationTime=Object(s["Rb"])(t.durationtime),i.loadingDurationDist=t.durationdistance,i.durationtime4=t.durationtime/1e3/60;break;case 5:i.unloadDurationTime=Object(s["Rb"])(t.durationtime),i.unloadDurationDist=t.durationdistance,i.durationtime5=t.durationtime/1e3/60;break}})),r.push(i)})),t.loading=!1,t.totalList=r}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){},handleClickRow:function(t){this.activeName="details";var e=t.deviceid,i=[];t.dailyrecords.forEach((function(t){var a={deviceid:e};a.statisticsday=t.statisticsday,a.devicename=y["a"].deviceInfos[e].devicename,t.records.forEach((function(t){switch(t.loadstatus){case 0:a.emptyDurationTime=Object(s["Rb"])(t.durationtime),a.emptyDurationDist=t.durationdistance,a.durationtime0=t.durationtime/1e3/60;break;case 1:a.halfLoadDurationTime=Object(s["Rb"])(t.durationtime),a.halfLoadDurationDist=t.durationdistance,a.durationtime1=t.durationtime/1e3/60;break;case 2:a.overDurationTime=Object(s["Rb"])(t.durationtime),a.overDurationDist=t.durationdistance,a.durationtime2=t.durationtime/1e3/60;break;case 3:a.fullDurationTime=Object(s["Rb"])(t.durationtime),a.fullDurationDist=t.durationdistance,a.durationtime3=t.durationtime/1e3/60;break;case 4:a.loadingDurationTime=Object(s["Rb"])(t.durationtime),a.loadingDurationDist=t.durationdistance,a.durationtime4=t.durationtime/1e3/60;break;case 5:a.unloadDurationTime=Object(s["Rb"])(t.durationtime),a.unloadDurationDist=t.durationdistance,a.durationtime5=t.durationtime/1e3/60;break}})),i.push(a)})),this.detailsList=i}},mounted:function(){this.deviceids=[]}},w=$,k=(i("04e5"),Object(p["a"])(w,a,r,!1,null,null,null)),O=k.exports;e["default"]=O},"3b13":function(t,e,i){},5211:function(t,e,i){},7031:function(t,e,i){"use strict";i("3b13")},ea22:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},r=[],o=i("5530"),n=(i("4795"),i("2f62")),l=i("2df7"),s={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(o["a"])({},Object(n["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:l["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(n["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},d=s,u=(i("7031"),i("2877")),c=Object(u["a"])(d,a,r,!1,null,null,null);e["a"]=c.exports}}]);