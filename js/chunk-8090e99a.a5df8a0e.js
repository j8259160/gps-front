(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8090e99a"],{"018e":function(t,e,a){},"0595":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(a){return e("div",{key:a.type,style:{color:a.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(a.type)}}},[t._v(t._s(a.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},r=[],s=a("5101"),l={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,a=[],i=new Date,r=new Date;switch(e&&(i=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),r=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:a=[new Date(s["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(r,"yyyy-MM-dd")+" 23:59:59")];break;case 1:i.setTime(i.getTime()-864e5),r.setTime(r.getTime()-864e5),a=[i,r];break;case 3:i.setTime(i.getTime()-2592e5),a=[i,r];break;case 7:i.setTime(i.getTime()-6048e5),a=[i,r];break;case 10:i.setTime(i.getTime()-864e6),a=[i,r];break;case 30:i.setTime(i.getTime()-2592e6),a=[i,r];break}this.type=t,this.$emit("input",a)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},o=l,n=(a("8d09"),a("2877")),c=Object(n["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},"3b13":function(t,e,a){},"57c9":function(t,e,a){"use strict";var i=a("0595");e["a"]=i["a"]},7031:function(t,e,a){"use strict";a("3b13")},"80f4":function(t,e,a){"use strict";var i=a("32eb");e["a"]=i["a"]},"8d09":function(t,e,a){"use strict";a("a818")},"9c81":function(t,e,a){"use strict";a("018e")},a818:function(t,e,a){},cb1e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"100px"}},[e("el-select",{staticStyle:{width:"100px"},model:{value:t.tempindex,callback:function(e){t.tempindex=e},expression:"tempindex"}},t._l(t.tempIndexList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticStyle:{"margin-top":"4px",width:"100%",height:"300px"}},[e("OverTempEcharts",{attrs:{chartList:t.chartList}})],1),e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.overtempStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"",name:"details"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName == 'details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v("("+t._s(t.detailsList.length)+")")])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"394px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","auto-resize":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(a.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"dateStr",title:t.$t("reportForm.time"),width:"180",sortable:""}}),e("vxe-table-column",{attrs:{field:"groupName",title:t.$t("reportForm.groupName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalovercount",title:t.$t("monitor.totalAlarm"),sortable:""}}),e("vxe-table-column",{attrs:{field:"alarmcount",title:t.$t("reportForm.alarm"),sortable:""}}),e("vxe-table-column",{attrs:{field:"warningcount",title:t.$t("monitor.earlyWarning"),sortable:""}})],1)],1),e("div",{style:t.detailsStyle},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","auto-resize":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"tempIndexStr",title:t.$t("reportForm.tempIndex"),sortable:"",width:"80"}}),e("vxe-table-column",{attrs:{field:"status",title:t.$t("reportForm.status"),sortable:"",width:"100"}}),e("vxe-table-column",{attrs:{field:"threshold",title:t.$t("reportForm.threshold"),sortable:"",width:"80"}}),e("vxe-table-column",{attrs:{field:"duration",width:"160",sortable:"",title:t.$t("common.duration")}}),e("vxe-table-column",{attrs:{field:"distance",formatter:t.numberToFixed2,align:"right",width:"90",sortable:"",title:t.$t("reportForm.mileage")}}),e("vxe-table-column",{attrs:{field:"begintimeStr",title:t.$t("reportForm.startTime"),sortable:"",width:"160"}}),e("vxe-table-column",{attrs:{field:"endtimeStr",title:t.$t("reportForm.endTime"),sortable:"",width:"160"}}),e("vxe-table-column",{attrs:{field:"address",title:t.$t("reportForm.address"),sortable:"",width:"320"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:t._s(a.row.address)},on:{click:function(e){return t.seeMap(a.row)}}})]}}])})],1)],1)]),e("vxe-modal",{attrs:{title:t.$t("reportForm.seeMap"),className:"modal-padding0",value:t.mapDialog,width:"560px"},on:{hide:function(e){t.mapDialog=!1},close:function(e){t.mapDialog=!1}}},[e("div",{staticStyle:{width:"100%",height:"400px"}},[e("ReportMap",{ref:"mapIns"})],1)])],1)])},r=[],s=(a("99af"),a("14d9"),a("d3b7"),a("159b"),a("4795"),a("6e52")),l=a("e561"),o=a("d462"),n=a("57c9"),c=a("80f4"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"full"},[e("el-carousel",{attrs:{trigger:"click",autoplay:!1}},t._l(t.chartList,(function(t,a){return e("el-carousel-item",{key:a},[e("div",{staticClass:"full",attrs:{id:"fuel-oil"+a}})])})),1),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.chartList.length,expression:"chartList.length == 0"}],staticClass:"fuel-oil-mask"},[e("span",[t._v(t._s(t.$t("tips.noData")))])])],1)},m=[],u=a("5530"),h=(a("d81d"),a("b0c0"),a("43c8")),p=a.n(h),v=a("2f62"),f={name:"OverTempEcharts",props:{chartList:{type:Array,default:function(){return[]}}},computed:Object(u["a"])({},Object(v["b"])(["isZh"])),watch:{chartList:function(t){var e=this;setTimeout((function(){e.updateChartsOption(t)}),100)}},methods:{initChart:function(){},updateChartsOption:function(t){var e=0,a=t.length;while(e<a){var i=p.a.init(document.getElementById("fuel-oil"+e)),r=t[e];i.setOption(this.getChartsOption(r.data,r.alarm,r.warning),!0),e++}},getChartsOption:function(t,e,a){var i="报警",r="预警";return e=e.map((function(t){return{value:t,itemStyle:{color:"rgba(255, 0, 0, 1)"}}})),a=a.map((function(t){return{value:t,itemStyle:{color:"rgba(231, 163, 5, 1)"}}})),{tooltip:{trigger:"axis",formatter:function(t,e){var a=t[0].name+"<br/>";for(var i in t)a+=t[i].seriesName+" : "+t[i].value+"<br/>";return a}},legend:{data:[{name:i,itemStyle:{color:"rgba(255, 0, 0, 1)"}},{name:r,itemStyle:{color:"rgba(231, 163, 5, 1)"}}],y:13,x:"center"},grid:{x:100,y:40,x2:80,y2:30},xAxis:[{type:"category",axisLabel:{show:!0,interval:0,rotate:0,margin:8,textStyle:{fontSize:12}},data:t}],yAxis:[{type:"value",position:"bottom",nameLocation:"end",boundaryGap:[0,.2],axisLabel:{formatter:"{value}"}}],series:[{name:i,type:"bar",itemStyle:{normal:{label:{show:!0,textStyle:{fontSize:"12",fontFamily:"微软雅黑",fontWeight:"bold"}}}},data:e},{name:r,type:"bar",itemStyle:{normal:{label:{show:!0,textStyle:{fontSize:"12",fontFamily:"微软雅黑",fontWeight:"bold"}}}},data:a}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},b=f,g=a("2877"),y=Object(g["a"])(b,d,m,!1,null,null,null),x=y.exports,w=a("5101"),$=a("1c31"),D=a("7cf8"),T=a("c276"),S=a("4c3c"),C=a("a05b"),F={name:"fuelOil",data:function(){return{loading:!1,exportLoading1:!1,activeName:"tabTotal",tableTitle:"",dateRange:[new Date,new Date],totalList:[],detailsList:[],chartList:[],tempindex:0,tempIndexList:[{label:this.$t("reportForm.all"),value:0},{label:this.$t("reportForm.temp1"),value:1},{label:this.$t("reportForm.temp2"),value:2},{label:this.$t("reportForm.temp3"),value:3},{label:this.$t("reportForm.temp4"),value:4}],mapDialog:!1}},watch:{dateRange:function(){this.loading||this.handleQuery()}},mixins:[S["a"],C["a"]],components:{MultiChoiceVehicle:l["a"],SelectDate:o["a"],QuickTimeRange:n["a"],ReportMap:c["a"],OverTempEcharts:x},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},methods:{numberToFixed2:T["qb"],onSelectDevice:function(t){this.deviceids=t},handleClickRow:function(t){t.records.length>0?(this.tableTitle=t.devicename+"-"+t.deviceid,this.detailsList=t.records,this.activeName="details"):this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},seeMap:function(t){var e=this;this.mapDialog=!0;var a={deviceid:t.deviceid,begintime:t.begintimeStr,endtime:t.endtimeStr,interval:0,timezone:w["a"].getOffset()};Object(D["Z"])(a).then((function(t){var a=t.records;a&&setTimeout((function(){e.$refs.mapIns.markersAndLineLayerToMap(a)}),300)}))},handleQuery:function(){var t=this,e=this.deviceids,a=this.dateRange;if(0!=e.length)if(0!=a.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var i=w["a"].format(a[0],"yyyy-MM-dd"),r=w["a"].format(a[1],"yyyy-MM-dd"),l={startday:i,endday:r,offset:w["a"].getOffset(),devices:e,tempindex:this.tempindex};this.loading=!0,this.queryDetailDateRange=l.startday+"  "+l.endday,Object($["lb"])(l).then((function(e){var a=e.addressmap,l=e.records;t.loading=!1;var o=o,n=[];if(l){var c="".concat(i," - ").concat(r);l.forEach((function(t,e){e%4==0&&n.push({data:[],alarm:[],warning:[]});var i=n.length-1,r=t.deviceid,l=s["a"].deviceInfos[r].devicename,o=s["a"].deviceInfos[r].groupname;t.devicename=l,t.groupName=o,t.dateStr=c,t.records.forEach((function(t){t.deviceid=r,t.devicename=l,t.threshold=t.threshold/100,t.tempIndexStr=t.tempindex,t.status=Object(T["eb"])(t.alarmstatus),t.duration=Object(T["Pb"])(t.duration,!0),t.distance=t.distance/1e3,t.begintimeStr=w["a"].longToLocalDateTimeStr(t.begintime),t.endtimeStr=w["a"].longToLocalDateTimeStr(t.endtime),t.address=Object(T["L"])(a,t.elat,t.elon)})),n[i].data.push(l),n[i].alarm.push(t.alarmcount),n[i].warning.push(t.warningcount)})),o=l}t.totalList=o,t.chartList=n}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if("tabTotal"==this.activeName){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.time"),this.$t("reportForm.groupName"),this.$t("monitor.totalAlarm"),this.$t("reportForm.alarm"),this.$t("monitor.earlyWarning")]];if(0==this.totalList.length)return;this.totalList.forEach((function(e,a){var i=[];i.push(a+1),i.push(e.devicename),i.push(e.deviceid),i.push(e.dateStr),i.push(e.groupName),i.push(e.totalovercount),i.push(e.alarmcount),i.push(e.warningcount),t.push(i)}));var e={title:this.$t("reportForm.overTemp"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}else{t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.tempIndex"),this.$t("reportForm.status"),this.$t("reportForm.threshold"),this.$t("common.duration"),this.$t("reportForm.mileage"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.address"),this.$t("monitor.coordinate")]];if(0==this.detailsList.length)return;this.detailsList.forEach((function(e,a){var i=[];i.push(a+1),i.push(e.devicename),i.push(e.deviceid),i.push(e.tempIndexStr),i.push(e.status),i.push(e.threshold),i.push(e.duration),i.push(Object(T["qb"])(e.distance)),i.push(e.begintimeStr),i.push(e.endtimeStr),i.push(e.address),i.push(e.slon+","+e.slat),t.push(i)}));e={title:this.$t("reportForm.overTemp"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}}},mounted:function(){this.deviceids=[],this.queryDetailDateRange=null}},k=F,L=(a("9c81"),Object(g["a"])(k,i,r,!1,null,null,null)),_=L.exports;e["default"]=_},e561:function(t,e,a){"use strict";var i=a("ea22");e["a"]=i["a"]},ea22:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},r=[],s=a("5530"),l=(a("4795"),a("2f62")),o=a("2df7"),n={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(s["a"])({},Object(l["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:o["a"]},methods:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},c=n,d=(a("7031"),a("2877")),m=Object(d["a"])(c,i,r,!1,null,null,null);e["a"]=m.exports}}]);