(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cc1a1bd"],{"0d43":function(e,t,a){},"864e":function(e,t,a){"use strict";a("0d43")},e368:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ram full"},[t("div",{staticClass:"ram-header"},[t("div",{staticClass:"f_left"},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:e.loading},on:{click:e.queryRams}},[e._v(e._s(e.$t("common.query"))+"("+e._s(e.tableList.length)+")")])],1),t("div",{staticClass:"f_right"},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:e.addRam}},[e._v(e._s(e.$t("common.add")))])],1)]),t("div",{staticClass:"ram-table"},[t("vxe-table",{attrs:{"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"",size:"mini",height:"auto",data:e.tableList},on:{"menu-click":e.handleClickTableMenu,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleViewPermission(a.row)}}},[e._v(e._s(e.$t("bgManage.role")))]),t("span",{staticStyle:{padding:"0px 5px"}}),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDelete")},on:{confirm:function(t){return e.handleDelete(a)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v(e._s(e.$t("common.delete")))])],1),t("span",{staticStyle:{padding:"0px 5px"}}),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmResetPassword")},on:{confirm:function(t){return e.handleResetPassword(a)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v(e._s(e.$t("common.resetPassword")))])],1)],1)]}}])}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("monitor.name")}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("monitor.creator")}}),t("vxe-table-column",{attrs:{field:"roleStr",title:e.$t("bgManage.roleType")}}),t("vxe-table-column",{attrs:{field:"creatertimeStr",title:e.$t("alarm.createTime")}})],1)],1),t("AddRam",{on:{addRam:e.queryRams},model:{value:e.addRamDialog,callback:function(t){e.addRamDialog=t},expression:"addRamDialog"}}),t("vxe-modal",{attrs:{title:e.$t("bgManage.selectRole"),className:"modal-padding0",value:e.roleAialog,width:"320px"},on:{hide:function(t){e.roleAialog=!1},close:function(t){e.roleAialog=!1}}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.role")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.roleuuid,callback:function(t){e.roleuuid=t},expression:"roleuuid"}},e._l(e.roles,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:e.editUser}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)},n=[],o=a("5530"),l=(a("14d9"),a("e9c4"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("159b"),a("e285")),i=(a("498a"),function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.$t("bgManage.addRam"),value:e.value,className:"modal-padding0",width:"360px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("monitor.name")))]),t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{clearable:"",placeholder:e.$t("bgManage.pleaseEnterRamName")},model:{value:e.ramname,callback:function(t){e.ramname="string"===typeof t?t.trim():t},expression:"ramname"}})],1)],1)],1),t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("login.password")))]),t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{clearable:"",placeholder:e.$t("login.inputPassword")},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1)],1)],1),t("div",{staticClass:"margin_b10",staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.handleAddUser}},[e._v(e._s(e.$t("common.confirm")))])],1)])}),r=[],c=a("2f62"),d=a("6821"),u=a.n(d),m={props:{value:{type:Boolean,default:!1}},data:function(){return{ramname:"",password:""}},computed:Object(o["a"])({},Object(c["b"])(["userName"])),methods:{handleClose:function(){this.$emit("input",!1)},handleAddUser:function(){var e=this,t=this.ramname,a=this.password,s={creater:this.userName,username:t,password:u()(a),usertype:21,multilogin:1};Object(l["j"])(s).then((function(t){var a=t.status;t.cause;0==a?(e.$emit("addRam"),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999}),e.handleClose()):1==a?e.$XModal.message({message:e.$t("tips.accountNameOccupied"),status:"error",zIndex:9999}):e.$XModal.message({message:e.$t("tips.addFail"),status:"error",zIndex:9999})}))}}},p=m,g=a("2877"),b=Object(g["a"])(p,i,r,!1,null,null,null),f=b.exports,h=a("201d"),v=a("5101"),x=a("a05b"),$={name:"Ram",data:function(){return{loading:!1,addRamDialog:!1,roleAialog:!1,tableList:[],roles:[],roleuuid:"1"}},components:{AddRam:f,LabelWrap:h["a"]},computed:Object(o["a"])({},Object(c["b"])(["isZh","userName"])),mixins:[x["a"]],mounted:function(){var e=this,t=this.isZh;Object(l["Lb"])().then((function(a){var s=a.roles;s&&(s.forEach((function(e){var a="";a=t?e.rolename:e.rolenameen?e.rolenameen:e.rolename,e.label=a+"("+e.creater+")",e.value=e.roleuuid})),e.roles=s),e.queryRams()}))},methods:{handleResetPassword:function(e){var t=this,a=e.row;Object(l["fc"])(a.username).then((function(e){var a=e.status,s=e.newpass;0==a?t.$XModal.message({message:t.$t("tips.resetPassSucc")+s,status:"success",zIndex:9999}):t.$XModal.message({message:t.$t("tips.resetPassFail")+cause,status:"error",zIndex:9999})}))},queryRams:function(){var e=this;this.loading=!0,Object(l["Gb"])(this.userName).then((function(t){var a=t.userlists,s=[];a&&a.forEach((function(t){21==t.usertype&&(t.creatertimeStr=v["a"].longToLocalDateTimeStr(t.createtime),t.roleStr=e.getRoleStr(t.roleuuid),s.push(t))})),e.tableList=s,e.loading=!1})).catch((function(t){e.loading=!1}))},getRoleStr:function(e){var t="";return this.roles.forEach((function(a){a.roleuuid==e&&(t=a.label)})),t},addRam:function(){this.addRamDialog=!0},cellDblclick:function(e){var t=e.row;this.handleViewPermission(t)},handleViewPermission:function(e){this.row=e,this.roleuuid=e.roleuuid,this.roleAialog=!0},editUser:function(){var e=this,t=JSON.parse(JSON.stringify(this.row));t.roleuuid=this.roleuuid,Object(l["X"])(t).then((function(a){var s=a.status;0==s?(e.row.roleuuid=t.roleuuid,e.row.roleStr=e.getRoleStr(t.roleuuid),e.roleAialog=!1,e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.editFail"),status:"error",zIndex:9999})}))},handleDelete:function(e){var t=this,a=e.rowIndex,s=e.row,n=[s.username];Object(l["K"])(n).then((function(e){var s=e.status,n=e.cause,o=e.count,l=e.bonuspoints,i=e.addvaluepoints,r=e.commission;if(0==s)t.$delete(t.tableList,a),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999});else if(1==s)t.$XModal.message({message:t.$t("tips.accountAndDevice",{count:o}),status:"error",zIndex:9999});else if(2==s){var c="";l>0&&(c+=t.$t("bgManage.bonuspoints")+" "+l.toFixed(0)),i>0&&(c.length>0&&(c+=","),c+=t.$t("bgManage.addvaluepoints")+" "+Number(i.toFixed(2))),r>0&&(c.length>0&&(c+=","),c+=t.$t("bgManage.commission")+" "+Number(r.toFixed(2))),t.$XModal.message({message:t.$t("tips.accountAndGoldenBean",{str:c}),status:"error",zIndex:9999})}else t.$XModal.message({message:t.$t("tips.deleteFail")+n,status:"error",zIndex:9999})}))}}},w=$,y=(a("864e"),Object(g["a"])(w,s,n,!1,null,null,null)),_=y.exports;t["default"]=_}}]);