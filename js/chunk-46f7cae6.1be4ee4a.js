(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46f7cae6"],{"3b13":function(e,t,i){},6162:function(e,t,i){"use strict";i("ca218")},7031:function(e,t,i){"use strict";i("3b13")},ca218:function(e,t,i){},e561:function(e,t,i){"use strict";var a=i("ea22");t["a"]=a["a"]},ea22:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice multi-choice-vehicle"},[t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:e.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:e.isQueryInitData,selectDeviceIds:e.multipleDeviceids},on:{onTreeCheck:e.onTreeCheck}})],1)])},n=[],s=i("5530"),o=(i("4795"),i("2f62")),l=i("2df7"),c={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(s["a"])({},Object(o["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:l["a"]},methods:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(e){this.$emit("onSelectDevice",e),this.setMultipleDeviceids(e)},clearText:function(){var e=this;setTimeout((function(){e.$refs.ztreeDevice.clearText()}),300)}})},r=c,h=(i("7031"),i("2877")),d=Object(h["a"])(r,a,n,!1,null,null,null);t["a"]=d.exports},fcce:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{attrs:{dateType:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index"),fixed:"left"}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName"),fixed:"left",width:"140",sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum"),fixed:"left",width:"140",sortable:""}}),e._l(e.dayList,(function(e){return[t("vxe-table-column",{key:e.value,attrs:{field:e.value,title:e.label,width:"60",sortable:""}})]})),t("vxe-table-column",{attrs:{field:"onlineRate",title:e.$t("reportForm.onlineRate"),sortable:"",fixed:"right",width:"110"}})],2)],1)])])},n=[],s=(i("99af"),i("14d9"),i("b680"),i("d3b7"),i("159b"),i("5101")),o=i("e561"),l=i("d462"),c=i("6e52"),r=i("1c31"),h=i("4c3c"),d=i("a05b"),u={name:"vehicleDayOnline",data:function(){return{loading:!1,exportLoading1:!1,month:new Date,totalList:[],dayList:[]}},mixins:[h["a"],d["a"]],watch:{month:function(){this.loading||this.handleQuery()}},components:{MultiChoiceVehicle:o["a"],SelectDate:l["a"]},methods:{onSelectDevice:function(e){this.deviceids=e},handleQuery:function(){var e=this,t=this.deviceids;if(0!=t.length){var i={deviceids:t,offset:s["a"].getOffset(),year:this.month.getFullYear(),month:this.month.getMonth()+1};this.queryDetailDateRange="".concat(i.year,"-").concat(i.month),this.loading=!0,this.dayList=this.getDayList(),Object(r["I"])(i).then((function(t){var i=t.records;e.loading=!1;var a=[];i&&(a=e.getTableData(i)),e.totalList=a}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getTableData:function(e){var t=this,i=[];return e.forEach((function(e){var a=e.deviceid,n=c["a"].deviceInfos[a].devicename,s={deviceid:a,devicename:n},o=0;s.deviceid=e.deviceid,e.daysstatus.forEach((function(e,i){var a=0!=e,n="day".concat(++i);a?(o++,s[n]=t.$t("monitor.online")):s[n]=t.$t("monitor.offline")}));var l=o/e.daysstatus.length*100;s["onlineRate"]=l.toFixed(2)+"%",i.push(s)})),i},getTheMonthDays:function(e){var t=e.getFullYear(),i=e.getMonth()+1;return new Date(new Date(t,i,1)-1).getDate()},getDayList:function(){for(var e=[],t=this.getTheMonthDays(this.month),i=1;i<=t;i++)e.push({label:String(i),value:"day".concat(i)});return e},exportData:function(){if(0!=this.totalList.length){for(var e=[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum")],t=this.getTheMonthDays(this.month),i=1;i<=t;i++)e.push(i);e.push(this.$t("reportForm.onlineRate"));var a=[e];this.totalList.forEach((function(e,i){var n=[];n.push(i+1),n.push(e.devicename),n.push(e.deviceid);for(var s=1;s<=t;s++)n.push(e["day".concat(s)]);n.push(e.onlineRate),a.push(n)}));var n={title:this.$t("reportForm.vehicleDayOnline"),data:a,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(n).exportExcel(this)}}},mounted:function(){this.deviceids=[],this.dayList=this.getDayList(),this.queryDetailDateRange=null}},f=u,v=(i("6162"),i("2877")),m=Object(v["a"])(f,a,n,!1,null,null,null),p=m.exports;t["default"]=p}}]);