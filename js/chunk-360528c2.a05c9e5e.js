(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-360528c2"],{"247b3":function(e,t,a){},70391:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-manage employees full"},[t("div",{staticClass:"batch-manage-left"},[t("div",{staticClass:"batch-manage-inner full"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",[e._v(" "+e._s(e.$t("reportForm.selectUser")))])]),t("div",{staticClass:"batch-manage-inner-content"},[t("SearchUserTree",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)])]),t("div",{staticClass:"batch-manage-right"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("bgManage.employeesList"))}}),t("b",{domProps:{textContent:e._s(e.totalList.length)}}),t("div",{staticClass:"batch-manage-btns"},[t("el-button",{attrs:{type:"primary",size:"mini"},domProps:{textContent:e._s(e.$t("bgManage.newPersonnel"))},on:{click:e.handleAdd}})],1)]),t("div",{staticClass:"batch-manage-inner-content"},[t("vxe-table",{attrs:{"menu-config":e.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"84"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{"padding-top":"7px"}},[t("span",{staticStyle:{padding:"0px 10px"}},[t("img",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{src:e.editIcon,title:e.$t("common.edit")},on:{click:function(t){return e.handleEdit(a)}}})]),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDelete")},on:{confirm:function(t){return e.handleDelete(a)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[t("img",{staticStyle:{width:"16px",cursor:"pointer"},attrs:{src:e.deleteIcon,title:e.$t("common.delete")}})])])],1)]}}])}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{width:"100",field:"creater",title:e.$t("reportForm.creater")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(a){return t("div",{key:a.username},[e._v(e._s(a.username)+"("+e._s(a.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(a.row.creater)}},slot:"reference"},[e._v(e._s(a.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{width:"100",field:"name",title:e.$t("reportForm.name")}}),t("vxe-table-column",{attrs:{width:"100",field:"updatetimeStr",title:e.$t("reportForm.updatetimeStr")}}),t("vxe-table-column",{attrs:{width:"100",field:"cardid",title:e.$t("reportForm.idNumber")}}),t("vxe-table-column",{attrs:{width:"65",field:"sexStr",title:e.$t("device.gender")}}),t("vxe-table-column",{attrs:{width:"120",field:"phone1",title:e.$t("bgManage.phone1")}}),t("vxe-table-column",{attrs:{width:"120",field:"phone2",title:e.$t("bgManage.phone2")}}),t("vxe-table-column",{attrs:{width:"126",field:"sosphone1",title:e.$t("bgManage.sosphone1")}}),t("vxe-table-column",{attrs:{width:"126",field:"sosphone2",title:e.$t("bgManage.sosphone2")}}),t("vxe-table-column",{attrs:{width:"180",field:"certificationcode",title:e.$t("bgManage.certificationcode")}}),t("vxe-table-column",{attrs:{width:"166",field:"agencyname",title:e.$t("bgManage.agencyname")}}),t("vxe-table-column",{attrs:{width:"150",field:"certificationvalidatedate",title:e.$t("bgManage.certificationvalidatedate")}}),t("vxe-table-column",{attrs:{width:"120",field:"address",title:e.$t("reportForm.address")}}),t("vxe-table-column",{attrs:{width:"140",field:"drivercardid",title:e.$t("bgManage.drivercardid")}}),t("vxe-table-column",{attrs:{width:"210",field:"driveragencyname",title:e.$t("bgManage.driveragencyname")}}),t("vxe-table-column",{attrs:{width:"150",field:"drivercardtype",title:e.$t("bgManage.drivercardtype")}}),t("vxe-table-column",{attrs:{width:"140",field:"drivercardstartday",title:e.$t("bgManage.drivercardstartday")}}),t("vxe-table-column",{attrs:{width:"150",field:"drivercardendday",title:e.$t("bgManage.drivercardendday")}})],1)],1)]),t("vxe-modal",{attrs:{title:e.titleDialog,value:e.dialog,className:"modal-padding0",width:"620px"},on:{hide:function(t){e.dialog=!1},close:function(t){e.dialog=!1}}},[t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("DropdownZtreeUser",{ref:"ztreeUser",attrs:{label:e.$t("reportForm.creater")},model:{value:e.creater,callback:function(t){e.creater=t},expression:"creater"}})],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.name")}},[t("el-input",{attrs:{clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.gender")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!0},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[t("el-option",{attrs:{label:e.$t("device.male"),value:1}}),t("el-option",{attrs:{label:e.$t("device.female"),value:0}})],1)],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.phone1")}},[t("el-input",{attrs:{clearable:""},model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.phone1")}},[t("el-input",{attrs:{clearable:""},model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.sosphone1")}},[t("el-input",{attrs:{clearable:""},model:{value:e.sosphone1,callback:function(t){e.sosphone1=t},expression:"sosphone1"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.sosphone2")}},[t("el-input",{attrs:{clearable:""},model:{value:e.sosphone2,callback:function(t){e.sosphone2=t},expression:"sosphone2"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.idNumber")}},[t("el-input",{attrs:{clearable:""},model:{value:e.cardid,callback:function(t){e.cardid=t},expression:"cardid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.certificationcode")}},[t("el-input",{attrs:{clearable:""},model:{value:e.certificationcode,callback:function(t){e.certificationcode=t},expression:"certificationcode"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.agencyname")}},[t("el-input",{attrs:{clearable:""},model:{value:e.agencyname,callback:function(t){e.agencyname=t},expression:"agencyname"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.certificationvalidatedate")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.certificationvalidatedate,callback:function(t){e.certificationvalidatedate=t},expression:"certificationvalidatedate"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardid")}},[t("el-input",{attrs:{clearable:""},model:{value:e.drivercardid,callback:function(t){e.drivercardid=t},expression:"drivercardid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.driveragencyname")}},[t("el-input",{attrs:{clearable:""},model:{value:e.driveragencyname,callback:function(t){e.driveragencyname=t},expression:"driveragencyname"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardtype")}},[t("el-input",{attrs:{clearable:""},model:{value:e.drivercardtype,callback:function(t){e.drivercardtype=t},expression:"drivercardtype"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.address")}},[t("el-input",{attrs:{clearable:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardstartday")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.drivercardstartday,callback:function(t){e.drivercardstartday=t},expression:"drivercardstartday"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardendday")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.drivercardendday,callback:function(t){e.drivercardendday=t},expression:"drivercardendday"}})],1)],1)],1),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleDetermine}},[e._v(e._s(e.$t("common.determine")))])],1)],1)])],1)},i=[],s=a("5530"),n=(a("14d9"),a("d3b7"),a("159b"),a("4795"),a("2f62")),l=a("e285"),c=a("5101"),d=a("201d"),o=a("7ef3"),p=a("28d9"),m=a("5867"),u=a("0c87"),h=a("a05b"),b=a("61fc"),v=a("e173"),g={name:"Employees",data:function(){return{editIcon:b,deleteIcon:v,dialog:!1,searchText:"",totalList:[],username:"",isEdit:!1,creater:"",name:"",sex:1,phone1:"",phone2:"",sosphone1:"",sosphone2:"",cardid:"",certificationcode:"",agencyname:"",certificationvalidatedate:"",drivercardid:"",driveragencyname:"",drivercardtype:"",address:"",drivercardstartday:"",drivercardendday:""}},mixins:[m["a"],u["a"],h["a"]],components:{LabelWrap:d["a"],DropdownZtreeUser:o["a"],SearchUserTree:p["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(n["b"])(["isQueryInitData","userName"])),{},{titleDialog:function(){return this.isEdit?this.$t("bgManage.editEmployee"):this.$t("bgManage.addEmployee")}}),watch:{isQueryInitData:function(e){e&&(this.username=this.userName)},username:function(){var e=this,t={creater:this.username,keyword:""};Object(l["qb"])(t).then((function(t){var a=t.employees,r=[];a&&a.forEach((function(e){e.updatetimeStr=c["a"].format(new Date(e.updatetime),"yyyy-MM-dd"),e.sexStr=1==e.sex?"男":"女",r.push(e)})),e.totalList=r}))}},methods:{handleEdit:function(e){var t=this,a=e.row;this.row=a,this.creater=a.creater,this.name=a.name,this.sex=a.sex,this.phone1=a.phone1,this.phone2=a.phone2,this.sosphone1=a.sosphone1,this.sosphone2=a.sosphone2,this.cardid=a.cardid,this.certificationcode=a.certificationcode,this.agencyname=a.agencyname,this.certificationvalidatedate=a.certificationvalidatedate,this.drivercardid=a.drivercardid,this.driveragencyname=a.driveragencyname,this.drivercardtype=a.drivercardtype,this.address=a.address,this.drivercardstartday=a.drivercardstartday,this.drivercardendday=a.drivercardendday,this.isEdit=!0,this.dialog=!0,setTimeout((function(){t.$refs.ztreeUser.selectedUser(a.creater)}),300)},handleAdd:function(){var e=this,t=c["a"].format(new Date,"yyyy-MM-dd");this.creater=this.username,this.name="",this.sex=1,this.phone1="",this.phone2="",this.sosphone1="",this.sosphone2="",this.cardid="",this.certificationcode="",this.agencyname="",this.certificationvalidatedate=t,this.drivercardid="",this.driveragencyname="",this.drivercardtype="",this.address="",this.drivercardstartday=t,this.drivercardendday=t,this.isEdit=!1,this.dialog=!0,setTimeout((function(){e.$refs.ztreeUser.selectedUser(e.creater)}),300)},handleDelete:function(e){var t=this,a=e.rowIndex,r={employees:[e.row.employeeid]};Object(l["D"])(r).then((function(e){var r=e.status;0==r?(t.$delete(t.totalList,a),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.deleteFail"),status:"error",zIndex:9999})}))},handleDetermine:function(){var e=this,t=this.row,a={creater:this.creater,name:this.name,sex:this.sex,phone1:this.phone1,phone2:this.phone2,sosphone1:this.sosphone1,sosphone2:this.sosphone2,cardid:this.cardid,certificationcode:this.certificationcode,agencyname:this.agencyname,certificationvalidatedate:c["a"].format(new Date(this.certificationvalidatedate),"yyyy-MM-dd"),drivercardid:this.drivercardid,driveragencyname:this.driveragencyname,drivercardtype:this.drivercardtype,address:this.address,drivercardstartday:c["a"].format(new Date(this.drivercardstartday),"yyyy-MM-dd"),drivercardendday:c["a"].format(new Date(this.drivercardendday),"yyyy-MM-dd")};this.isEdit?(a.employeeid=t.employeeid,Object(l["R"])(a).then((function(a){if(0==a.status){for(var r in a.updatetimeStr=c["a"].format(new Date(a.updatetime),"yyyy-MM-dd"),a.sexStr=1==a.sex?"男":"女",a){var i=a[r];t[r]=i}e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999}),e.dialog=!1}else e.$XModal.message({message:e.$t("tips.editFail"),status:"error",zIndex:9999})}))):Object(l["s"])(a).then((function(t){0==t.status?(t.updatetimeStr=c["a"].format(new Date(t.updatetime),"yyyy-MM-dd"),t.sexStr=1==t.sex?"男":"女",e.totalList.push(t),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999}),e.dialog=!1):e.$XModal.message({message:e.$t("tips.addFail"),status:"error",zIndex:9999})}))}},mounted:function(){var e=this;this.isQueryInitData&&this.$nextTick((function(){e.username=e.userName}))}},y=g,f=(a("c78e"),a("2877")),x=Object(f["a"])(y,r,i,!1,null,null,null),w=x.exports;t["default"]=w},c78e:function(e,t,a){"use strict";a("247b3")}}]);