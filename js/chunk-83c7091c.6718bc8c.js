(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83c7091c"],{"3b13":function(e,t,i){},7031:function(e,t,i){"use strict";i("3b13")},"950c":function(e,t,i){"use strict";i("b659")},b042:function(e,t,i){"use strict";i.r(t);i("498a");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left"},[t("LabelWrap",{attrs:{label:e.$t("reportForm.searchContent")}},[t("el-input",{staticStyle:{width:"160px",height:"32px"},attrs:{clearable:"",placeholder:e.$t("reportForm.pleaseEnterSearchContent")},model:{value:e.textVal,callback:function(t){e.textVal="string"===typeof t?t.trim():t},expression:"textVal"}})],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("vxe-table",{attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum"),sortable:""}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("reportForm.creater"),sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(i){return t("div",{key:i.username},[e._v(e._s(i.username)+"("+e._s(i.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(i.row.creater)}},slot:"reference"},[e._v(e._s(i.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"time",title:e.$t("reportForm.time"),sortable:""}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("bgManage.user"),sortable:""}}),t("vxe-table-column",{attrs:{field:"cmdparams",title:e.$t("alarm.content"),sortable:""}}),t("vxe-table-column",{attrs:{field:"result",title:e.$t("reportForm.result"),sortable:""}})],1)],1)])])},a=[],s=i("5530"),o=(i("a15b"),i("d81d"),i("14d9"),i("fb6a"),i("d3b7"),i("159b"),i("2f62")),n=i("e561"),c=i("5101"),l=i("6e52"),u=i("1c31"),d=i("201d"),m=i("4c3c"),h=i("a05b"),p=i("0c87"),f={name:"pushTextReport",data:function(){return{loading:!1,exportLoading1:!1,textVal:"",totalList:[]}},mixins:[m["a"],h["a"],p["a"]],components:{MultiChoiceVehicle:n["a"],LabelWrap:d["a"]},computed:Object(s["a"])({},Object(o["b"])(["isZh"])),methods:{onSelectDevice:function(e){this.deviceids=e},handleQuery:function(){var e=this,t=this.deviceids;if(t.length){var i={devices:t,keyword:this.textVal};Object(u["jb"])(i).then((function(t){var i=t.records,r=[];i&&(i.forEach((function(t){var i=l["a"].deviceInfos[t.deviceid],r=t.cmdparams;if(r){r=r.trim(),r=r.slice(1,r.length),r=r.slice(0,r.length-1);var a=r.split(",");a.length>0&&(a=a.map((function(e){return e=e.slice(1,e.length),e=e.slice(0,e.length-1),e})),t.cmdparams=a.join(","))}t.devicename=i.devicename,t.creater=l["a"].getShowName(i.creater),t.groupname=i.groupname,t.time=c["a"].longToLocalDateTimeStr(t.cmdtime),t.result=e.getSendResult(t.sendstatus)})),r=i),e.totalList=r}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.time"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("bgManage.user"),this.$t("alarm.content"),this.$t("reportForm.result")]];if(0!=this.totalList.length){this.totalList.forEach((function(t,i){var r=[];r.push(i+1),r.push(t.devicename),r.push(t.deviceid),r.push(t.time),r.push(t.creater),r.push(t.groupname),r.push(t.username),r.push(t.cmdparams),r.push(t.result),e.push(r)}));var t={title:this.$t("reportForm.pushTextReport"),data:e};this.exportLoading1=!0,new ExcelCls(t).exportExcel(this)}},getSendResult:function(e){var t=this.$t("common.unknown");switch(e){case 0:t=this.$t("missing.sentOKUnconfirmed");break;case 1:t=this.$t("bgManage.passwordError");break;case 2:t=this.$t("missing.deviceOfflineNotCached");break;case 3:t=this.$t("missing.deviceOfflineHasCached");break;case 4:t=this.$t("missing.pleaseModifyTheDefaultPassword");break;case 5:t=this.$t("missing.error");break;case 6:t=this.$t("missing.confirmed");break;case 7:t=this.$t("missing.over3Retry");break}return t}},mounted:function(){this.deviceids=[]}},v=f,b=(i("950c"),i("2877")),g=Object(b["a"])(v,r,a,!1,null,null,null),x=g.exports;t["default"]=x},b659:function(e,t,i){},e561:function(e,t,i){"use strict";var r=i("ea22");t["a"]=r["a"]},ea22:function(e,t,i){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice multi-choice-vehicle"},[t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:e.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:e.isQueryInitData,selectDeviceIds:e.multipleDeviceids},on:{onTreeCheck:e.onTreeCheck}})],1)])},a=[],s=i("5530"),o=(i("4795"),i("2f62")),n=i("2df7"),c={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(s["a"])({},Object(o["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:n["a"]},methods:Object(s["a"])(Object(s["a"])({},Object(o["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(e){this.$emit("onSelectDevice",e),this.setMultipleDeviceids(e)},clearText:function(){var e=this;setTimeout((function(){e.$refs.ztreeDevice.clearText()}),300)}})},l=c,u=(i("7031"),i("2877")),d=Object(u["a"])(l,r,a,!1,null,null,null);t["a"]=d.exports}}]);