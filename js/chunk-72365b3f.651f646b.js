(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72365b3f"],{"4f78":function(e,t,i){"use strict";i("da4a")},d078:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-manage full"},[t("div",{staticClass:"batch-manage-left"},[t("div",{staticClass:"batch-manage-inner full"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("common.selectDevice"))}}),t("span",{domProps:{textContent:e._s(e.$t("missing.batchManagementDevice"))}})]),t("div",{staticClass:"batch-manage-inner-content"},[t("SearchDeviceZtree",{ref:"ztree",on:{onTreeCheck:e.onTreeCheck}})],1)])]),t("div",{staticClass:"batch-manage-right noselect"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("bgManage.selectedDevice"))}}),t("b",{domProps:{textContent:e._s(e.selectList.length)}}),t("span",{staticClass:"clear_btn",on:{click:e.cancelSelected}},[e._v(e._s(e.$t("common.clearList")))]),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"import-file"}}),t("div",{staticClass:"batch-manage-btns"},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.importDialog=!0}}},[e._v(e._s(e.$t("common.importQuery")))]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.exportDevice")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAlarmDialog}},[e._v(e._s(e.$t("alarm.setAlarmType")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.resetPasswordDialog=!0}}},[e._v(e._s(e.$t("common.resetPass")))]),t("span",{staticStyle:{padding:"0px 5px"}}),e.isMobile?t("MobileDropdown",{on:{command:e.onCommand}}):t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.onCommand}},[t("el-button",{attrs:{type:"primary",size:"mini",plain:""}},[e._v(e._s(e.$t("common.more")))]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"sendCmd"}},[e._v(" "+e._s(e.$t("bgManage.issueCmd"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setHumiture"}},[e._v(" "+e._s(e.$t("device.overTemperatureSetting"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"mileageCoefficient"}},[e._v(" "+e._s(e.$t("bgManage.editDevMileageRatio"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setMileage"}},[e._v(" "+e._s(e.$t("bgManage.setMileage"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"calMileageWay"}},[e._v(" "+e._s(e.$t("bgManage.mileageCalcMethod"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"posiType"}},[e._v(" "+e._s(e.$t("bgManage.setLocationType"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"icon"}},[e._v(" "+e._s(e.$t("bgManage.editDeviceIcon"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setTimezone"}},[e._v(" "+e._s(e.$t("bgManage.setTimeZone"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setVideoParames"}},[e._v(" "+e._s(e.$t("bgManage.setVideoParams"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"autoDisalarm"}},[e._v(" "+e._s(e.$t("bgManage.autoDisalarm"))+" ")]),0==e.userType?t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setDeviceType"}},[e._v(" "+e._s(e.$t("bgManage.setDeviceType"))+" ")]):e._e(),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setParkTimeOut"}},[e._v(" "+e._s(e.$t("bgManage.setParkTimeOut"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setOfflineDelay"}},[e._v(" "+e._s(e.$t("bgManage.setOfflineDelay"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setDeviceLogin"}},[e._v(" "+e._s(e.$t("bgManage.setDeviceLogin"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setDeviceEnable"}},[e._v(" "+e._s(e.$t("bgManage.switchUse"))+" ")]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"batchEdit"}},[e._v(" "+e._s(e.$t("bgManage.batchEdit"))+" ")]),e.isEditTag?t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"setDeviceTag"}},[e._v(" "+e._s(e.$t("bgManage.batchEditDeviceTag"))+" ")]):e._e()],1)],1)],1)]),t("div",{staticClass:"batch-manage-inner-content"},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"tooltip-config":{showAll:!1},"cell-class-name":e.getActonStatusClassName,"row-config":{useKey:function(e){return e.deviceid}},"sort-config":e.sortConfig,"menu-config":e.tableMenu,"edit-config":{trigger:"manual",mode:"row",showIcon:!1,autoClear:!1},border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.tableList},on:{"sort-change":e.onSortChange,"edit-closed":e.editClosed,"checkbox-all":e.selectAllEvent,"menu-click":e.handleClickTableMenu,"checkbox-change":e.selectChangeEvent,"filter-change":e.onFilterChange,"cell-click":e.cellclick,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName"),"title-help":{message:e.$t("tips.clickDevicenameEdit"),icon:"el-icon-edit"},"edit-render":{name:"$input",props:{type:"text"}},width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"edit-devicename",attrs:{title:e.$t("tips.clickToEdit")}},[t("span",{domProps:{textContent:e._s(i.row.devicename)}}),t("i",{staticClass:"el-icon-edit"})])]}}])}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum"),width:"120",sortable:""}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("reportForm.creater"),width:"110",sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(i){return t("div",{key:i.username},[e._v(e._s(i.username)+"("+e._s(i.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(i.row.creater)}},slot:"reference"},[e._v(e._s(i.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"deviceType",title:e.$t("reportForm.deviceType"),filters:e.typeOptions,"filter-multiple":!1,"filter-method":e.filterTypeMethod,width:"110",sortable:""}}),e.isHasDeviceTag?t("vxe-table-column",{attrs:{field:"devicetag",title:e.$t("monitor.deviceTag"),filters:e.tagOptions,"filter-multiple":!1,"filter-method":e.filterTagMethod,width:"110",sortable:""}}):e._e(),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),width:"110",sortable:""}}),t("vxe-table-column",{attrs:{field:"roleStr",title:e.$t("bgManage.useState"),sortable:"",width:"115"}}),t("vxe-table-column",{attrs:{field:"overdueTime",title:e.$t("monitor.deviceExpiration"),width:"110",sortable:""}}),t("vxe-table-column",{attrs:{field:"firstloctimeStr",title:e.$t("bgManage.firstloctimeStr"),width:"125",sortable:""}}),t("vxe-table-column",{attrs:{field:"lastValidpoistiontime",title:e.$t("bgManage.lastOnlineTime"),width:"110",sortable:""}}),t("vxe-table-column",{attrs:{field:"initloctimeStr",title:e.$t("reportForm.initLocTime"),width:"130",sortable:""}}),t("vxe-table-column",{attrs:{field:"createTime",title:e.$t("alarm.createTime"),width:"125",sortable:""}}),t("vxe-table-column",{attrs:{field:"simnum",title:e.$t("common.simnum"),sortable:"",width:"140"}}),t("vxe-table-column",{attrs:{field:"simiccid",title:"ICCID",width:"140",sortable:""}}),t("vxe-table-column",{attrs:{title:e.$t("device.submitStatus"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{style:i.row.status.style,domProps:{textContent:e._s(i.row.status.statusStr)}})]}}])}),t("vxe-table-column",{attrs:{field:"offlinedelay",width:"200",sortable:"",title:e.$t("bgManage.setOfflineDelay")+"("+e.$t("monitor.minute")+")"}})],1)],1)]),t("AlarmFilterDialog",{attrs:{forcealarm:e.forcealarm},on:{onChange:e.onSettingAlarm},model:{value:e.alarmDialog,callback:function(t){e.alarmDialog=t},expression:"alarmDialog"}}),t("ImportDeviceidsDialog",{on:{"on-import":e.onImportDevice},model:{value:e.importDialog,callback:function(t){e.importDialog=t},expression:"importDialog"}}),t("EditIconDialog",{ref:"selectIcon",on:{onSelectIcon:e.onSelectIcon},model:{value:e.iconDialog,callback:function(t){e.iconDialog=t},expression:"iconDialog"}}),t("ResetPasswordDialog",{on:{onResetPassword:e.onResetPassword},model:{value:e.resetPasswordDialog,callback:function(t){e.resetPasswordDialog=t},expression:"resetPasswordDialog"}}),t("MileageCoefficientDialog",{ref:"mileageCoefficient",on:{onMileageCoefficient:e.onMileageCoefficient},model:{value:e.mileageCoefficientDialog,callback:function(t){e.mileageCoefficientDialog=t},expression:"mileageCoefficientDialog"}}),t("SetMileageDialog",{on:{onSetMileage:e.onSetMileage},model:{value:e.mileageDialog,callback:function(t){e.mileageDialog=t},expression:"mileageDialog"}}),t("SetPosiTypeDialog",{ref:"posiType",on:{onSetMileage:e.onSetPosiType},model:{value:e.positypeDialog,callback:function(t){e.positypeDialog=t},expression:"positypeDialog"}}),t("BatchCmdDialog",{attrs:{cmdDialogTitle:e.cmdDialogTitle,cmds:e.cmds},on:{onBatchSendCmd:e.onBatchSendCmd},model:{value:e.cmdDialog,callback:function(t){e.cmdDialog=t},expression:"cmdDialog"}}),t("CalMileageWayDialog",{ref:"calMileageWay",on:{onResetPassword:e.onResetPassword},model:{value:e.calMileageWayDialog,callback:function(t){e.calMileageWayDialog=t},expression:"calMileageWayDialog"}}),t("SetTimezoneDialog",{ref:"timeZoneSet",on:{onResetPassword:e.onResetPassword},model:{value:e.setTimezoneDialog,callback:function(t){e.setTimezoneDialog=t},expression:"setTimezoneDialog"}}),t("VideoParamesDialog",{ref:"videoParames",on:{onResetPassword:e.onVideoSetting},model:{value:e.setVideoParamesDialog,callback:function(t){e.setVideoParamesDialog=t},expression:"setVideoParamesDialog"}}),t("DeviceTypeDialog",{ref:"deviceType",on:{deviceType:e.onSetDeviceType},model:{value:e.setDeviceTypeDialog,callback:function(t){e.setDeviceTypeDialog=t},expression:"setDeviceTypeDialog"}}),t("AutoDisalarmDialog",{ref:"autoDisalarm",attrs:{isDeviceEnable:e.isDeviceEnable},on:{"auto-answer":e.onAutoDisalarm},model:{value:e.autoDisalarmDialog,callback:function(t){e.autoDisalarmDialog=t},expression:"autoDisalarmDialog"}}),t("SetDeviceLoginDialog",{on:{setDeviceLogin:e.onSetDeviceLogin},model:{value:e.setDeviceLoginDialog,callback:function(t){e.setDeviceLoginDialog=t},expression:"setDeviceLoginDialog"}}),t("ParkTimeOutDialog",{ref:"parkTime",on:{onSetMileage:e.onSetMileage},model:{value:e.setParkTimeOutDialog,callback:function(t){e.setParkTimeOutDialog=t},expression:"setParkTimeOutDialog"}}),t("OfflineDelayDialog",{ref:"offlineDelay",on:{onSetMileage:e.onSetMileage},model:{value:e.setOfflineDelayDialog,callback:function(t){e.setOfflineDelayDialog=t},expression:"setOfflineDelayDialog"}}),t("EditDevice",{attrs:{deviceid:e.deviceid,info:e.currentRow},on:{editSucc:e.onEditSucc},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}}),t("TempMarkingDialog",{ref:"humiture",attrs:{isBatch:"",deviceid:e.deviceid},on:{onSetHumiture:e.onSetHumiture},model:{value:e.setHumitureDialog,callback:function(t){e.setHumitureDialog=t},expression:"setHumitureDialog"}}),t("EditDeviceNameDialog",{on:{onRename:e.onRename},model:{value:e.editDeviceNameDialog,callback:function(t){e.editDeviceNameDialog=t},expression:"editDeviceNameDialog"}}),t("BatchEditDialog",{on:{editSucc:e.onEditSucc},model:{value:e.batchEditDialog,callback:function(t){e.batchEditDialog=t},expression:"batchEditDialog"}}),t("NotFindDialog",{ref:"notFind",model:{value:e.notFindDialog,callback:function(t){e.notFindDialog=t},expression:"notFindDialog"}}),t("DeviceTagDialog",{ref:"deviceTag",on:{onSetDeviceTag:e.onMileageCoefficient},model:{value:e.setDeviceTagDialog,callback:function(t){e.setDeviceTagDialog=t},expression:"setDeviceTagDialog"}})],1)},s=[],o=i("ade3"),c=i("5530"),n=(i("99af"),i("4de4"),i("caad"),i("c975"),i("a15b"),i("d81d"),i("14d9"),i("4e82"),i("a434"),i("d3b7"),i("07ac"),i("2532"),i("159b"),i("4795"),i("7e15")),l=i("201d"),r=i("2f62"),d=i("c276"),m=i("6e52"),u=i("e285"),f=i("b562"),v=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"mobile-popper"},[t("div",{staticClass:"mobile-popper-name"},[t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.showPopper=!0}}},[e._v(e._s(e.$t("common.more")))])],1),t("transition",{attrs:{name:"el-fade-in-linear"},on:{click:function(e){e.stopPropagation()}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"mobile-popper-list"},[t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("sendCmd")}}},[e._v(" "+e._s(e.$t("bgManage.issueCmd"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setHumiture")}}},[e._v(" "+e._s(e.$t("device.overTemperatureSetting"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("mileageCoefficient")}}},[e._v(" "+e._s(e.$t("bgManage.editDevMileageRatio"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setMileage")}}},[e._v(" "+e._s(e.$t("bgManage.setMileage"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("calMileageWay")}}},[e._v(" "+e._s(e.$t("bgManage.mileageCalcMethod"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("posiType")}}},[e._v(" "+e._s(e.$t("bgManage.setLocationType"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("icon")}}},[e._v(" "+e._s(e.$t("bgManage.editDeviceIcon"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setTimezone")}}},[e._v(" "+e._s(e.$t("bgManage.setTimeZone"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setVideoParames")}}},[e._v(" "+e._s(e.$t("bgManage.setVideoParams"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("autoDisalarm")}}},[e._v(" "+e._s(e.$t("bgManage.autoDisalarm"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setDeviceType")}}},[e._v(" "+e._s(e.$t("bgManage.setDeviceType"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setParkTimeOut")}}},[e._v(" "+e._s(e.$t("bgManage.setParkTimeOut"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setOfflineDelay")}}},[e._v(" "+e._s(e.$t("bgManage.setOfflineDelay"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setDeviceLogin")}}},[e._v(" "+e._s(e.$t("bgManage.setDeviceLogin"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setDeviceEnable")}}},[e._v(" "+e._s(e.$t("bgManage.switchUse"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("batchEdit")}}},[e._v(" "+e._s(e.$t("bgManage.batchEdit"))+" ")]),t("div",{staticClass:"el-dropdown-menu__item clearfix",on:{click:function(t){return e.handleClick("setDeviceTag")}}},[e._v(" "+e._s(e.$t("bgManage.batchEditDeviceTag"))+" ")])])])],1)},g=[],h=i("9169"),p={name:"UserPopper",data:function(){return{showPopper:!1}},directives:{Clickoutside:h["a"]},mounted:function(){},methods:{handleClick:function(e){this.handleClickOutside(),this.$emit("command",e)},handleClickOutside:function(){this.showPopper=!1}}},D=p,b=(i("fb6b"),i("2877")),y=Object(b["a"])(D,v,g,!1,null,"51af830b",null),T=y.exports,k=i("acb6"),w=i("8913"),M=i("5bca"),x=i("d8db"),$=i("b1f1"),C=i("5d26"),_=i("295c"),S=i("15a4"),O=i("bb85"),L=i("ce77"),E=i("635e"),I=i("3652"),P=i("b041"),j=i("368a"),R=i("94c6"),z=i("8600"),F=i("fb1d"),A=i("d0f5"),N=i("d73c"),V=i("cfbe"),W=i("4d3b"),H=i("f1b2"),X=i("5101"),B=i("a05b"),Z=i("4c3c"),q=i("0c87"),U={name:"BatchManage",data:function(){return{isMobile:Object(d["nb"])(),placement:"bottom-end",totalColumns:["devicename","deviceid","creater","deviceType",,"devicetag","groupname","roleStr","overdueTime","lastValidpoistiontime","initloctimeStr","firstloctimeStr","createTime","simnum","simiccid"],exportLoading1:!1,alarmDialog:!1,importDialog:!1,iconDialog:!1,resetPasswordDialog:!1,mileageCoefficientDialog:!1,mileageDialog:!1,cmdDialog:!1,calMileageWayDialog:!1,setTimezoneDialog:!1,setVideoParamesDialog:!1,setDeviceTypeDialog:!1,setParkTimeOutDialog:!1,setDeviceLoginDialog:!1,positypeDialog:!1,isDeviceEnable:!1,autoDisalarmDialog:!1,setOfflineDelayDialog:!1,setHumitureDialog:!1,editDeviceNameDialog:!1,editDialog:!1,batchEditDialog:!1,setDeviceTagDialog:!1,notFindDialog:!1,deviceid:"",cmdDialogTitle:"",currentRow:{},searchText:"",tableList:[],selectList:[],cmds:[],devicetype:"",target:{},forcealarm:"1111111111111111111111111111111111111111111111111111111111111111111111",typeOptions:[],tagOptions:[]}},mixins:[B["a"],Z["a"],q["a"]],components:{SearchDeviceZtree:n["a"],LabelWrap:l["a"],MobileDropdown:T,AlarmFilterDialog:k["a"],ImportDeviceidsDialog:M["a"],EditIconDialog:x["a"],ResetPasswordDialog:$["a"],MileageCoefficientDialog:C["a"],SetMileageDialog:_["a"],BatchCmdDialog:O["a"],CalMileageWayDialog:I["a"],SetTimezoneDialog:P["a"],VideoParamesDialog:j["a"],DeviceTypeDialog:R["a"],SetPosiTypeDialog:S["a"],AutoDisalarmDialog:z["a"],ParkTimeOutDialog:A["a"],OfflineDelayDialog:N["a"],EditDevice:H["a"],SetDeviceLoginDialog:F["a"],TempMarkingDialog:W["a"],EditDeviceNameDialog:E["a"],BatchEditDialog:L["a"],DeviceTagDialog:V["a"],NotFindDialog:w["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(r["b"])(["isZh","userName","userLevelList","isQueryInitData","alarmTypeList","deviceTypes","permissionList"])),{},{userType:function(){return this.$store.state.user.userType},isEditTag:function(){return this.permissionList.includes("monitor-editdevice-editdevicetag")},isHasDeviceTag:function(){return this.permissionList.includes("monitor-editdevice-viewdevicetag")}}),watch:{tableList:function(e){0==e.length&&(this.cmds=[],this.devicetype="")}},methods:Object(c["a"])(Object(c["a"])({},Object(r["c"])(["setIsReloadRootuser","setReportTagList"])),{},Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({getActonStatusClassName:d["n"],filterTypeMethod:function(e){var t=e.value,i=e.row;return t==i.devicetype},filterTagMethod:function(e){var t=e.value,i=e.row;return t==i.devicetag},onFilterChange:function(){var e=this,t=this.$refs.xTable.getTableData(),i=t.visibleData;setTimeout((function(){e.$refs.xTable.setAllCheckboxRow(!0),e.selectList=i}),30)},cancelSelected:function(){this.tableList=[],this.selectList=[],this.$refs.ztree.checkAllNodes(!1)},onSortChange:function(e){var t=this.$refs.xTable.getTableData(),i=t.visibleData,a=this.$refs.xTable.getCheckboxRecords().map((function(e){return e.deviceid})),s=[];i.forEach((function(e){a.includes(e.deviceid)&&s.push(e)})),this.selectList=s},onEditSucc:function(e){if(e instanceof Array){var t=e;this.onImportDevice(t),this.$refs.ztree.updateNodes(t)}else{var i=e.deviceid,a=this.deviceTypes,s=a[e.devicetype].typename;this.row.deviceType=s,this.row.simnum=e.simnum,this.row.devicename=e.devicename,this.currentRow.deviceType=s,this.currentRow.devicename=e.devicename,this.currentRow.creater=e.creater,this.currentRow.simiccid=e.simiccid,this.currentRow.simnum=e.simnum,this.currentRow.offlinedelay=e.offlinedelay,this.currentRow.parkdrifting=e.parkdrifting,this.currentRow.parktimeout=e.parktimeout,this.currentRow.installtimeStr=X["a"].format(new Date(e.installtime),"yyyy-MM-dd"),m["a"].deviceInfos[i].offlinedelay=e.offlinedelay,this.$refs.ztree.updateNodes([i])}},editClosed:function(e){var t=this,i=e.row,a=i.deviceid,s=i.devicename,o=m["a"].deviceInfos[a];if(o.devicename!=s){""==s&&(s=a);var c={action:"rename",devicenames:[s],deviceids:[a]},n=this.openFullLoading();Object(u["m"])(c).then((function(e){var c=e.status,n=e.success;e.total,e.errorrecords,e.cause;0==c&&1==n&&(""==s&&(i.devicename=a),o.devicename=s,t.$refs.ztree.updateNodes([a]),t.setReportTagList([]),t.setIsReloadRootuser(!0))})).finally((function(e){n.close()}))}},cellclick:function(e){var t=e.column,i=e.row;"devicename"==t.property?(this.isEdit=!0,this.$refs.xTable.setActiveRow(i)):(this.isEdit=!1,this.$refs.xTable.clearActived())},cellDblclick:function(e){var t=e.column,i=e.row;"devicename"!==t.property&&(this.row=i,this.currentRow={creater:i.creater},this.deviceid=i.deviceid,this.editDialog=!0)},onCommand:function(e){var t=this;if("editDeviceName"===e||"batchEdit"===e||0!=this.selectList.length){document.body.scrollLeft=0;var i=this.$refs,a=null,s="";switch("editDeviceName"!==e&&"batchEdit"!==e&&(s=this.selectList[0].deviceid),e){case"sendCmd":a=m["a"].deviceInfos[s],a&&(this.devicetype=a.devicetype,this.cmds=void 0!=m["a"].cmds[this.devicetype]?m["a"].cmds[this.devicetype]:[]),this.cmdDialogTitle=this.$t("monitor.batchCmd"),this.cmdDialog=!0;break;case"mileageCoefficient":Object(u["ob"])(s).then((function(e){var a=e.device;a&&(i.parkTime.parkdrifting=a.parkdrifting,i.parkTime.parktimeout=a.parktimeout,i.calMileageWay.calmileageway=a.calmileageway,i.mileageCoefficient.coefficient=a.distanceratio,t.mileageCoefficientDialog=!0)}));break;case"icon":a=m["a"].deviceInfos[s],this.$refs.selectIcon.onSelectIcon(a.icon),this.iconDialog=!0;break;case"setMileage":this.mileageDialog=!0;break;case"posiType":if(this.positypeDialog=!0,this.selectList.length){var o=this.selectList[0].deviceid;this.$refs.posiType.queryLocType(o)}break;case"calMileageWay":Object(u["ob"])(s).then((function(e){var a=e.device;a&&(i.parkTime.parkdrifting=a.parkdrifting,i.parkTime.parktimeout=a.parktimeout,i.calMileageWay.calmileageway=a.calmileageway,t.calMileageWayDialog=!0)}));break;case"setTimezone":this.setTimezoneDialog=!0;var c=this.$refs.timeZoneSet;Object(u["ob"])(s).then((function(e){var t=e.device;t&&(c.model=t.timezone)}));break;case"setVideoParames":this.setVideoParamesDialog=!0;break;case"autoDisalarm":this.isDeviceEnable=!1,this.autoDisalarmDialog=!0;break;case"setDeviceEnable":a=m["a"].deviceInfos[s],this.$refs.autoDisalarm.autodisalarm=3==a.isfree?0:1,this.isDeviceEnable=!0,this.autoDisalarmDialog=!0;break;case"setDeviceType":a=m["a"].deviceInfos[s],a&&(this.$refs.deviceType.deviceType=a.devicetype),this.setDeviceTypeDialog=!0;break;case"setParkTimeOut":Object(u["ob"])(s).then((function(e){var a=e.device;a&&(i.parkTime.parkdrifting=a.parkdrifting,i.parkTime.parktimeout=a.parktimeout,i.calMileageWay.calmileageway=a.calmileageway,t.setParkTimeOutDialog=!0)}));break;case"setDeviceLogin":this.setDeviceLoginDialog=!0;break;case"batchEdit":this.batchEditDialog=!0;break;case"setHumiture":this.deviceid=s,this.setHumitureDialog=!0;break;case"setDeviceTag":this.setDeviceTagDialog=!0;break;case"setOfflineDelay":this.setOfflineDelayDialog=!0,setTimeout((function(){if(t.tableList.length){var e=t.tableList[0].deviceid,i=m["a"].deviceInfos[e].offlinedelay;t.$refs.offlineDelay.offlinedelay=i}}),300);break;case"editDeviceName":this.editDeviceNameDialog=!0;break}}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){var e=this.tableList;if(e.length>0){var t=this.isHasDeviceTag;e=this.$refs.xTable.getTableData().visibleData;var i=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.deviceType"),this.$t("monitor.deviceTag"),this.$t("reportForm.groupName"),this.$t("bgManage.useState"),this.$t("alarm.expireTime"),this.$t("bgManage.lastOnlineTime"),this.$t("reportForm.initLocTime"),this.$t("bgManage.firstloctimeStr"),this.$t("alarm.createTime"),this.$t("common.simnum"),"ICCID",this.$t("device.submitStatus"),this.$t("bgManage.setOfflineDelay")+"("+this.$t("monitor.minute")+")"]];0==t&&i[0].splice(5,1),e.forEach((function(e,a){var s=[];s.push(a+1),s.push(e.devicename),s.push(e.deviceid),s.push(e.creater),s.push(e.deviceType),t&&s.push(e.devicetag),s.push(e.groupname),s.push(Object(d["u"])(e.isfree).stateStr),s.push(e.overdueTime),s.push(e.lastValidpoistiontime),s.push(e.initloctimeStr),s.push(e.firstloctimeStr),s.push(e.createTime),s.push(e.simnum?e.simnum:""),s.push(e.simiccid?e.simiccid:""),s.push(e.status?e.status.statusStr:""),s.push(e.offlinedelay?e.offlinedelay:""),i.push(s)}));var a={title:this.$t("bgManage.deviceList"),data:i,exportMaxLength:1e5};this.exportLoading1=!0,new ExcelCls(a).exportExcel(this)}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onImportDevice:function(e){var t=this;e=this.tableList.map((function(e){return e.deviceid})).concat(e),e=e.filter((function(t,i){return e.indexOf(t)===i}));var i=[],a=[],s=m["a"].deviceInfos,o=this.deviceTypes,c=Object(d["t"])(s),n=c.simMap,l=c.iccidMap;e.forEach((function(e){var t=Object(d["ob"])(s,n,l,e);if(t){var c=o[t.devicetype].typename;i.push({devicetype:t.devicetype,devicename:t.devicename,deviceid:t.deviceid,groupname:t.groupname,creater:t.creater,deviceType:c,isfree:t.isfree,roleStr:Object(d["u"])(t.isfree).stateStr,status:Object(d["V"])(0),createTime:X["a"].format(new Date(t.createtime),"yyyy-MM-dd"),initloctimeStr:t.initloctime?X["a"].format(new Date(t.initloctime),"yyyy-MM-dd"):"-",firstloctimeStr:0!=t.firstloctime?X["a"].format(new Date(t.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=t.lastactivetime?X["a"].format(new Date(t.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:X["a"].format(new Date(t.expirenotifytime),"yyyy-MM-dd"),simnum:t.simnum?t.simnum:"",simiccid:t.simiccid?t.simiccid:"",offlinedelay:t.offlinedelay,devicetag:t.devicetag})}else a.push(e)})),this.tableList=i,this.setTypeOptions(i),a.length>0&&(this.notFindDialog=!0,this.$refs.notFind.setDeviceids(this.$t("tips.deviceNotFound"),a)),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0),t.selectList=t.tableList}),30)},handleAlarmDialog:function(){var e=this;this.tableList.length>0&&(this.forcealarm=this.getDevicesForcealarm()),0==this.alarmTypeList.length?Object(f["L"])().then((function(t){if(0==t.status){var i=[],a=t.records;a.forEach((function(e,t){e.show=!0,e.index=t+1,i.push(e)})),e.$store.commit("setAlarmTypeList",i),e.alarmDialog=!0}})):this.alarmDialog=!0},getDevicesForcealarm:function(){var e=this.selectList,t="0000000000000000000000000000000000000000000000000000000000000000000000",i=t.split(""),a=m["a"].deviceInfos;return e.forEach((function(e){var t=e.deviceid,s=a[t],o=s.needalarmstr;if(null!=o&&0!=o.length||(o="1111111111111111111111111111111111111111111111111111111111111111111111"),null!=o)for(var c=0;c<o.length;c++){var n=o.charAt(c);"1"==n&&(i[c]="1")}})),t=i.join(""),t},handleResponse:function(e){var t=e.total,i=e.success,a=e.fail,s=e.errorrecords;s=null==s?[]:s;var o=this.selectList;o.forEach((function(e){e.status=Object(d["V"])(1)})),s.forEach((function(e){var t=e.deviceid;e.cause;o.forEach((function(e){e.deviceid===t&&(e.status=Object(d["V"])(2))}))})),t==i?this.$XModal.message({message:this.$t("device.actionSucc")+","+this.$t("bgManage.tower",{count:i}),status:"success",zIndex:9999}):this.$XModal.message({message:"".concat(this.$t("device.actionSucc"),":").concat(i,", ").concat(this.$t("device.actionFail"),":").concat(a),status:"error",zIndex:9999})},openFullLoading:function(){var e=this.$loading({lock:!0,text:this.$t("missing.pleaseWait"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});return e},batchOperateAjax:function(e){var t=this.selectList.map((function(e){var t=e.deviceid;return t}));if(t.length>0){var i=this.openFullLoading();e.deviceids=t,Object(u["m"])(e).then(this.handleResponse).finally((function(e){i.close()})),"setdevicetag"==e.action&&this.selectList.forEach((function(t){t.devicetag=e.devicetag,m["a"].deviceInfos[t.deviceid].devicetag=e.devicetag})),"setofflinedelay"==e.action&&(t.forEach((function(t){m["a"].deviceInfos[t].offlinedelay=e.offlinedelay})),this.selectList.forEach((function(t){t.offlinedelay=e.offlinedelay}))),"changeloctype"==e.action&&t.forEach((function(t){m["a"].deviceInfos[t].needloctype=e.needloctype}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSettingAlarm:function(e){var t=this;this.forcealarm=e;var i={action:"setneedalarm",needalarmstr:e},a=this.selectList.map((function(e){var t=e.deviceid;return t}));if(a.length>0){i.deviceids=a;var s=this.openFullLoading();Object(u["m"])(i).then((function(i){var s=i.total,o=i.success,c=i.fail,n=i.errorrecords,l=t.selectList;if(l.forEach((function(e){e.status=Object(d["V"])(1)})),n.forEach((function(e){var t=e.deviceid;e.cause;l.forEach((function(e){e.deviceid===t&&(e.status=Object(d["V"])(2))}))})),s==o){var r=m["a"].deviceInfos;a.forEach((function(t){var i=r[t];i.needalarmstr=e})),t.$XModal.message({message:t.$t("device.actionSucc"),status:"success",zIndex:9999})}else t.$XModal.message({message:"".concat(t.$t("device.actionSucc"),":").concat(o,", ").concat(t.$t("device.actionFail"),":").concat(c),status:"error",zIndex:9999})})).finally((function(e){s.close()}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSelectIcon:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t})),a=m["a"].deviceInfos;if(i.length>0){var s={action:"seticon",icon:e,deviceids:i},o=this.openFullLoading();Object(u["m"])(s).then((function(s){t.handleResponse(s),i.forEach((function(t){var i=a[t];i&&(i.icon=e)}))})).finally((function(e){o.close()}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSetHumiture:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t}));if(i.length){e.action="savetemphumidetectors",e.deviceids=i,this.$refs.humiture.loading=!0;var a=this.openFullLoading();Object(u["m"])(e).then((function(e){t.$refs.humiture.loading=!1,t.setHumitureDialog=!1,t.handleResponse(e)})).finally((function(e){a.close()}))}},onAutoDisalarm:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t}));if(i.length>0){e.deviceids=i;var a=this.openFullLoading();Object(u["m"])(e).then((function(i){if(t.handleResponse(i),"switchusestatus"==e.action&&i.devices&&i.devices.length){t.setIsReloadRootuser(!0);var a=i.devices,s=t.tableList;a.forEach((function(e){m["a"].deviceInfos[e.deviceid].isfree=e.isfree,s.forEach((function(t){t.deviceid==e.deviceid&&(t.isfree=e.isfree,t.roleStr=Object(d["u"])(e.isfree).stateStr)}))}))}})).finally((function(){a.close()}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSetDeviceLogin:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t}));if(i.length>0){var a={action:"setdevicelogin",loginenable:e,deviceids:i},s=this.openFullLoading();Object(u["m"])(a).then((function(e){t.handleResponse(e)})).finally((function(e){s.close()}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSetDeviceType:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t})),a=m["a"].deviceInfos;if(i.length>0){var s=this.deviceTypes[e]?this.deviceTypes[e].typename:"",o={action:"changedevicetype",devicetype:e,deviceids:i},c=this.openFullLoading();Object(u["m"])(o).then((function(o){t.handleResponse(o);var c=t.selectList;c.forEach((function(e){e.deviceType=s})),i.forEach((function(t){var i=a[t];i&&(i.devicetype=e)}))})).finally((function(){c.close()}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onResetPassword:function(e){this.batchOperateAjax(e)},onVideoSetting:function(e){var t=this,i=this.selectList.map((function(e){var t=e.deviceid;return t}));if(i.length>0){e.deviceids=i;var a=this.openFullLoading();Object(u["m"])(e).then(this.handleResponse).finally((function(){a.close(),t.setVideoParamesDialog=!1,t.$refs.videoParames.loading=!1})),"setofflinedelay"==e.action&&i.forEach((function(t){m["a"].deviceInfos[t].offlinedelay=e.offlinedelay})),"changeloctype"==e.action&&i.forEach((function(t){m["a"].deviceInfos[t].needloctype=e.needloctype}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onMileageCoefficient:function(e){this.batchOperateAjax(e)},onSetMileage:function(e){this.batchOperateAjax(e)}},"onSetMileage",(function(e){this.batchOperateAjax(e)})),"onRename",(function(e){var t=this,i=e.deviceidsuccs,a=e.deviceidfails;this.selectList=i.concat(a);var s=[],o=m["a"].deviceInfos,c=this.deviceTypes;i.forEach((function(e){var t=o[e],i=c[t.devicetype].typename;s.push({devicetype:t.devicetype,devicename:t.devicename,deviceid:t.deviceid,groupname:t.groupname,creater:t.creater,deviceType:i,isfree:t.isfree,roleStr:Object(d["u"])(t.isfree).stateStr,status:Object(d["V"])(1),createTime:X["a"].format(new Date(t.createtime),"yyyy-MM-dd"),initloctimeStr:t.initloctime?X["a"].format(new Date(t.initloctime),"yyyy-MM-dd"):"-",firstloctimeStr:0!=t.firstloctime?X["a"].format(new Date(t.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=t.lastactivetime?X["a"].format(new Date(t.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:X["a"].format(new Date(t.expirenotifytime),"yyyy-MM-dd"),simnum:t.simnum?t.simnum:"",simiccid:t.simiccid?t.simiccid:"",offlinedelay:t.offlinedelay})})),a.forEach((function(e){var t=o[e],i=c[t.devicetype].typename;s.push({devicetype:t.devicetype,devicename:t.devicename,deviceid:t.deviceid,groupname:t.groupname,creater:t.creater,deviceType:i,isfree:t.isfree,roleStr:Object(d["u"])(t.isfree).stateStr,status:Object(d["V"])(1),createTime:X["a"].format(new Date(t.createtime),"yyyy-MM-dd"),initloctimeStr:t.initloctime?X["a"].format(new Date(t.initloctime),"yyyy-MM-dd"):"-",firstloctimeStr:0!=t.firstloctime?X["a"].format(new Date(t.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=t.lastactivetime?X["a"].format(new Date(t.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:X["a"].format(new Date(t.expirenotifytime),"yyyy-MM-dd"),simnum:t.simnum?t.simnum:"",simiccid:t.simiccid?t.simiccid:"",offlinedelay:t.offlinedelay})})),this.tableList=s,this.$refs.ztree.updateNodes(i),this.setReportTagList([]),this.setIsReloadRootuser(!0),0==a.length?this.$XModal.message({message:this.$t("device.actionSucc"),status:"success",zIndex:9999}):this.$XModal.message({message:"".concat(this.$t("device.actionSucc"),":").concat(i.length,", ").concat(this.$t("device.actionFail"),":").concat(a.length),status:"error",zIndex:9999}),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0),t.selectList=s}),30)})),"onSetPosiType",(function(e){this.batchOperateAjax(e)})),"onBatchSendCmd",(function(e){e.devicetype=this.devicetype,this.batchOperateAjax(e)})),"handleClickRow",(function(e){var t=e.rowIndex,i=e.row;this.$delete(this.tableList,t),this.$refs.ztree.cancelCheckNode(i.deviceid)})),"clearTable",(function(){this.tableList=[],this.$refs.ztree.ztreeIns.selectedDeviceIds={},this.$refs.ztree.checkAllNodes(!1)})),"onTreeCheck",(function(e){var t=this,i=[],a=m["a"].deviceInfos,s=this.deviceTypes;e.forEach((function(e){var t=a[e],o=s[t.devicetype].typename;i.push({devicetype:t.devicetype,devicename:t.devicename,deviceid:t.deviceid,groupname:t.groupname,creater:t.creater,deviceType:o,isfree:t.isfree,roleStr:Object(d["u"])(t.isfree).stateStr,status:Object(d["V"])(0),createTime:X["a"].format(new Date(t.createtime),"yyyy-MM-dd"),initloctimeStr:t.initloctime?X["a"].format(new Date(t.initloctime),"yyyy-MM-dd"):"-",firstloctimeStr:0!=t.firstloctime?X["a"].format(new Date(t.firstloctime),"yyyy-MM-dd"):"-",lastValidpoistiontime:0!=t.lastactivetime?X["a"].format(new Date(t.lastactivetime),"yyyy-MM-dd"):"-",overdueTime:X["a"].format(new Date(t.expirenotifytime),"yyyy-MM-dd"),simnum:t.simnum?t.simnum:"",simiccid:t.simiccid?t.simiccid:"",offlinedelay:t.offlinedelay,devicetag:t.devicetag})})),this.tableList=i,this.setTypeOptions(i),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0),t.selectList=t.tableList}),30)})),"selectAllEvent",(function(e){e.checked,e.records;this.onSortChange(null)})),"selectChangeEvent",(function(e){e.checked,e.records;this.onSortChange(null)})),"setTypeOptions",(function(e){var t=this.$i18n.locale,i=[],a={},s=this.deviceTypes,o={},c=e.concat([]);c.sort((function(e,t){return e.devicetype-t.devicetype})),c.forEach((function(e){var c=e.devicetag;c&&(a[c]||(a[c]={label:c,value:c}));var n=e.devicetype;if(void 0==o[n]){o[n]=1;var l=s[n];i.push({label:l.typename+"-"+("zh"==t?l.remark:l.remarken),typename:l.typename,value:l.devicetypeid})}else o[n]++})),i.forEach((function(e){e.label+="("+o[e.value]+")"})),this.typeOptions=i,this.tagOptions=Object.values(a)}))),mounted:function(){this.deviceid=null,this.selectList=[]}},J=U,Q=(i("4f78"),Object(b["a"])(J,a,s,!1,null,null,null)),K=Q.exports;t["default"]=K},d830:function(e,t,i){},da4a:function(e,t,i){},fb6b:function(e,t,i){"use strict";i("d830")}}]);