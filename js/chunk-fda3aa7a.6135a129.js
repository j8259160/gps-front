(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda3aa7a"],{"388ae":function(e,t,a){"use strict";a("5cc9")},4356:function(e,t,a){"use strict";a("7508f")},"5cc9":function(e,t,a){},"7508f":function(e,t,a){},7734:function(e,t,a){},"94dd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"add-device full"},[t("div",{staticClass:"add-device-tab"},[t("div",{class:["batch"==e.tabActive?"tab-ative":""],on:{click:function(t){e.tabActive="batch"}}},[e._v(e._s(e.$t("bgManage.batchAdd")))]),t("div",{class:["import"==e.tabActive?"tab-ative":""],on:{click:function(t){e.tabActive="import"}}},[e._v(e._s(e.$t("bgManage.importDevice")))])]),t("div",{staticClass:"add-device-content"},[t(e.tabActive,{tag:"component"})],1)])},i=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-add"},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{staticClass:"red-star",attrs:{span:1}},[e._v(" * ")]),t("el-col",{attrs:{span:11}},[t("DropdownZtreeUserGroup",{ref:"users",attrs:{label:e.$t("reportForm.creater")},model:{value:e.creater,callback:function(t){e.creater=t},expression:"creater"}})],1),t("el-col",{attrs:{span:11}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.allowLogin")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.loginenable,callback:function(t){e.loginenable=t},expression:"loginenable"}},e._l(e.loginOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{staticClass:"red-star",attrs:{span:1}},[e._v(" * ")]),t("el-col",{attrs:{span:11}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.deviceType")}},[t("el-select",{staticClass:"right_icon_none",staticStyle:{width:"100%"},attrs:{filterable:"","filter-method":e.deviceTypeFilterMethod},on:{change:e.onDeviceTypeChange},model:{value:e.deviceType,callback:function(t){e.deviceType=t},expression:"deviceType"}},e._l(e.deviceTypes,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:11}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.timeZone")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.timezone,callback:function(t){e.timezone=t},expression:"timezone"}},e._l(e.timezoneOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.calmileageway")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.calmileageway,callback:function(t){e.calmileageway=t},expression:"calmileageway"}},e._l(e.calmileageOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:11}})],1),t("TextareaIds",{ref:"textareaIds",attrs:{showTips:"",textPlaceholder:e.$t("tips.textareaidsOneid")},on:{"on-change":e.onChangeIds}}),t("el-row",{staticClass:"margin_b10",staticStyle:{"padding-top":"20px"},attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:11,offset:1}},[t("el-button",{staticStyle:{width:"180px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.submit")))])],1),t("el-col",{attrs:{span:11}},[t("el-button",{staticStyle:{width:"180px"},on:{click:e.handleReset}},[e._v(e._s(e.$t("common.reset")))])],1)],1)],1)},_=[],o=a("5530"),n=(a("14d9"),a("d3b7"),a("159b"),a("4795"),a("2f62")),l=a("0139"),c=a("cf40"),d=a("9c0e1"),u=a("e285"),p=a("c276"),m={name:"Batch",data:function(){var e=this.$t("bgManage.maxSignal");return{loading:!1,creater:{creater:this.userName,groupid:0},deviceids:[],deviceType:1,deviceTypes:[],groupid:0,groupOptions:[{label:this.$t("bgManage.ungrouped"),value:0}],networkType:"1",networkOptions:[{label:"".concat(e,"32(2G)"),value:"1"},{label:"".concat(e,"64(2G)"),value:"2"},{label:"".concat(e,"32(3G)"),value:"3"},{label:"".concat(e,"32(4G)"),value:"4"}],loginenable:1,loginOptions:[{label:this.$t("bgManage.ban"),value:0},{label:this.$t("bgManage.allow"),value:1}],deviceenable:1,calmileageway:0,calmileageOptions:[{label:this.$t("device.automatic"),value:0},{label:this.$t("device.devCalc"),value:1},{label:this.$t("device.platformCalc"),value:2}],timezone:99,timezoneOptions:[{label:this.$t("bgManage.auto"),value:99},{label:"-12",value:-12},{label:"-11",value:-11},{label:"-10",value:-10},{label:"-9",value:-9},{label:"-8",value:-8},{label:"-7",value:-7},{label:"-6",value:-6},{label:"-5",value:-5},{label:"-4.30",value:-4.5},{label:"-4",value:-4},{label:"-3:30",value:-3.5},{label:"-3",value:-3},{label:"-2",value:-2},{label:"-1",value:-1},{label:"0",value:0},{label:"+1",value:1},{label:"+2",value:2},{label:"+3",value:3},{label:"+3:30",value:3.5},{label:"+4",value:4},{label:"+5",value:5},{label:"+5:30",value:5.5},{label:"+5:45",value:5.75},{label:"+6",value:6},{label:"+6:30",value:6.5},{label:"+7",value:7},{label:"+8",value:8},{label:"+9",value:9},{label:"+10",value:10},{label:"+11",value:11},{label:"+12",value:12},{label:"+13",value:13},{label:"+14",value:14}],ids:""}},components:{LabelWrap:l["a"],DropdownZtreeUserGroup:c["a"],TextareaIds:d["a"]},computed:Object(o["a"])({},Object(n["b"])(["isQueryInitData","deviceTypeList","userName"])),methods:Object(o["a"])(Object(o["a"])({},Object(n["c"])(["setIsReloadRootuser","setReportTagList"])),{},{deviceTypeFilterMethod:p["j"],onDeviceTypeChange:function(e){var t=11;this.deviceTypeList.forEach((function(a){a.value==e&&(t=a.defaultidlength)})),this.idLength=t},handleReset:function(){this.deviceType=1,this.groupid=0,this.loginenable=1,this.networkType="1",this.deviceenable=1,this.calmileageway=0,this.timezone=99},handleSubmit:function(){var e=this;this.$refs.textareaIds.immediatelyMatching();var t=this.deviceids,a=this.creater.creater,r=this.creater.groupid;if(""!=a){if(this.deviceids.length){this.loading=!0;var i={deviceids:t,devicetype:this.deviceType,loginenable:this.loginenable,deviceenable:this.deviceenable,timezone:this.timezone,calmileageway:this.calmileageway,groupid:r,creater:a};Object(u["d"])(i).then((function(t){t.status,t.cause,t.successrecords;var a=t.errorrecords,r=t.success,i=t.total;e.loading=!1,r==i?(e.$XModal.message({message:e.$t("tips.addSucc"),status:"success"}),e.setReportTagList([]),e.setIsReloadRootuser(!0)):(e.$refs.textareaIds.submitFailTips(a),e.$XModal.message({message:e.$t("tips.addFail")+":"+a.length,status:"error"}))})).catch((function(t){e.loading=!1}))}}else this.$XModal.message({message:this.$t("tips.selectUser"),status:"error"})},onChangeIds:function(e){this.deviceids=e},queryGroupsByUsername:function(e){var t=this;Object(u["vb"])(e).then((function(e){var a=e.grouplist,r=[{label:t.$t("bgManage.ungrouped"),value:0}];a&&a.forEach((function(e){r.push({label:e.groupname,value:e.groupid})})),t.groupOptions=r,t.groupid=0}))}}),watch:{isQueryInitData:function(){var e=this;this.creater={creater:this.userName,groupid:0},this.deviceTypes=this.deviceTypeList,setTimeout((function(){e.$refs.users&&e.$refs.users.emitValue(e.creater)}),1e3)}},mounted:function(){this.isQueryInitData&&(this.creater={creater:this.userName,groupid:0},this.deviceTypes=this.deviceTypeList,this.$refs.users&&this.$refs.users.emitValue(this.creater))}},h=m,b=(a("4356"),a("2877")),v=Object(b["a"])(h,s,_,!1,null,null,null),f=v.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"import-add"},[t("div",{staticClass:"import-add-step"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"import-add-step-item step-item-first"},[t("el-row",{staticClass:"import-add-step-item-inner"},[t("el-col",{staticStyle:{"text-align":"center","padding-top":"15px"},attrs:{span:4}},[t("b",[e._v("Step1")])]),t("el-col",{staticStyle:{"padding-top":"15px"},attrs:{span:14}},[t("span",{staticStyle:{"font-size":"12px"},domProps:{textContent:e._s(e.$t("missing.downloadImportTemplate"))}})]),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.dwonloadTemp}},[e._v(e._s(e.$t("insure.templateDownload")))])],1)],1)],1)]),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"import-add-step-item import-add-step-middle"},[t("div",[t("div",{staticClass:"import-add-step-middle-position"},[t("div",{staticClass:"import-add-step-middle-after"}),t("div",{staticClass:"import-add-step-middle-before"})]),t("el-row",{staticClass:"import-add-step-item-inner"},[t("el-col",{staticStyle:{"padding-top":"15px"},attrs:{span:2,offset:2}},[t("b",[e._v("Step2")])]),t("el-col",{staticStyle:{"padding-top":"15px"},attrs:{span:12,offset:2}},[t("span",{staticStyle:{"font-size":"12px"},domProps:{textContent:e._s(e.$t("missing.importingDeviceFiles"))}})]),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.importDevices}},[e._v(e._s(e.$t("insure.importFile")))])],1)],1)],1)])]),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"import-add-step-item step-item-last"},[t("el-row",{staticClass:"import-add-step-item-inner"},[t("el-col",{staticStyle:{"text-align":"center","padding-top":"15px"},attrs:{span:2,offset:2}},[t("b",[e._v("Step3")])]),t("el-col",{staticStyle:{"padding-top":"15px"},attrs:{span:12,offset:2}},[t("span",{staticStyle:{"font-size":"12px"},domProps:{textContent:e._s(e.$t("missing.submitDeviceInformation"))}})]),t("el-col",{attrs:{span:6}},[t("el-button",{staticStyle:{width:"74px"},attrs:{type:"primary",size:"mini"},on:{click:e.handleShowDialog}},[e._v(e._s(e.$t("common.submit")))])],1)],1)],1)])],1),t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"import-add-file"}})],1),t("div",{staticClass:"import-add-tips"},[t("b",{domProps:{textContent:e._s(e.$t("missing.importUpTo500"))}}),e._v(" / "),t("b",[e._v(e._s(e.$t("missing.currentNumberDevices"))+" "+e._s(e.importCount))]),t("b",{staticStyle:{color:"#ff0000","font-size":"14px"}},[e._v("("+e._s(e.$t("tips.rightClickTableHeaderImport"))+")")])]),t("div",{staticClass:"import-add-table"},[t("vxe-table",{ref:"xTable",attrs:{"keep-source":"","tooltip-config":{showAll:!1},"cell-class-name":e.headerCellClassName,"edit-config":{trigger:"click",mode:"cell",showStatus:!0,icon:"fa fa-pencil"},"menu-config":{className:"tableMenu",header:{options:e.headerMenus},body:{options:e.bodyOptions}},border:"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.tableData},on:{"edit-closed":e.editClosedEvent,"menu-click":e.headerClickMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"deviceid","header-class-name":"import-header-class-name",sortable:"",title:e.$t("alarm.devNum"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"devicename",sortable:"",title:e.$t("alarm.devName"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"plateno",title:e.$t("bgManage.plateno"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"simnum",title:e.$t("reportForm.sim"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"expirenotifytimeStr",title:e.$t("alarm.expireTime"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"vin",title:e.$t("monitor.vinno"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"remark",title:e.$t("reportForm.remarks"),"edit-render":{name:"$input",props:{type:"text"}}}}),t("vxe-table-column",{attrs:{field:"statusStr",title:e.$t("device.submitStatus")}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.handleClickRow(a)}}})]}}])})],1)],1),t("vxe-modal",{attrs:{title:e.$t("bgManage.addDevice"),className:"vxe-modal-visible modal-padding0",value:e.dialog,width:"360px"},on:{hide:function(t){e.dialog=!1},close:function(t){e.dialog=!1}}},[t("div",{staticClass:"margin_b10"},[t("DropdownZtreeUserGroup",{ref:"users",attrs:{disableShare:"",label:e.$t("reportForm.creater")},model:{value:e.creater,callback:function(t){e.creater=t},expression:"creater"}})],1),t("div",{staticClass:"margin_b10"},[t("LabelWrap",{attrs:{label:e.$t("reportForm.deviceType")}},[t("el-select",{staticClass:"right_icon_none",staticStyle:{width:"100%"},attrs:{filterable:"","filter-method":e.deviceTypeFilterMethod},model:{value:e.deviceType,callback:function(t){e.deviceType=t},expression:"deviceType"}},e._l(e.deviceTypes,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"margin_b10",staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{width:"240px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.submit")))])],1)])],1)},E=[],y=a("aa3f"),D=y["a"],M=(a("f04c"),Object(b["a"])(D,g,E,!1,null,null,null)),C=M.exports,w={name:"addDevice",data:function(){return{tabActive:"batch"}},components:{Batch:f,Import:C},computed:{},methods:{},mounted:function(){}},x=w,O=(a("f568"),Object(b["a"])(x,r,i,!1,null,null,null)),T=O.exports;t["default"]=T},"9d54":function(e,t,a){},aa3f:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c7eb"),C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ade3"),C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1da1"),C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5530"),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a630"),core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_from_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c975"),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("baa5"),core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_last_index_of_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("3ca3"),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("498a"),core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("4795"),core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_18__),vuex__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("2f62"),_api_manager__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("e285"),_components_label_wrap__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("0139"),_components_dropdown_ztree_user__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("c7bc"),_views_monitor_page_components_device_search_DropdownZtreeUserGroup__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("cf40"),_libs_util__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("c276"),_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("5101");__webpack_exports__["a"]={name:"Import",data:function(){return{loading:!1,dialog:!1,excelX:["A","B","C","D","E","F","G","H"],tableData:[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],deviceTypes:[],deviceType:1,creater:{creater:this.userName,groupid:0},groupid:0,groupOptions:[{label:this.$t("bgManage.ungrouped"),value:0}],headerMenus:[]}},components:{DropdownZtreeUser:_components_dropdown_ztree_user__WEBPACK_IMPORTED_MODULE_22__["a"],LabelWrap:_components_label_wrap__WEBPACK_IMPORTED_MODULE_21__["a"],DropdownZtreeUserGroup:_views_monitor_page_components_device_search_DropdownZtreeUserGroup__WEBPACK_IMPORTED_MODULE_23__["a"]},computed:Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_19__["b"])(["isZh","deviceTypeList","userName"])),{},{bodyOptions:function(){return this.tableData.length>0?[[{code:"copyTunggal",name:this.$t("common.copyTunggal")},{code:"copyRow",name:this.$t("common.copyRow")},{code:"copyColumn",name:this.$t("common.copyColumn")},{code:"import",name:this.$t("missing.pasteAColumn"),disabled:!1}]]:[[{code:"import",name:this.$t("missing.pasteAColumn"),disabled:!1}]]},importCount:function(){var e=0;return this.tableData.forEach((function(t){t.deviceid&&e++})),e},isHttps:function(){return this.$store.state.isHttps}}),methods:Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])(Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},Object(vuex__WEBPACK_IMPORTED_MODULE_19__["c"])(["setIsReloadRootuser","setReportTagList"])),{},{deviceTypeFilterMethod:_libs_util__WEBPACK_IMPORTED_MODULE_24__["j"],getClickedColumn:function getClickedColumn(event){for(var layerX=event.layerX,table=this.$refs.xTable,property=null,columns=table.getColumns(),columnEls=$("tr.vxe-header--row").children(),widthArr=Array.from(columnEls.map((function(e,t){return parseInt(getComputedStyle(t).width)}))),columnIndex=null,i=0;i<widthArr.length-1;i++){var cLeft=eval(widthArr.slice(0,i+1).join("+")),nLeft=eval(widthArr.slice(0,i+2).join("+"));if(cLeft>=layerX&&layerX<=nLeft){columnIndex=i;break}}return 0!=columnIndex&&null!=columnIndex&&(property=columns[columnIndex].property),property},clipboardImport:function(e){var t=this;return Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__["a"])(Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().mark((function a(){var r,i,s,_,o;return Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_0__["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isHttps){a.next=16;break}if("undefined"!=typeof navigator.clipboard){a.next=4;break}return t.$XModal.message({message:t.$t("missing.copyClipboardNotSupported"),status:"error",zIndex:9999}),a.abrupt("return");case 4:return a.prev=4,a.next=7,navigator.clipboard.readText();case 7:r=a.sent.trim(),r&&(i=r.replace(/\r\n/g,"\n"),i=i.replace(/\r/g,"\n"),s=t.tableData,_=[],o=i.split("\n"),s.length<o.length?o.forEach((function(t,a){var r=s[a];r?(r[e]=t,delete r._XID,_.push(Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},r))):(r=Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_1__["a"])({},e,t),_.push(r))})):s.forEach((function(t,a){var r=o[a],i=Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},t);void 0!=r&&(i[e]=r),delete i._XID,_.push(i)})),t.tableData=_),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](4),t.$XModal.message({message:a.t0.toString(),status:"error",zIndex:9999});case 14:a.next=17;break;case 16:t.$confirm(t.isZh?"请切换到https环境":"Please switch to HTTPS environment",{title:t.$t("login.dialogTips"),dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,showConfirmButton:!0,showCancelButton:!0,cancelButtonClass:"add-oil-record-btn",center:!0,customClass:"MessageBox_confirm_oilrecord"}).then((function(e){if("confirm"==e){var t=location.href,a=t.replace("http:","https:");window.location.href=a}}),(function(e){}));case 17:case"end":return a.stop()}}),a,null,[[4,11]])})))()},headerClickMenu:function(e){var t=e.type,a=e.menu,r=e.column,i=e.row;if("header"==t){if("import"!=a.code)return;r.property&&this.clipboardImport(r.property)}else if("import"==a.code){var s=null;s=r?r.property:this.getClickedColumn(e.$event),s&&this.clipboardImport(s)}else{if(!r)return;var _=r.property;if(void 0==_)return;var o=a.code;if("copyColumn"==o){var n="",l=this.$refs.xTable.getTableData().visibleData;l.forEach((function(e,t){var a=void 0!==e[_]?String(e[_]):"";n+=0==t?a:"\n"+a})),window.onClikCopyDevice(n)}else if("copyRow"==o){var c=this.totalColumns;c||(c=this.$refs.xTable.getColumns().map((function(e){return e.property})));var d="";c.forEach((function(e,t){var a=void 0!=i[e]?String(i[e]):"";a&&(d+=0==t?a:" "+a)})),window.onClikCopyDevice(d)}else if("copyTunggal"==o){var u=void 0!==i[_]?String(i[_]):"";window.onClikCopyDevice(u)}}},handleShowDialog:function(){var e=this;this.dialog=!0,this.deviceTypes=this.deviceTypeList,this.creater={creater:this.userName,groupid:0},setTimeout((function(){e.$refs.users&&e.$refs.users.emitValue(e.creater)}),30)},queryGroupsByUsername:function(e){var t=this;Object(_api_manager__WEBPACK_IMPORTED_MODULE_20__["vb"])(e).then((function(e){var a=e.grouplist,r=[{label:t.$t("bgManage.ungrouped"),value:0}];a&&a.forEach((function(e){r.push({label:e.groupname,value:e.groupid})})),t.groupOptions=r,t.groupid=0}))},handleSubmit:function(){var e=this,t=this.tableData;if(0!=t.length){var a=[],r=this.deviceType;t.forEach((function(e){if(e.deviceid){e.devicetype=r;var t=Object(C_MyCode_gwebmgrv3_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__["a"])({},e);(void 0==t.expirenotifytimeStr||"Invalid Date"==new Date(t.expirenotifytimeStr).toString())&&(t.expirenotifytimeStr=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(new Date(Date.now()+31536e6),"yyyy-MM-dd")),t.expirenotifytime=new Date(t.expirenotifytimeStr).getTime(),e.expirenotifytime=t.expirenotifytime,delete t._XID,delete t.statusStr,a.push(t)}})),a.length>500&&a.length;var i=a.length,s=this.creater.creater,_=this.creater.groupid,o={records:a,tocreater:s,groupid:_};this.loading=!0,Object(_api_manager__WEBPACK_IMPORTED_MODULE_20__["bb"])(o).then((function(a){var r=a.total,s=a.success,_=(a.fail,a.errorrecords),o=a.successrecords,n=a.status,l=a.cause;e.loading=!1,0==n?(s>0&&(e.setReportTagList([]),e.setIsReloadRootuser(!0)),r==s&&s==i?(e.$XModal.message({message:e.$t("bgManage.deviceFileImport",{count:s})+e.$t("bgManage.deviceSubmitSucc",{count:r}),status:"success",zIndex:9999}),o.forEach((function(a){for(var r=a.deviceid,i=a.device,s=0;s<t.length;s++){var _=t[s];if(_.deviceid==r){_.status=1,_.statusStr=e.getStatusStr(1,""),_.expirenotifytimeStr=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(new Date(i.expirenotifytime),"yyyy-MM-dd");break}}}))):(e.$XModal.message({message:e.$t("insure.total")+":"+i+","+e.$t("insure.succ")+":"+s+","+e.$t("insure.fail")+":"+(i-s),status:"error",zIndex:9999}),_.forEach((function(a){t.forEach((function(t){a.deviceid==t.deviceid&&(t.status=0,t.statusStr=e.getStatusStr(0,a),t.cause=a.cause)}))})),o.forEach((function(a){var r=a.device;t.forEach((function(t){a.deviceid==t.deviceid&&(t.status=1,t.statusStr=e.getStatusStr(1,{}),t.expirenotifytimeStr=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(new Date(r.expirenotifytime),"yyyy-MM-dd"))}))})),t.forEach((function(e){e.deviceid||(e.expirenotifytimeStr="",e.status=0,e.statusStr="")})))):e.$XModal.message({message:l,status:"error",zIndex:9999}),e.dialog=!1})).catch((function(t){console.log(t),e.loading=!1}))}},handleClickRow:function(e){var t=e.$rowIndex;this.$delete(this.tableData,t)},dwonloadTemp:function(){var e=document.createElement("a");e.href=this.isZh?"./xlsxtemplates/deviceinfos.xlsx":"./xlsxtemplates/deviceinfos_en.xlsx",e.download="deviceinfos.xlsx",e.click()},importDevices:function(){var e=this.fileEl;e.value="",e.click()},init:function(){var e=this;this.headerMenus=[[{code:"import",name:this.$t("missing.pasteAColumn"),disabled:!1}]],this.creater={creater:this.userName,groupid:0};var t=document.getElementById("import-add-file");t.onchange=function(t){var a=t.srcElement.value.lastIndexOf("."),r=t.srcElement.value.slice(a);if(-1!=r.indexOf("xlsx")){var i=t.target.files[0];e.readWorkbookFromLocalFile(i,(function(t){var a="批量导入设备",r=t.getWorksheet(a);void 0==r&&(a="batchimport",r=t.getWorksheet(a)),e.parserExcelData(r),e.isSpin=!1}))}else e.$XModal.message({message:e.$t("insure.importExcelTips"),status:"error",zIndex:9999})},this.fileEl=t},readWorkbookFromLocalFile:function(e,t){var a=new FileReader;a.onload=function(e){var a=e.target.result,r=new ExcelJS.Workbook;r.xlsx.load(a).then((function(){t&&t(r)}))},a.readAsBinaryString(e)},parserExcelData:function(e){var t=this;try{var a=[];e.eachRow({includeEmpty:!0},(function(e,r){if(r>1){var i={};e.eachCell({includeEmpty:!0},(function(e,a){switch(a){case 2:i.deviceid=e.text;break;case 3:i.devicename=e.text;break;case 4:i.plateno=e.text;break;case 5:i.simnum=e.text;break;case 6:var r="-",s=0;if("string"==typeof e.value&&(e.value=e.value.trim()),e.value instanceof Date)r=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(e.value,"yyyy-MM-dd"),s=e.value.getTime();else if(e.value&&"string"==typeof e.value){var _=new Date(e.value);r=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(_,"yyyy-MM-dd"),s=_.getTime()}else{var o=new Date;o.setFullYear(o.getFullYear()+1),r=_libs_dateformat__WEBPACK_IMPORTED_MODULE_25__["a"].format(o,"yyyy-MM-dd"),s=o.getTime()}i.expirenotifytimeStr=r,i.expirenotifytime=s;break;case 7:i.vin=e.text;break;case 8:i.remark=e.text;break}i.status=-1,i.statusStr=t.getStatusStr(-1,{})})),a.push(i)}})),this.tableData=a}catch(r){console.log(r),this.$XModal.message({message:this.$t("insure.importExcelFailTips"),status:"error",zIndex:9999})}},headerCellClassName:function(e){var t=e.column,a=e.row;if("statusStr"===t.field){var r=a.status,i="";switch(r){case-1:i="black-font";case 0:i="red-font";break;case 1:i="free-font";break;case 2:i="red-font";break}return i}return null},getStatusStr:function(e,t){var a="",r=t.creater;switch(e){case-1:a=this.$t("insure.notSubmitted"),"#606266";break;case 0:"red",a=null!=r&&r.length>0?this.$t("tips.occupiedUser")+r:this.$t("tips.occupiedOtherUser");break;case 1:"green",a=this.$t("insure.submitSucc");break;case 2:"red",a=this.$t("missing.deviceIdNull");break}return a},editClosedEvent:function(e){var t=e.row,a=e.column,r=this.$refs.xTable,i=a.property;t[i];r.reloadRow(t,null,i);var s=[];this.tableData.forEach((function(e){s.push(e)})),this.tableData=s}}),mounted:function(){var e=this;this.$nextTick((function(){e.init()}))}}},cf40:function(e,t,a){"use strict";a("b0c0");var r=function(){var e=this,t=e._self._c;return t("LabelWrap",{attrs:{label:e.label}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"full",staticStyle:{position:"relative"}},[t("el-input",{attrs:{clearable:"",placeholder:e.placeholder},on:{input:e.onChange},nativeOn:{click:function(t){e.show=!0}},model:{value:e.textVal,callback:function(t){e.textVal=t},expression:"textVal"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"el-popover el-popper",staticStyle:{width:"240px",position:"absolute",top:"32px","z-index":"3029"},attrs:{"x-placement":"bottom"}},[t("div",{staticClass:"drop-down-vxetree noselect",staticStyle:{height:"280px",width:"100%"}},[t("vxe-table",{ref:"xTable",staticClass:"mytree-scrollbar",attrs:{height:"100%",size:"mini","show-overflow":"","highlight-hover-row":"","highlight-current-row":"","row-config":e.rowConfig,"auto-resize":!0,border:"none","checkbox-config":{checkStrictly:!1,showHeader:!0},"tree-config":e.treeConfig,"show-header":!1,"scroll-y":{enabled:!0,gt:0},data:e.treeData},on:{"cell-click":e.onClickRow}},[t("vxe-table-column",{attrs:{width:"100%",field:"id"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.row;return[t("div",{staticClass:"fence-checkbox-cell",style:{paddingLeft:e.getIndent(r)+"px"},on:{contextmenu:function(e){e.preventDefault()}}},[r.children.length?t("span",{staticStyle:{position:"relative",top:"1.5px","padding-right":"3px"},on:{dblclick:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.onExpandNode(r)}}},[(0==r.children.length?r.expand:e.$refs.xTable.isTreeExpandByRow(r))?t("img",{attrs:{src:e.bihe,width:"12",height:"12"}}):t("img",{attrs:{src:e.zhankai,width:"12",height:"12"}})]):t("span",{staticStyle:{position:"relative",top:"1.5px","padding-right":"3px"}},[t("img",{staticStyle:{visibility:"hidden"},attrs:{src:e.zhankai,width:"12",height:"12"}})]),t("span",{on:{click:function(e){e.stopPropagation()},dblclick:function(e){e.stopPropagation()}}},[t("el-radio",{staticStyle:{margin:"0px 3px 0px 2px"},attrs:{label:r.id},on:{change:function(t){return e.handleCheckboxChange(r)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}})],1),"user"==r.nodeType?t("img",{staticStyle:{width:"16px",height:"16px",border:"0px",position:"relative",top:"3.5px"},attrs:{src:r.icon}}):e._e(),"group"==r.nodeType?t("img",{staticStyle:{width:"15px",height:"14px",border:"0px",position:"relative",top:"2.5px"},attrs:{src:r.icon}}):e._e(),t("span",{staticStyle:{"padding-left":"3px"},domProps:{textContent:e._s(r.name)}})])]}}])})],1)],1),t("div",{staticClass:"popper__arrow",staticStyle:{left:"112.5px"},attrs:{"x-arrow":""}})])],1)])},i=[],s=a("5530"),_=(a("99af"),a("4de4"),a("c975"),a("14d9"),a("d3b7"),a("498a"),a("159b"),a("4795"),a("0139")),o=a("6e52"),n=a("c276"),l=a("6406"),c=a("2ef0"),d=a("9169"),u=a("2f62"),p=a("0d33"),m=a("7fa8"),h=a("0d27"),b=a("8130"),v={name:"DropdownZtreeUserGroup",props:{value:{type:Object,default:function(){return{}}},disableShare:{type:Boolean,default:!1},label:{type:String,default:""}},data:function(){return{show:!1,zhankai:h,bihe:b,textVal:"",placeholder:"",radio:"",rowConfig:{height:24,useKey:"id",keyField:"id"},treeConfig:{transform:!0,showLine:!0,rowField:"id",parentField:"parentId",expandRowKeys:[]},treeData:[]}},components:{LabelWrap:_["a"]},computed:Object(s["a"])({},Object(u["b"])(["isQueryInitData","userName"])),directives:{Clickoutside:d["a"]},methods:{getIndent:function(e){var t=18;return e.level*t},handleClickOutside:function(){this.show=!1},onChange:function(e){this.searchUser(this,e.trim())},searchUser:Object(c["debounce"])((function(e,t){0==e.show&&(e.show=!0);var a=e.$refs.xTable;if(0==t.length)e.treeData=Object(l["h"])(e.treeNodes),a.setTreeExpand(e.treeNodes[0],!0);else{e.expandIds={};var r=e.variableDeepSearch(e.treeNodes,t.trim());e.treeData=Object(l["h"])(r),a.reloadData(e.treeData);var i=e.treeData.filter((function(t){return e.expandIds[t.id]}));setTimeout((function(){a.setTreeExpand(i,!0)}),100)}}),300),handleCheckboxChange:function(e){var t=this,a=this.$refs.xTable;this.treeData.forEach((function(a){a.id==e.id?(t.radio=e.id,a.checked=!0):a.checked=!1})),a.setCurrentRow(e),this.onTreeCheck(e)},getNodeByid:function(e){for(var t=null,a=this.treeData,r=0;r<a.length;r++){var i=a[r];if(i.id==e){t=i;break}}return t},onClickRow:function(e){var t=e.row;this.handleCheckboxChange(t)},onExpandNode:function(e){var t=this.$refs.xTable,a=null;0==e.children.length?(a=!e.expand,e.expand=a):a=!t.isTreeExpandByRow(e),t.setTreeExpand(e,a)},onTreeCheck:function(e){var t=e.name;if(this.textVal=t,this.placeholder=t,e.nodeType==o["a"].NodeType_User)this.$emit("input",{creater:e.username,groupid:0,name:t});else if(e.nodeType==o["a"].NodeType_Group){var a=e.parentId,r=this.getNodeByid(a);r&&this.$emit("input",{creater:r.username,groupid:e.groupid,name:t})}this.show=!1},emitValue:function(e){this.textVal=e.name?e.name:e.creater,this.placeholder=e.creater,this.radio=e.creater,this.$emit("input",e)},getUserGroupNode:function(e){for(var t=e.creater,a=e.groupid,r=e.nodeType,i=this.treeData,s=null,_=0;_<i.length;_++){var o=i[_];if("user"==o.nodeType&&t==o.username&&0==a){s=o;break}if(r==o.nodeType&&o.username==t&&o.groupid==a){s=o;break}}return s},ininZtree:function(){var e=this.castUsersTreeToDevicesTree(o["a"].rootuser),t=Object(l["h"])(e);this.treeData=t,this.$refs.xTable.setTreeExpand(e[0],!0),this.treeNodes=this.castUsersTreeToDevicesTree(o["a"].rootuser)},variableDeepSearch:function(e,t){t=t.toLowerCase();for(var a=[],r=this,i=0;i<e.length;i++){var s=null,_=e[i];if(null!=_){var n=!1;if(-1==_.name.toLowerCase().indexOf(t)&&-1==(_.username&&_.username.toLowerCase().indexOf(t))||(s=Object(c["cloneDeep"])(_),n=!0),0==n){var l=o["a"].pinyinMap[_.name];(l&&-1!=l.l.toLowerCase().indexOf(t)||l&&-1!=l.p.toLowerCase().indexOf(t))&&(s=Object(c["cloneDeep"])(_),n=!0)}if(0==n&&_.children&&_.children.length>0){var d=r.variableDeepSearch(_.children,t);d&&d.length>0&&(s=Object(c["cloneDeep"])(_),s.children=d,n=!0)}1==n&&(r.expandIds[s.parentId]=!0,a.push(s))}}return a},getDeviceListGroups:function(e,t,a){var r=[];if(e)for(var i=0;i<e.length;++i){var s=e[i],_=s.groupid>0;if(_){var l=void 0===s.shared?0:s.shared,c=s.groupname,d={groupid:s.groupid,name:c,groupname:c,icon:m,username:t,id:t+"-"+s.groupid,parentId:t,nodeType:o["a"].NodeType_Group,shared:l,level:a,checked:!1};if(this.disableShare&&1==s.shared)continue;r.push(d)}}return Object(n["Kb"])(r),r},castUsersTreeToDevicesTree:function(e){var t={name:"",icon:p,open:!0,nodeType:o["a"].NodeType_User,level:0,checked:!1};if(null!=e){var a=e.username,r=e.subusers,i=e.showname;t.name=a,t.username=a,t.showname=i,t.id=a,t.parentId=null;var s=this.getDeviceListGroups(e.groups,a,t.level+1);if(null!=a&&null!=r&&r.length>0){var _=this.doCastUsersTreeToDevicesTree(r,a,t.level+1);_.length>0&&(t.children=_)}if(s.length){var n=s.concat(t.children?t.children:[]);t.children=n}}return[t]},doCastUsersTreeToDevicesTree:function(e,t,a){var r=[];if(null!=e&&e.length>0)for(var i=0;i<e.length;++i){var s=e[i],_=s.username,l=s.subusers,c=s.showname,d={name:c||_,icon:p,nodeType:o["a"].NodeType_User,username:_,showname:c,id:_,parentId:t,level:a,checked:!1},u=this.getDeviceListGroups(s.groups,_,a+1);if(null!=_&&null!=l&&l.length>0){var m=this.doCastUsersTreeToDevicesTree(l,_,a+1);m.length>0&&(d.children=m)}var h=u.concat(d.children?d.children:[]);h.length>0&&(d.children=h),r.push(d)}return Object(n["Kb"])(r),r}},watch:{isQueryInitData:function(e){e&&this.ininZtree()}},mounted:function(){var e=this;this.isQueryInitData&&this.ininZtree(),this.$nextTick((function(){e.placeholder=e.$t("bgManage.editUserTitle1")}))}},f=v,g=(a("388ae"),a("2877")),E=Object(g["a"])(f,r,i,!1,null,null,null);t["a"]=E.exports},f04c:function(e,t,a){"use strict";a("9d54")},f568:function(e,t,a){"use strict";a("7734")}}]);