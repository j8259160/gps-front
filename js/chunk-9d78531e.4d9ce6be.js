(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d78531e"],{"0595":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quick-time-range"},[t("div",{staticClass:"quick-time-range-wrapper"},e._l(e.list,(function(i){return t("div",{key:i.type,style:{color:i.type==e.type?"#409EFF":""},on:{click:function(t){return e.selectDate(i.type)}}},[e._v(e._s(i.label))])})),0),t("div",{staticClass:"quick-time-range-space"}),t("div",{staticClass:"quick-time-range-btn",on:{click:function(t){e.isCollapse=!e.isCollapse}}},[e.isCollapse?t("i",{staticClass:"el-icon-arrow-right"}):t("i",{staticClass:"el-icon-arrow-left"})])])},s=[],r=i("5101"),n={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(e){var t="datetimerange"==this.dateType,i=[],a=new Date,s=new Date;switch(t&&(a=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),s=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),e){case 0:i=[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(s,"yyyy-MM-dd")+" 23:59:59")];break;case 1:a.setTime(a.getTime()-864e5),s.setTime(s.getTime()-864e5),i=[a,s];break;case 3:a.setTime(a.getTime()-2592e5),i=[a,s];break;case 7:a.setTime(a.getTime()-6048e5),i=[a,s];break;case 10:a.setTime(a.getTime()-864e6),i=[a,s];break;case 30:a.setTime(a.getTime()-2592e6),i=[a,s];break}this.type=e,this.$emit("input",i)}},mounted:function(){var e=this;this.$nextTick((function(){e.setList()}))}},o=n,l=(i("8d09"),i("2877")),c=Object(l["a"])(o,a,s,!1,null,null,null);t["a"]=c.exports},"3b13":function(e,t,i){},"57c9":function(e,t,i){"use strict";var a=i("0595");t["a"]=a["a"]},"5aff":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"h",(function(){return s})),i.d(t,"l",(function(){return r})),i.d(t,"k",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return u})),i.d(t,"m",(function(){return p})),i.d(t,"i",(function(){return h})),i.d(t,"a",(function(){return m})),i.d(t,"j",(function(){return f}));var a="#2D9F28",s="#89C6F2",r="#FFC65E",n="red",o="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",u="#F180D1",p="#0F1F46",h="#000000",m={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(e,t,i,a,s){var r=e[0],n=s.contentSize,o=s.viewSize;return r+10>o[0]-n[0]?r=r-n[0]-10:r+=10,[r,"0%"]}},7031:function(e,t,i){"use strict";i("3b13")},"80e2":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full speeding-report"},[t("div",{staticClass:"report-form-inner"},[t("el-scrollbar",{staticStyle:{width:"100%"}},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("QuickTimeRange",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left",staticStyle:{width:"140px"}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.speed")}},[t("el-select",{staticStyle:{width:"84px"},model:{value:e.limitspeed,callback:function(t){e.limitspeed=t},expression:"limitspeed"}},e._l(e.optionList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading1,type:"primary"},on:{click:function(t){return e.handleQuery(!1)}}},[e._v(e._s(e.$t("reportForm.deviceAlarm")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading2,type:"primary"},on:{click:function(t){return e.handleQuery(!0)}}},[e._v(e._s(e.$t("reportForm.platformStatistics")))])],1),t("div",{staticClass:"f_left"},[t("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[t("div",[t("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:e.exportLoading1,plain:""},on:{click:e.exportData},slot:"reference"},[e._v(e._s(e.$t("common.summary")))]),t("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:e.exportLoading2,plain:""},on:{click:e.exportDetailData},slot:"reference"},[e._v(e._s(e.$t("reportForm.detailed")))])],1),t("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v(e._s(e.$t("common.export")))])],1)],1)])]),t("div",{staticClass:"report-form-inner-tabs"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("reportForm.speedingStatistics")+"(".concat(e.totalList.length,")"),name:"tabTotal"}}),t("el-tab-pane",{attrs:{label:"",name:"details"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"details"==e.activeName,expression:"activeName == 'details'"}],staticClass:"tableTitle"},[t("b",{domProps:{textContent:e._s(e.tableTitle)}}),e._v(" ("+e._s(e.detailsList.length)+") "),t("span",[e._v(e._s(e.$t("reportForm.totalSpeedingDuration"))+":"+e._s(e.totalSpeedingDuration)+"h")])])],1),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[t("div",{style:e.statisticsStyle},[t("div",{staticClass:"echart-wrapper"},[t("SpeedingEcharts",{attrs:{chartList:e.chartList}})],1),t("div",{staticClass:"table-wrapper"},[t("vxe-table",{attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"70"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleClickRow(i.row)}}},[e._v(e._s(e.$t("reportForm.details")))])]}}])}),t("vxe-table-column",{attrs:{field:"devicename",width:"140",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",width:"140",title:e.$t("alarm.devNum"),sortable:""}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("reportForm.creater"),width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(i){return t("div",{key:i.username},[e._v(e._s(i.username)+"("+e._s(i.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(i.row.creater)}},slot:"reference"},[e._v(e._s(i.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),width:"100",sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingDuration",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingDuration"),sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingMileage",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingMileage")+e.distanceUnit,sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingCount",align:"right",title:e.$t("reportForm.speedingCount"),sortable:""}}),t("vxe-table-column",{attrs:{field:"maxSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.maxSpeed")+e.speedUnit,sortable:""}}),t("vxe-table-column",{attrs:{field:"minSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.minSpeed")+e.speedUnit,sortable:""}})],1)],1)]),t("div",{style:e.detailsStyle},[t("div",{staticClass:"echart-wrapper"},[t("TimeEchart",{ref:"timeEchart"})],1),t("div",{staticClass:"table-wrapper"},[t("vxe-table",{ref:"xTable",attrs:{"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"","highlight-current-row":"",size:"mini",height:"auto",data:e.detailsList},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.cellClickEvent}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"startTime",title:e.$t("reportForm.startTime"),width:"145",sortable:""}}),t("vxe-table-column",{attrs:{field:"endTime",title:e.$t("reportForm.endTime"),width:"145",sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingDuration",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingDuration"),sortable:""}}),t("vxe-table-column",{attrs:{field:"maxSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.maxSpeed")+e.speedUnit,sortable:""}}),t("vxe-table-column",{attrs:{field:"minSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.minSpeed")+e.speedUnit,sortable:""}}),t("vxe-table-column",{attrs:{field:"saddress",title:e.$t("reportForm.startAddress")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:e._s(i.row.saddress)},on:{click:function(t){return e.handleSeeMap(i.row)}}})]}}])}),t("vxe-table-column",{attrs:{field:"eaddress",title:e.$t("reportForm.endAddress")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:e._s(i.row.eaddress)},on:{click:function(t){return e.handleSeeMap(i.row)}}})]}}])})],1)],1)])]),t("vxe-modal",{attrs:{title:e.$t("reportForm.seeMap"),className:"modal-padding0",value:e.dialogMap,width:"500"},on:{hide:function(t){e.dialogMap=!1},close:function(t){e.dialogMap=!1}}},[t("div",{staticStyle:{width:"100%",height:"400px"}},[t("ReportMap",{ref:"mapIns"})],1)])],1)])},s=[],r=i("5530"),n=(i("14d9"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("6e52")),o=i("e561"),l=i("d462"),c=i("57c9"),d=i("80f4"),u=i("1c31"),p=i("7cf8"),h=i("5101"),m=i("eb10"),f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"full"},[t("el-carousel",{attrs:{trigger:"click",autoplay:!1}},e._l(e.chartList,(function(e,i){return t("el-carousel-item",{key:i},[t("div",{staticClass:"full",attrs:{id:"working-hours-charts"+i}})])})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.chartList.length,expression:"chartList.length == 0"}],staticClass:"working-hours-mask"},[t("span",[e._v(e._s(e.$t("tips.noData")))])])],1)},v=[],b=i("43c8"),g=i.n(b),y=i("2f62"),x=i("c276"),$={name:"SpeedingEcharts",props:{chartList:{type:Array,default:function(){return[]}}},computed:Object(r["a"])({},Object(y["b"])(["isZh"])),watch:{chartList:function(e){var t=this;setTimeout((function(){t.updateChartsOption(e)}),100)}},methods:{initChart:function(){},updateChartsOption:function(e){var t=0,i=e.length;while(t<i){var a=g.a.init(document.getElementById("working-hours-charts"+t)),s=e[t];a.setOption(this.getChartsOption(s.data,s.counts),!0),t++}},getChartsOption:function(e,t){var i=this.$t("reportForm.speedingCount");return{tooltip:{trigger:"axis"},legend:{data:[i],y:13,x:"center"},grid:{x:100,y:40,x2:80,y2:30},xAxis:[{type:"category",axisLabel:{show:!0,interval:0,rotate:0,margin:8,textStyle:{fontSize:12}},data:e}],yAxis:[{type:"value",position:"bottom",nameLocation:"end",boundaryGap:[0,.2],axisLabel:{formatter:"{value}"}}],series:[{name:i,type:"bar",itemStyle:{normal:{label:{show:!0,textStyle:{fontSize:"12",fontFamily:"微软雅黑",fontWeight:"bold"}}}},data:t}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},F=$,w=(i("bd62"),i("2877")),S=Object(w["a"])(F,f,v,!1,null,"fbef3d9e",null),T=S.exports,C=i("201d"),D=i("4c3c"),k=i("a05b"),O=i("0c87"),L={name:"speedingReport",data:function(){return{loading1:!1,loading2:!1,exportLoading1:!1,exportLoading2:!1,activeName:"tabTotal",totalSpeedingDuration:"",tableTitle:"",dateRange:[new Date,new Date],totalList:[],detailsList:[],chartList:[],limitspeed:"70",dialogMap:!1,optionList:[]}},mixins:[D["a"],k["a"],O["a"]],components:{MultiChoiceVehicle:o["a"],SelectDate:l["a"],QuickTimeRange:c["a"],TimeEchart:m["a"],SpeedingEcharts:T,ReportMap:d["a"],LabelWrap:C["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(y["b"])(["distanceUnit","speedUnit"])),{},{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}}),methods:{numberToFixed2:x["qb"],onSelectDevice:function(e){this.deviceids=e},handleSeeMap:function(e){var t=this;this.dialogMap=!0;var i={deviceid:e.deviceid,timezone:h["a"].getOffset(),begintime:e.startTime,endtime:e.endTime};Object(p["Z"])(i).then((function(e){var i=e.records;i&&(i.forEach((function(e){e.updatetimeStr=h["a"].longToLocalDateTimeStr(e.updatetime)})),setTimeout((function(){t.$refs.mapIns.markersAndLineLayerToMap(i)}),300))}))},cellClickEvent:function(e){var t=this,i=e.row,a={deviceid:i.deviceid,timezone:h["a"].getOffset(),begintime:i.startTime,endtime:i.endTime};Object(p["Z"])(a).then((function(e){var i=e.records;i&&(i.forEach((function(e){e.speed=Number(Object(x["e"])(e.speed).toFixed(0)),e.reissueStr=0==e.reissue?t.$t("header.no"):t.$t("header.yes"),e.updatetimeStr=h["a"].longToLocalDateTimeStr(e.updatetime)})),t.$refs.timeEchart.updateChartsOption(i))}))},handleClickRow:function(e){var t=this;if(e.records.length){this.activeName="details";var i=e.records[0],a={deviceid:e.deviceid,timezone:h["a"].getOffset(),begintime:i.startTime,endtime:i.endTime};this.tableTitle=e.devicename+"-"+e.deviceid,this.totalSpeedingDuration=e.speedingDuration,Object(p["Z"])(a).then((function(e){var i=e.records;i&&(i.forEach((function(e){e.speed=Number(Object(x["e"])(e.speed).toFixed(0)),e.reissueStr=0==e.reissue?t.$t("header.no"):t.$t("header.yes"),e.updatetimeStr=h["a"].longToLocalDateTimeStr(e.updatetime)})),t.$refs.timeEchart.updateChartsOption(i))})),this.detailsList=e.records,setTimeout((function(){var e=t.detailsList[0];t.$refs.xTable.setCurrentRow(e),t.$refs.xTable.scrollToRow(e)}),300)}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},handleQuery:function(e){var t=this,i=this.deviceids,a=this.dateRange;if(0!=i.length)if(0!=a.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var s=h["a"].format(a[0],"yyyy-MM-dd"),r=h["a"].format(a[1],"yyyy-MM-dd"),o={startday:s,endday:r,offset:h["a"].getOffset(),deviceids:i,limitspeed:e?Object(x["Mb"])(Number(this.limitspeed)):0};this.loading=!0,0==e?this.loading1=!0:this.loading2=!0,this.queryDetailDateRange=s+" "+r,Object(u["hb"])(o).then((function(i){var a=i.records,s=i.addressmap;t.addressmap=s,t.loading=!1;var r=[],o=[];a&&a.forEach((function(e,t){var i=n["a"].deviceInfos[e.deviceid],a={deviceid:e.deviceid,devicename:i.devicename,creater:n["a"].getShowName(i.creater),groupname:i.groupname,records:e.records,speedingCount:e.records.length},l=0,c=0,d="-",u="-";e.records.forEach((function(e){e.devicename=i.devicename,e.creater=i.creater,e.groupname=i.groupname,l+=e.endtime-e.begintime,c+=e.edistance-e.sdistance,"-"==d&&(d=0),"-"==u&&(u=99999999999),e.maxspeed>d&&(d=e.maxspeed),e.minspeed<u&&(u=e.minspeed),e.maxSpeed=Object(x["e"])(e.maxspeed),e.minSpeed=Object(x["e"])(e.minspeed),e.startTime=h["a"].longToLocalDateTimeStr(e.begintime),e.endTime=h["a"].longToLocalDateTimeStr(e.endtime),e.saddress=Object(x["L"])(s,e.slat,e.slon),e.eaddress=Object(x["L"])(s,e.elat,e.elon),e.speedingDuration=Number(((e.endtime-e.begintime)/1e3/3600).toFixed(2))})),a.maxSpeed="-"==d?d:Object(x["e"])(d),a.minSpeed="-"==u?u:Object(x["e"])(u),a.speedingDuration=Number((l/1e3/3600).toFixed(2)),a.speedingMileage=Object(x["d"])(c),t%4==0&&o.push({data:[],counts:[]});var p=o.length-1;o[p].data.push(a.devicename),o[p].counts.push(a.speedingCount),r.push(a)})),t.chartList=o,t.totalList=r,0==e?t.loading1=!1:t.loading2=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if(0!=this.totalList.length){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.speedingDuration"),this.$t("reportForm.speedingMileage")+this.distanceUnit,this.$t("reportForm.speedingCount"),this.$t("reportForm.maxSpeed")+this.speedUnit,this.$t("reportForm.minSpeed")+this.speedUnit]];this.totalList.forEach((function(t,i){var a=[];a.push(i+1),a.push(t.devicename),a.push(t.deviceid),a.push(t.creater),a.push(t.groupname),a.push(Object(x["qb"])(t.speedingDuration)),a.push(Object(x["qb"])(t.speedingMileage)),a.push(t.speedingCount),a.push(Object(x["qb"])(t.maxSpeed)),a.push(Object(x["qb"])(t.minSpeed)),e.push(a)}));var t={title:this.$t("reportForm.speedingReport")+"-"+this.$t("common.summary"),data:e,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(t).exportExcel(this)}},exportDetailData:function(){if(0!=this.totalList.length){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.speedingDuration"),this.$t("reportForm.maxSpeed")+this.speedUnit,this.$t("reportForm.minSpeed")+this.speedUnit,this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],t="",i=this.totalList.length;this.totalList.forEach((function(a){if(a.records&&a.records.length>0){a.records.forEach((function(a,s){1==i&&(t=a.devicename);var r=[];r.push(s+1),r.push(a.devicename),r.push(a.deviceid),r.push(a.creater),r.push(a.groupname),r.push(a.startTime),r.push(a.endTime),r.push(Object(x["qb"])(a.speedingDuration)),r.push(Object(x["qb"])(a.maxSpeed)),r.push(Object(x["qb"])(a.minSpeed)),r.push(a.saddress),r.push(a.eaddress),r.push(a.slon+","+a.slat),r.push(a.elon+","+a.elat),e.push(r)}));var s=[];s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),s.push(""),e.push(s)}}));var a={title:this.$t("reportForm.speedingReport")+"-"+this.$t("reportForm.detailed")+(t?" - "+t:""),data:e,dateRange:this.queryDetailDateRange};this.exportLoading2=!0,new ExcelCls(a).exportExcel(this)}}},mounted:function(){this.deviceids=[],this.queryDetailDateRange=null;var e=this.$store.state.userSetting.unit_speed;this.optionList=[{label:"30"+e,value:"30"},{label:"60"+e,value:"60"},{label:"70"+e,value:"70"},{label:"80"+e,value:"80"},{label:"90"+e,value:"90"},{label:"100"+e,value:"100"},{label:"110"+e,value:"110"},{label:"120"+e,value:"120"},{label:"130"+e,value:"130"},{label:"140"+e,value:"140"}]}},_=L,j=(i("9c8d"),Object(w["a"])(_,a,s,!1,null,null,null)),M=j.exports;t["default"]=M},"80f4":function(e,t,i){"use strict";var a=i("32eb");t["a"]=a["a"]},"8b2c":function(e,t,i){},"8d09":function(e,t,i){"use strict";i("a818")},"9c8d":function(e,t,i){"use strict";i("8b2c")},a818:function(e,t,i){},acc2:function(e,t,i){},bd62:function(e,t,i){"use strict";i("acc2")},e561:function(e,t,i){"use strict";var a=i("ea22");t["a"]=a["a"]},ea22:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice multi-choice-vehicle"},[t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:e.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:e.isQueryInitData,selectDeviceIds:e.multipleDeviceids},on:{onTreeCheck:e.onTreeCheck}})],1)])},s=[],r=i("5530"),n=(i("4795"),i("2f62")),o=i("2df7"),l={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(r["a"])({},Object(n["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:o["a"]},methods:Object(r["a"])(Object(r["a"])({},Object(n["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(e){this.$emit("onSelectDevice",e),this.setMultipleDeviceids(e)},clearText:function(){var e=this;setTimeout((function(){e.$refs.ztreeDevice.clearText()}),300)}})},c=l,d=(i("7031"),i("2877")),u=Object(d["a"])(c,a,s,!1,null,null,null);t["a"]=u.exports},eb10:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{ref:"chartId",staticClass:"full"})},s=[],r=i("ade3"),n=i("5530"),o=(i("14d9"),i("b0c0"),i("a9e3"),i("b680"),i("43c8")),l=i.n(o),c=i("2f62"),d=i("5aff"),u=i("c276"),p={name:"TimeEchart",computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["isZh"])),{},{distanceUnit:function(){return this.$store.state.userSetting.unit_distance},speedUnit:function(){return this.$store.state.userSetting.unit_speed}}),methods:{initChart:function(){var e=this;this.disMin=0,this.recvtime=[],this.speeds=[],this.mileages=[],this.status=[],this.rxlevels=[],this.gpsvalidnums=[];var t=this.$t("reportForm.speed"),i=this.$t("reportForm.mileage"),a=this.$t("reportForm.reissue"),s=(a=this.$t("reportForm.reissue"),this.$t("reportForm.GPSNumber")),n=this.$t("reportForm.rxlevel");this.selectedLegend=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},t,!1),i,!0),a,!0),s,!1),n,!1),this.chartsIns=l.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(t){var i=[t.offsetX,t.offsetY];if(e.chartsIns.containPixel("grid",i)&&e.recvtime.length){var a=e.chartsIns.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY])[0];e.$parent.$parent.scrollToRow&&e.$parent.$parent.scrollToRow(a)}})),this.chartsIns.on("legendselectchanged",(function(t){e.selectedLegend=t.selected}))},updateChartsOption:function(e){var t=this.isZh,i=[],a=[],s=[],r=[],n=[],o=[],l=[],c=0;e.length>0&&(c=e[e.length-1].totaldistance);var d=0,p=e.length-1;while(p>=0){var h=e[p],m=Number(h.gpsvalidnum),f=Number(Object(u["d"])(1e3*(h.totaldistance-c)).toFixed(2));m<=0&&(m=d),d=m,i.push(h.updatetimeStr),a.push(Number(h.speed)),s.push(f),o.push(Number(h.rxlevel)),l.push(m),h.strstatus?r.push(t?h.strstatus:h.strstatusen):r.push(""),n.push(0!=h.reissue?f:""),p--}this.recvtime=i,this.speeds=a,this.mileages=s,this.status=r,this.reissues=n,this.rxlevels=o,this.gpsvalidnums=l,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var e=this,t=this.$t("reportForm.speed"),i=this.$t("reportForm.mileage"),a=this.$t("reportForm.time"),s=this.$t("reportForm.status"),r=this.$t("reportForm.reissue"),o=(r=this.$t("reportForm.reissue"),this.$t("reportForm.GPSNumber")),l=this.$t("reportForm.rxlevel"),c=this.distanceUnit,p=this.speedUnit;return{title:{text:a,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:50,y:40,x2:50,y2:40,bottom:55},tooltip:Object(n["a"])(Object(n["a"])({trigger:"axis"},d["a"]),{},{formatter:function(s){var n="<div>".concat(s[0].name,"</div>");for(var h in s){var m=s[h].seriesName,f=s[h].value;if(m&&m!=a)if(m==i)n+=Object(u["k"])(d["b"],m,f,c);else if(m==t)n+=Object(u["k"])(d["h"],m,f,p);else if(m==r)f=""===f?e.$t("header.no"):e.$t("header.yes"),n+=Object(u["k"])("red",m,f,"");else{var v=d["m"];m==o?v="#0952C8":m==l&&(v="#0DBC79"),n+=Object(u["k"])(v,m,f,"")}}return'<div style="width:230px">'.concat(n,"</div>")},position:d["j"]}),legend:{data:[t,i,r,o,l],selected:this.selectedLegend,x:"left"},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1,show:!0},data:this.recvtime,axisPointer:{type:"line",value:"",snap:!1,lineStyle:{color:"#7581BD",width:2},handle:{show:!0,color:"transparent"}}},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:10},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],yAxis:[{name:t+this.speedUnit,type:"value",nameTextStyle:10,nameGap:5},{name:i+this.distanceUnit,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value}"},axisTick:{show:!1}}],series:[{name:a,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:t,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:d["h"],data:this.speeds},{name:i,type:"line",symbol:"none",yAxisIndex:1,color:d["b"],smooth:!0,data:this.mileages},{name:o,type:"line",symbol:"none",yAxisIndex:0,color:"#0952C8",smooth:!0,data:this.gpsvalidnums},{name:l,type:"line",symbol:"none",yAxisIndex:0,color:"#0DBC79",smooth:!0,data:this.rxlevels},{smooth:!0,name:s,type:"line",symbol:"none",color:d["m"],data:this.status},{smooth:!0,name:r,type:"line",yAxisIndex:1,symbol:"none",color:"red",data:this.reissues}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},h=p,m=i("2877"),f=Object(m["a"])(h,a,s,!1,null,null,null);t["a"]=f.exports}}]);