(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66924e24"],{"11b5":function(e,t,a){},"24b2":function(e,t,a){"use strict";a("11b5")},"369b":function(e,t,a){},a8f6:function(e,t,a){"use strict";a("369b")},b059:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAu1JREFUWEftmDuMTVEUQNcmPgUJEf8JQUIxtYZK4RsUCgalROIzmIoOHdX4zESl9JkpNAQzEho0WiQKEt/BEILGCEf2u/vOO+9+5t773vXmFU43887ee539OWfvK7TYkhbjoRCQg0nAemAtsBJYCsywQ30FXgCPgDvAgMCvogfOBeQCo0eA/cDsnEY+Ab3AGQGFzbUygRx0qFJgbi6N8U0f9DACV/PIpwI5mAicB/ZFFL0CrgB3gafAMEEo24DFwBpgO7AkIncB6BT4PRZYIpDB9APbPGEFOQb0Zyk1eYU6BSzydFxT2LHk04DUMwc9RTeA3QLf8rg93ONgOnAZ2OzJ9Uqt7hqVMSAHO6iN9zmgS+BPERgPagLQDRzy5DsE+pL01QBZNT0D5thmFdop4OqB8aDUjuadHlbXR2BFUvVFgU4Ax03oNdAu8L0RmEj4Hns5dVJA7SWHzMFk4I13z2jOaPxLWw52AZdMoVZnm8CIb2DUQy5IvOv240tgWVY1FSW16ntu14OKbxHQghldPpAmb6f9clqCEi99ueAqOGqKe6Rqs/IvH+g+sNo2bhAYKJ2GSnXoW3jbdD+Uqs0YkGZ++E5pbN/+I6CFlquqfliqFR0D+kmQ2LqmCujfeqKNwEVgfp2AQ8AegVumT21UdAMjAlPScigN6F0DMKGtIYEFRYESQ+agDKD3Yh52kDtkD4BV0aR2sMlCNq/OkGku7hW4aR7KndQtV/bNuBj1odU2V/smXVulehnHqkyzX/Nllm0e36fD4us/rtqQ6eP6o87cqRFzMA14kvtxNSBt5pvRfujDujyz/TCoZjRo2mMlNv1pLWwPcMDz+fi1sOYlnTjSmvy+rHa29Cbfg0obg7Rxu2dJqje8Lm17220M0rCXNwb55WGD4lmvzy5adAp8uOFBMQKl1ddleRXeU1lgn22U7i51lI6AhR8b1nkfG2bani/ex4ZBYDDaL2edQH/PnO3zKClzz3+gLG+2nIf+AjPc2CWQPrm+AAAAAElFTkSuQmCC"},f634:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-manage full"},[t("div",{staticClass:"batch-manage-left"},[t("div",{staticClass:"batch-manage-inner full"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("common.selectDevice"))}}),t("span")]),t("div",{staticClass:"batch-manage-inner-content"},[t("SearchDeviceZtree",{ref:"ztree",on:{onTreeCheck:e.onTreeCheck}})],1)])]),t("div",{staticClass:"batch-manage-right"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("bgManage.selectedDevice"))}}),t("b",{domProps:{textContent:e._s(e.selectList.length)}}),t("div",{staticClass:"batch-manage-btns"},[t("el-button",{attrs:{size:"mini"},on:{click:e.clearTable}},[e._v(e._s(e.$t("common.clearList")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleShowDialog}},[e._v(e._s(e.$t("bgManage.setConveyIp")))]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.cancelSettingUrl}},[e._v(e._s(e.$t("bgManage.cancelConveyIp")))]),t("span",{staticStyle:{padding:"0px 5px"}}),t("el-select",{staticStyle:{width:"100px"},attrs:{"popper-append-to-body":!0,filterable:"",size:"mini"},model:{value:e.forwardid,callback:function(t){e.forwardid=t},expression:"forwardid"}},[t("el-option",{attrs:{label:e.$t("monitor.all"),value:"all"}}),e._l(e.forwards,(function(e){return t("el-option",{key:e.forwardid,attrs:{label:e.servername,value:e.forwardid}})}))],2),t("span",{staticStyle:{padding:"0px 5px"}}),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.localQuery}},[e._v(e._s(e.$t("common.query")))])],1)]),t("div",{staticClass:"batch-manage-inner-content"},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":e.sortConfig,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectChangeEvent,"cell-dblclick":e.handleDblClick}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",sortable:"",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"deviceid",sortable:"",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:"creater",sortable:"",title:e.$t("reportForm.creater")}}),t("vxe-table-column",{attrs:{field:"groupname",sortable:"",title:e.$t("reportForm.groupName")}}),t("vxe-table-column",{attrs:{field:"serverName",sortable:"",title:e.$t("bgManage.serverName")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{on:{click:function(t){return e.handleDblClick(a)}}},[t("a",{staticStyle:{"text-decoration":"underline",cursor:"pointer"},domProps:{textContent:e._s(a.row.serverName)}})])]}}])})],1)],1)]),t("SettingUrlDialog",{attrs:{forwards:e.forwards,totalList:e.selectList,protocolsList:e.protocolsList},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}}),t("ShowSettingDialog",{ref:"showSetting",attrs:{forwards:e.forwards,totalList:e.selectList,protocolsList:e.protocolsList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},s=[],i=(a("d81d"),a("14d9"),a("a434"),a("d3b7"),a("159b"),a("4795"),a("6e52")),l=a("7e15"),o=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.$t("bgManage.setConveyIp"),className:"modal-padding0",value:e.value,width:"720px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",{staticClass:"setting-url"},[t("div",{staticClass:"setting-url-left"},[t("div",{staticClass:"setting-url-left-search"},[t("el-input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),t("i",{staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){e.searchText=""}},slot:"suffix"})])],1),t("div",{staticClass:"setting-url-left-list"},[e.value?t("el-scrollbar",{staticStyle:{height:"100%"}},e._l(e.itemList,(function(a,r){return t("div",{key:r,staticClass:"el-menu-item",class:[e.activeIndex==r?"is-active":""],on:{click:function(t){return e.handleClickItem(r)}}},[t("b",[e._v(e._s(r+1)+".")]),e._v(" "),t("span",{domProps:{textContent:e._s(a.servername)}})])})),0):e._e()],1)]),t("div",{staticClass:"setting-url-right"},[t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.platformName")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.servername,callback:function(t){e.servername=t},expression:"servername"}})],1)],1),t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.protocolType")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!0,disabled:""},model:{value:e.protocoltype,callback:function(t){e.protocoltype=t},expression:"protocoltype"}},e._l(e.protocolOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:23,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.domainIp")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.uplinkip,callback:function(t){e.uplinkip=t},expression:"uplinkip"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.userName")}},[t("el-input",{attrs:{clearable:"",type:"password",disabled:""},model:{value:e.userid,callback:function(t){e.userid=t},expression:"userid"}})],1)],1),t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("login.password")}},[t("el-input",{attrs:{clearable:"",type:"password",disabled:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:23,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.remarks")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1)],1),t("div",{staticStyle:{"padding-top":"40px","text-align":"center"}},[t("el-button",{staticStyle:{width:"90px"},attrs:{type:"primary"},on:{click:e.batchOperate}},[e._v(e._s(e.$t("common.confirm")))])],1)])])])},n=[],c=(a("c975"),a("b0c0"),a("e9c4"),a("b64b"),a("498a"),a("201d")),d=a("e285"),u={name:"SettingUrlDialog",props:{value:{type:Boolean,default:!1},forwards:{type:Array,default:function(){return[]}},totalList:{type:Array,default:function(){return[]}},protocolsList:{type:Array,default:function(){return[]}}},watch:{value:function(e){e&&(this.activeIndex=0,this.itemList=JSON.parse(JSON.stringify(this.forwards)),this.handleClickItem(this.activeIndex))},searchText:function(e){if(e=e.trim(),""==e)this.itemList=JSON.parse(JSON.stringify(this.forwards));else{var t=[];e=e.toLowerCase(),this.forwards.forEach((function(a){(a.servername&&-1!=a.servername.toLowerCase().indexOf(e)||a.remark&&-1!=a.remark.indexOf(e)||a.uplinkip&&-1!=a.uplinkip.toLowerCase().indexOf(e)||a.uplinkport&&-1!=String(a.uplinkport).toLowerCase().indexOf(e))&&t.push(a)})),this.itemList=t}this.itemList.length>0&&this.handleClickItem(0)}},data:function(){return{searchText:"",activeIndex:0,servername:"",protocoltype:"",uplinkip:"",userid:"",password:"",remark:"",itemList:[]}},components:{LabelWrap:c["a"]},computed:{protocolOptions:function(){var e=[];return this.protocolsList.forEach((function(t){e.push({label:t.name,value:t.index})})),e}},methods:{handleClose:function(){this.$emit("input",!1)},handleClickItem:function(e){this.activeIndex=e;var t=this.itemList[e];this.servername=t.servername,this.protocoltype=t.protocoltype,this.uplinkip=t.uplinkip,this.userid=t.userid,this.password=t.password,this.remark=t.remark,this.forwardid=t.forwardid},batchOperate:function(){var e=this,t=this.totalList;if(t.length>0){var a={deviceids:t,action:"modifyforwardurl",forwardid:this.forwardid};Object(d["m"])(a).then((function(r){var s=r.success,l=r.total;s==l?(e.$XModal.message({message:e.$t("tips.setSucc"),status:"success",zIndex:9999}),t.forEach((function(e){e&&i["a"].deviceInfos[e]&&(i["a"].deviceInfos[e].forwardid=a.forwardid)})),e.$parent.updateTable(t),e.handleClose()):e.$XModal.message({message:e.$t("tips.setFail"),status:"error",zIndex:9999})}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}}},p=u,f=(a("24b2"),a("2877")),m=Object(f["a"])(p,o,n,!1,null,null,null),v=m.exports,h=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.deviceName+" - "+e.$t("bgManage.setConveyIp"),className:"modal-padding0",value:e.value,width:"560px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.platformName")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.servername,callback:function(t){e.servername=t},expression:"servername"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.protocolType")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!0,disabled:""},model:{value:e.protocoltype,callback:function(t){e.protocoltype=t},expression:"protocoltype"}},e._l(e.protocolOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.domainIp")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.uplinkip,callback:function(t){e.uplinkip=t},expression:"uplinkip"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.userName")}},[t("el-input",{attrs:{clearable:"",type:"password",disabled:""},model:{value:e.userid,callback:function(t){e.userid=t},expression:"userid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("login.password")}},[t("el-input",{attrs:{clearable:"",type:"password",disabled:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.remarks")}},[t("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1)],1)])},b=[],g={name:"SettingUrlDialog",props:{value:{type:Boolean,default:!1},forwards:{type:Array,default:function(){return[]}},totalList:{type:Array,default:function(){return[]}},protocolsList:{type:Array,default:function(){return[]}}},watch:{value:function(e){}},data:function(){return{deviceName:"",activeIndex:0,servername:"",protocoltype:"",uplinkip:"",userid:"",password:"",remark:"",itemList:[]}},components:{LabelWrap:c["a"]},computed:{protocolOptions:function(){var e=[];return this.protocolsList.forEach((function(t){e.push({label:t.name,value:t.index})})),e}},methods:{handleClose:function(){this.$emit("input",!1)},setSettingInfo:function(e){var t=this;this.servername="",this.protocoltype="",this.uplinkip="",this.userid="",this.password="",this.remark="",this.itemList=JSON.parse(JSON.stringify(this.forwards)),this.itemList.forEach((function(a,r){a.forwardid==e&&t.handleClickItem(r)}))},handleClickItem:function(e){this.activeIndex=e;var t=this.itemList[e];this.servername=t.servername,this.protocoltype=t.protocoltype,this.uplinkip=t.uplinkip,this.userid=t.userid,this.password=t.password,this.remark=t.remark,this.forwardid=t.forwardid}}},w=g,k=Object(f["a"])(w,h,b,!1,null,null,null),x=k.exports,C=a("4c3c"),y=a("b059"),L={name:"settingTransfer",data:function(){return{icon:y,dialog:!1,showDialog:!1,forwards:[],totalList:[],selectList:[],protocolsList:[],forwardid:"all"}},mixins:[C["a"]],components:{SearchDeviceZtree:l["a"],SettingUrlDialog:v,ShowSettingDialog:x},methods:{selectAllEvent:function(e){e.checked;var t=e.records;this.selectList=t.map((function(e){return e.deviceid}))},selectChangeEvent:function(e){e.checked;var t=e.records;this.selectList=t.map((function(e){return e.deviceid}))},handleDblClick:function(e){var t=e.row;this.showDialog=!0,this.$refs.showSetting.deviceName=t.devicename,this.$refs.showSetting.setSettingInfo(t.forwardid)},handleShowDialog:function(){this.dialog=!0},cancelSettingUrl:function(){var e=this,t=this.selectList,a={deviceids:t,action:"modifyforwardurl",forwardid:null};Object(d["m"])(a).then((function(a){var r=a.success,s=a.total;if(r==s){var l=i["a"].deviceInfos;t.forEach((function(e){l[e].forwardid=null})),e.updateTable(t),e.$XModal.message({message:e.$t("tips.setSucc"),status:"success",zIndex:9999})}else e.$XModal.message({message:e.$t("tips.setFail"),status:"error",zIndex:9999})}))},clearTable:function(){this.totalList=[],this.$refs.ztree.refreshZtree()},noRepeat:function(e){for(var t=0;t<e.length-1;t++)for(var a=t+1;a<e.length;a++)e[t]===e[a]&&(e.splice(a,1),a--);return e},updateTable:function(e){var t=this,a=i["a"].deviceInfos;this.totalList.forEach((function(r){var s=r.deviceid,i=a[s];e.forEach((function(e){e==s&&(r.serverName=t.getServerName(i.forwardid),r.forwardid=i.forwardid)}))}))},onTreeCheck:function(e){var t=this,a=[],r=i["a"].deviceInfos;e.forEach((function(e){var s=r[e];a.push({devicename:s.devicename,deviceid:s.deviceid,groupname:s.groupname,creater:s.creater,serverName:t.getServerName(s.forwardid),forwardid:s.forwardid})})),this.totalList=a,this.selectList=a.map((function(e){return e.deviceid})),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0)}),100)},localQuery:function(){var e=this,t=this.forwardid,a=i["a"].deviceInfos,r=[];if("all"==t)for(var s in a){var l=a[s];l&&l.forwardid&&r.push({devicename:l.devicename,deviceid:l.deviceid,groupname:l.groupname,creater:l.creater,serverName:this.getServerName(l.forwardid),forwardid:l.forwardid})}else for(var o in a){var n=a[o];n&&t==n.forwardid&&r.push({devicename:n.devicename,deviceid:n.deviceid,groupname:n.groupname,creater:n.creater,serverName:this.getServerName(n.forwardid),forwardid:n.forwardid})}this.totalList=r,this.selectList=r.map((function(e){return e.deviceid})),setTimeout((function(){e.$refs.xTable.setAllCheckboxRow(!0)}),100)},getServerName:function(e){var t="",a=this.forwards;if(a)for(var r=0;r<a.length;r++){var s=a[r];if(e==s.forwardid){t=s.servername;break}}return t}},mounted:function(){var e=this;Object(d["rb"])({creater:null,keyword:""}).then((function(t){var a=t.forwards;a&&(e.forwards=a)})),Object(d["sb"])().then((function(t){var a=t.protocols;a&&(e.protocolsList=a)}))}},A=L,S=(a("a8f6"),Object(f["a"])(A,r,s,!1,null,null,null)),I=S.exports;t["default"]=I}}]);