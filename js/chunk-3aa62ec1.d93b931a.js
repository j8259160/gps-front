(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aa62ec1"],{"0595":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quick-time-range"},[t("div",{staticClass:"quick-time-range-wrapper"},e._l(e.list,(function(i){return t("div",{key:i.type,style:{color:i.type==e.type?"#409EFF":""},on:{click:function(t){return e.selectDate(i.type)}}},[e._v(e._s(i.label))])})),0),t("div",{staticClass:"quick-time-range-space"}),t("div",{staticClass:"quick-time-range-btn",on:{click:function(t){e.isCollapse=!e.isCollapse}}},[e.isCollapse?t("i",{staticClass:"el-icon-arrow-right"}):t("i",{staticClass:"el-icon-arrow-left"})])])},s=[],r=i("5101"),n={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(e){var t="datetimerange"==this.dateType,i=[],a=new Date,s=new Date;switch(t&&(a=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),s=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),e){case 0:i=[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(s,"yyyy-MM-dd")+" 23:59:59")];break;case 1:a.setTime(a.getTime()-864e5),s.setTime(s.getTime()-864e5),i=[a,s];break;case 3:a.setTime(a.getTime()-2592e5),i=[a,s];break;case 7:a.setTime(a.getTime()-6048e5),i=[a,s];break;case 10:a.setTime(a.getTime()-864e6),i=[a,s];break;case 30:a.setTime(a.getTime()-2592e6),i=[a,s];break}this.type=e,this.$emit("input",i)}},mounted:function(){var e=this;this.$nextTick((function(){e.setList()}))}},c=n,o=(i("8d09"),i("2877")),l=Object(o["a"])(c,a,s,!1,null,null,null);t["a"]=l.exports},"3b13":function(e,t,i){},"57c9":function(e,t,i){"use strict";var a=i("0595");t["a"]=a["a"]},7031:function(e,t,i){"use strict";i("3b13")},"822c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left",staticStyle:{width:"230px"}},[t("SelectDate",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("QuickTimeRange",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("vxe-table",{ref:"xTable",attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.cmdList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",sortable:"",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"deviceid",sortable:"",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:e.isZh?"cmdname":"cmdnameen",sortable:"",title:e.$t("reportForm.cmdName")}}),t("vxe-table-column",{attrs:{field:"cmdtimeStr",sortable:"",title:e.$t("reportForm.sendTime")}}),e.isShowCmdParams?t("vxe-table-column",{attrs:{field:"cmdparams",sortable:"",title:e.$t("reportForm.sendContent")}}):e._e(),t("vxe-table-column",{attrs:{field:"username",sortable:"",title:e.$t("monitor.sender")}}),t("vxe-table-column",{attrs:{field:"fromstr",sortable:"",title:e.$t("monitor.source")}}),t("vxe-table-column",{attrs:{field:"fromip",sortable:"",title:"Ip"}}),t("vxe-table-column",{attrs:{field:"result",sortable:"",title:e.$t("reportForm.sendReult")}})],1)],1)])])},s=[],r=i("5530"),n=(i("c975"),i("14d9"),i("b64b"),i("d3b7"),i("159b"),i("2f62")),c=i("e561"),o=i("d462"),l=i("57c9"),d=i("5101"),m=i("6e52"),u=i("1c31"),h=i("4c3c"),p=i("a05b"),f={name:"cmds",data:function(){return{loading:!1,exportLoading1:!1,dateRange:[new Date,new Date],cmdList:[]}},components:{MultiChoiceVehicle:c["a"],SelectDate:o["a"],QuickTimeRange:l["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(n["b"])(["isZh","permissionList"])),{},{isShowCmdParams:function(){return-1!=this.permissionList.indexOf("monitor-sendcmds-viewhistorycontent")}}),mixins:[h["a"],p["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},methods:{onSelectDevice:function(e){this.deviceids=e},exportData:function(){if(0!=this.cmdList.length){var e=this.isShowCmdParams,t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.cmdName"),this.$t("reportForm.sendTime")]];e&&t[0].push(this.$t("reportForm.sendContent")),t[0].push(this.$t("monitor.sender")),t[0].push(this.$t("monitor.source")),t[0].push(this.$t("reportForm.sendReult"));var i=this.isZh,a=this.$refs.xTable.getTableData().visibleData;a.forEach((function(a,s){var r=[];r.push(a.index),r.push(a.devicename),r.push(a.deviceid),r.push(i?a.cmdname:a.cmdnameen),r.push(a.cmdtimeStr),e&&r.push(a.cmdparams),r.push(a.username),r.push(a.fromstr),r.push(a.result),t.push(r)}));var s={title:this.$t("reportForm.cmds"),data:t,dateRange:this.queryDateRange};this.exportLoading1=!0,new ExcelCls(s).exportExcel(this)}},handleQuery:function(){var e=this,t=this.deviceids;if(t.length>0){var i=this.dateRange;if(0==i.length)return void this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});this.loading=!0;var a=d["a"].format(i[0],"yyyy-MM-dd"),s=d["a"].format(i[1],"yyyy-MM-dd"),r={startday:a,endday:s,offset:d["a"].getOffset(),devices:t};Object(u["G"])(r).then((function(t){var i=t.status,r=t.cmdrecords;e.queryDateRange=a+" "+s,0==i?(r.forEach((function(t,i){t.index=++i;var a=t.cmdparams;if(a){var s=JSON.parse(t.cmdparams),r="";s.forEach((function(e){r+=" "+e})),t.cmdparams=r}t.username=m["a"].getShowName(t.username),t.cmdtimeStr=d["a"].longToLocalDateTimeStr(t.cmdtime),t.devicename=m["a"].deviceInfos[t.deviceid].devicename,t.result=e.getSendResult(t.sendstatus)})),e.cmdList=r):e.cmdList=[],e.loading=!1})).catch((function(t){e.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getSendResult:function(e){var t=this.$t("common.unknown");switch(e){case 0:t=this.$t("missing.sentOKUnconfirmed");break;case 1:t=this.$t("bgManage.passwordError");break;case 2:t=this.$t("missing.deviceOfflineNotCached");break;case 3:t=this.$t("missing.deviceOfflineHasCached");break;case 4:t=this.$t("missing.pleaseModifyTheDefaultPassword");break;case 5:t=this.$t("missing.error");break;case 6:t=this.$t("missing.confirmed");break;case 7:t=this.$t("missing.over3Retry");break}return t}},mounted:function(){this.deviceids=[]}},v=f,b=(i("faaa"),i("2877")),y=Object(b["a"])(v,a,s,!1,null,null,null),g=y.exports;t["default"]=g},"8d09":function(e,t,i){"use strict";i("a818")},a818:function(e,t,i){},daec:function(e,t,i){},e561:function(e,t,i){"use strict";var a=i("ea22");t["a"]=a["a"]},ea22:function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice multi-choice-vehicle"},[t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:e.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:e.isQueryInitData,selectDeviceIds:e.multipleDeviceids},on:{onTreeCheck:e.onTreeCheck}})],1)])},s=[],r=i("5530"),n=(i("4795"),i("2f62")),c=i("2df7"),o={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(r["a"])({},Object(n["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:c["a"]},methods:Object(r["a"])(Object(r["a"])({},Object(n["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(e){this.$emit("onSelectDevice",e),this.setMultipleDeviceids(e)},clearText:function(){var e=this;setTimeout((function(){e.$refs.ztreeDevice.clearText()}),300)}})},l=o,d=(i("7031"),i("2877")),m=Object(d["a"])(l,a,s,!1,null,null,null);t["a"]=m.exports},faaa:function(e,t,i){"use strict";i("daec")}}]);