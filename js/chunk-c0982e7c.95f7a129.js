(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c0982e7c"],{"072c":function(e,t,a){"use strict";a("1162")},1162:function(e,t,a){},"2b56":function(e,t,a){},"4cf6":function(e,t,a){},"79b2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"notify-list"},[t("div",{staticClass:"notify-list-content",style:{zIndex:0==e.alldevices?100:1}},[t("div",{staticClass:"batch-manage full"},[t("div",{staticClass:"batch-manage-left"},[t("div",{staticClass:"batch-manage-inner full"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("common.selectDevice"))}}),t("span")]),t("div",{staticClass:"batch-manage-inner-content"},[t("SearchDeviceZtree",{ref:"ztree",on:{onTreeCheck:e.onTreeCheck}})],1)])]),t("div",{staticClass:"batch-manage-right"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("bgManage.selectedDevice"))}}),t("b",{domProps:{textContent:e._s(e.selectList.length)}}),t("div",{staticClass:"batch-manage-btns"},[t("span",{staticStyle:{padding:"0px 1px"}}),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.alldevices,expression:"alldevices==0"}],attrs:{type:"primary",size:"mini"},on:{click:e.localQuery}},[e._v(e._s(e.$t("reportForm.notifyedDevice")))]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.alldevices,expression:"alldevices==0"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){e.importDialog=!0}}},[e._v(e._s(e.$t("common.importQuery")))]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.alldevices,expression:"alldevices==0"}],attrs:{type:"primary",size:"mini",loading:e.setloading},on:{click:e.batchSetting}},[e._v(e._s(e.$t("device.open")))]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.alldevices,expression:"alldevices==0"}],attrs:{type:"danger",size:"mini",loading:e.cancelloading},on:{click:e.cancelSetting}},[e._v(e._s(e.$t("device.close")))]),t("span",{directives:[{name:"show",rawName:"v-show",value:0==e.alldevices,expression:"alldevices==0"}],staticStyle:{padding:"0px 1px"}}),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSelectAlarm}},[e._v(e._s(e.$t("reportForm.phone_sms_email")))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleClickSetOfflineDelay}},[e._v(e._s(e.$t("bgManage.setOfflineDelay")))])],1)]),t("div",{staticClass:"batch-manage-inner-content"},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,"sort-config":e.sortConfig,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu,"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectChangeEvent,"cell-dblclick":e.handleDblClick}},[t("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"notifyOpen",width:"100",sortable:"",title:e.$t("reportForm.openNotify")}}),t("vxe-table-column",{attrs:{field:"devicename",sortable:"",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"deviceid",sortable:"",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:"offlinedelay",width:"200",sortable:"",title:e.$t("bgManage.setOfflineDelay")+"("+e.$t("monitor.minute")+")"}}),t("vxe-table-column",{attrs:{field:"creater",sortable:"",title:e.$t("reportForm.creater")}}),t("vxe-table-column",{attrs:{field:"groupname",sortable:"",title:e.$t("reportForm.groupName")}})],1)],1)]),t("AddedServiceDialog",{model:{value:e.addedServiceDialog,callback:function(t){e.addedServiceDialog=t},expression:"addedServiceDialog"}}),t("ImportDeviceidsDialog",{on:{"on-import":e.onImportDevice},model:{value:e.importDialog,callback:function(t){e.importDialog=t},expression:"importDialog"}}),t("OfflineDelayDialog",{ref:"offlineDelay",on:{onSetMileage:e.onSetOfflineDelay},model:{value:e.setOfflineDelayDialog,callback:function(t){e.setOfflineDelayDialog=t},expression:"setOfflineDelayDialog"}})],1)])])},i=[],n=a("5530"),l=(a("99af"),a("caad"),a("d81d"),a("14d9"),a("a434"),a("d3b7"),a("2532"),a("159b"),a("4795"),a("6e52")),o=a("7e15"),r=function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.$t("reportForm.valueAddedServiceSettings"),className:"modal-padding0",value:e.value,width:"720px"},on:{hide:e.handleClose,close:e.handleClose}},[t("div",{staticClass:"added-service"},[t("el-tabs",{staticClass:"oil-marking-tabs",attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isHasTel?t("el-tab-pane",{attrs:{label:e.$t("reportForm.telNotify"),name:"0"}}):e._e(),e.isHasSms?t("el-tab-pane",{attrs:{label:e.$t("reportForm.smsNotify"),name:"1"}}):e._e(),e.isHasEmail?t("el-tab-pane",{attrs:{label:e.$t("reportForm.emailNotify"),name:"2"}}):e._e()],1),t("div",{staticClass:"charge-tips"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"left"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",{domProps:{innerHTML:e._s(e.chargeTips)}})]),t("el-button",[e._v(e._s(e.$t("reportForm.expenseStandards")))])],1)],1),t("div",{staticClass:"added-service-content"},[t("div",[t("PhoneAlarm",{directives:[{name:"show",rawName:"v-show",value:0==e.activeName,expression:"activeName == 0"}],ref:"service1",attrs:{serviceType:"phone",costpoints:e.telnotifyprice}}),t("PhoneAlarm",{directives:[{name:"show",rawName:"v-show",value:1==e.activeName,expression:"activeName == 1"}],ref:"service2",attrs:{serviceType:"sms",costpoints:e.smsnotifyprice}}),t("PhoneAlarm",{directives:[{name:"show",rawName:"v-show",value:2==e.activeName,expression:"activeName == 2"}],ref:"service3",attrs:{serviceType:"email",costpoints:e.emailnotifyprice}})],1)]),t("div",{staticStyle:{"text-align":"center",padding:"20px 0px"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.determine")))])],1)],1)])},c=[],m=(a("c975"),a("a9e3"),a("2f62")),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"phone-alarm"},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.serviceSwitch")}},[t("div",{staticStyle:{padding:"5px 0px 0px 10px"}},[t("el-radio",{attrs:{label:1},model:{value:e.switcher,callback:function(t){e.switcher=t},expression:"switcher"}},[e._v(e._s(e.$t("reportForm.open")))]),t("el-radio",{attrs:{label:0},model:{value:e.switcher,callback:function(t){e.switcher=t},expression:"switcher"}},[e._v(e._s(e.$t("reportForm.close")))])],1)])],1),t("el-col",{attrs:{span:5}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.includeSub")}},[t("div",{staticStyle:{padding:"5px 0px 0px 10px"}},[t("el-checkbox",{model:{value:e.includesub,callback:function(t){e.includesub=t},expression:"includesub"}})],1)])],1),t("el-col",{directives:[{name:"show",rawName:"v-show",value:e.userType<2,expression:"userType < 2"}],attrs:{span:11}},[t("el-row",[t("el-col",{attrs:{span:17}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.subPrice")}},[t("el-input",{attrs:{clearable:""},model:{value:e.salepoints,callback:function(t){e.salepoints=t},expression:"salepoints"}})],1)],1),t("el-col",{attrs:{span:7}},[t("div",{staticStyle:{"border-top":"1px solid #DCDFE6","border-right":"1px solid #DCDFE6","border-bottom":"1px solid #DCDFE6",height:"34px","text-align":"center","line-height":"32px","font-size":"12px","background-color":"#FAFAFA"}},[e._v(" "+e._s(e.$t("common.cost")+" "+e.costpoints)+" ")])])],1)],1)],1),"email"==e.serviceType?t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("EmailInput",{attrs:{label:e.$t("reportForm.emailNum")+"1",placeholder:e.$t("bgManage.pleaseEnterEmail")},model:{value:e.emailAddress,callback:function(t){e.emailAddress=t},expression:"emailAddress"}})],1),t("el-col",{attrs:{span:8}},[t("EmailInput",{attrs:{label:e.$t("reportForm.emailNum")+"2",placeholder:e.$t("bgManage.pleaseEnterEmail")},model:{value:e.emailAddress2,callback:function(t){e.emailAddress2=t},expression:"emailAddress2"}})],1),t("el-col",{attrs:{span:8}},[t("EmailInput",{attrs:{label:e.$t("reportForm.emailNum")+"3",placeholder:e.$t("bgManage.pleaseEnterEmail")},model:{value:e.emailAddress3,callback:function(t){e.emailAddress3=t},expression:"emailAddress3"}})],1)],1):t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.receivePhone")+"1"}},[t("el-input",{attrs:{clearable:"",placeholder:e.$t("bgManage.pleaseEnterPhone")},model:{value:e.phonenum,callback:function(t){e.phonenum=t},expression:"phonenum"}})],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.receivePhone")+"2"}},[t("el-input",{attrs:{clearable:"",placeholder:e.$t("bgManage.pleaseEnterPhone")},model:{value:e.phonenum2,callback:function(t){e.phonenum2=t},expression:"phonenum2"}})],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.receivePhone")+"3"}},[t("el-input",{attrs:{clearable:"",placeholder:e.$t("bgManage.pleaseEnterPhone")},model:{value:e.phonenum3,callback:function(t){e.phonenum3=t},expression:"phonenum3"}})],1)],1)],1),t("div",{staticClass:"phone-alarm-select"},[t("div",{staticClass:"phone-alarm-select-search"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-search"},on:{clear:e.handleClear},model:{value:e.sosoValue,callback:function(t){e.sosoValue=t},expression:"sosoValue"}})],1),t("el-col",{attrs:{span:3}},[t("div",{staticStyle:{padding:"5px 0px 0px 6px"}},[t("el-checkbox",{on:{change:e.onChangeAll},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v(" "+e._s(e.$t("common.selectAll")))])],1)]),t("el-col",{attrs:{span:3}},[t("div",{staticStyle:{"text-align":"center",height:"32px","line-height":"32px"}},[e._v(" "+e._s(e.$t("reportForm.selectedAlarm")+e.selectAlarmLength)+" ")])]),t("el-col",{attrs:{span:10}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.notifyInterval")}},[t("el-select",{model:{value:e.notifyintervalminutes,callback:function(t){e.notifyintervalminutes=t},expression:"notifyintervalminutes"}},[t("el-option",{attrs:{label:e.$t("reportForm.notifyInterval5Tip"),value:5}}),t("el-option",{attrs:{label:e.$t("reportForm.notifyInterval15Tip"),value:15}}),t("el-option",{attrs:{label:e.$t("reportForm.notifyInterval30Tip"),value:30}}),t("el-option",{attrs:{label:e.$t("reportForm.notifyInterval60Tip"),value:60}}),t("el-option",{attrs:{label:e.$t("reportForm.notifyInterval1DayTip"),value:1440}})],1)],1)],1)],1)],1),t("div",{staticClass:"phone-alarm-select-checkboxs"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("div",{staticClass:"checkboxs-wrap"},e._l(e.copyAlarmTypeList,(function(a,s){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.show,expression:"item.show"}],key:s},[t("el-checkbox",{on:{change:e.onCheckboxChange},model:{value:e.checkboxObj["alarm"+a.index],callback:function(t){e.$set(e.checkboxObj,"alarm"+a.index,t)},expression:"checkboxObj['alarm' +  item.index]"}},[e._v(" "+e._s(a.alarmname))])],1)})),0)])],1)])],1)},d=[],h=a("201d"),p=function(){var e=this,t=e._self._c;return t("LabelWrap",{attrs:{label:e.label}},[t("el-input",{attrs:{clearable:"",value:e.value,placeholder:e.placeholder},on:{input:e.onInput,blur:e.onBlur,focus:e.onFocus}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.value&&e.showTip,expression:"value && showTip"}],staticClass:"input-tip"},[e._v(" "+e._s(e.value)+" ")])],1)},v=[],f={name:"EmailInput",props:{value:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{showTip:!1}},components:{LabelWrap:h["a"]},mounted:function(){var e=this;this.$nextTick((function(){e.inputText=e.value}))},methods:{onInput:function(e){this.$emit("input",e)},onBlur:function(){this.showTip=!1},onFocus:function(){this.showTip=!0}}},b=f,g=a("2877"),y=Object(g["a"])(b,p,v,!1,null,null,null),x=y.exports,$={name:"PhoneAlarm",props:{serviceType:{type:String,default:"phone"},costpoints:{type:Number||String,default:0}},data:function(){return{switcher:0,notifyintervalminutes:0,phonenum:"",phonenum2:"",phonenum3:"",emailAddress:"",emailAddress2:"",emailAddress3:"",includesub:!1,selectAlarmLength:0,copyAlarmTypeList:[],forcealarm:"0000000000000000000000000000000000000000000000000000000000000000000000",sosoValue:"",isSelectAll:!1,checkboxObj:{},salepoints:""}},components:{LabelWrap:h["a"],EmailInput:x},computed:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["alarmTypeList","userType","isZh"])),{},{typeStr:function(){var e="";switch(this.serviceType){case"phone":e=this.isZh?"电话":"Phone";break;case"sms":e=this.isZh?"短信":"SMS";break;case"email":e=this.isZh?"邮箱":"E-mail";break}return e}}),watch:{sosoValue:function(e){0==e.length?this.copyAlarmTypeList.forEach((function(e){e.show=!0})):(e=e.toLowerCase(),this.copyAlarmTypeList.forEach((function(t){var a=t.alarmname.toLowerCase();-1!=a.indexOf(e)?t.show=!0:t.show=!1})))}},mounted:function(){this.setCopyAlarmTypeList()},methods:{handleClear:function(){this.sosoValue=""},onCheckboxChange:function(){this.checkingSelectState()},onChangeAll:function(e){var t=0,a=this.checkboxObj;for(var s in a)a[s]=e,t++;this.selectAlarmLength=e?t:0},checkingSelectState:function(){var e=this.checkboxObj,t=!0,a=0;for(var s in e){var i=e[s];0==i&&(t=!1),i&&a++}this.isSelectAll=t,this.selectAlarmLength=a},setCopyAlarmTypeList:function(){var e=this,t=[],a=0;this.alarmTypeList.forEach((function(s,i){t.push(Object(n["a"])({},s));var l="1"==e.forcealarm.charAt(i);l&&a++,e.$set(e.checkboxObj,"alarm"+s.index,l)})),this.isSelectAll=this.alarmTypeList.length==a,this.selectAlarmLength=a,this.copyAlarmTypeList=t},setPhoneAlarmData:function(e){this.switcher=e.telswitcher,this.phonenum=e.telnum,this.phonenum2=e.telnum2,this.phonenum3=e.telnum3,this.salepoints=e.telsalepoints,this.includesub=1==e.telincludesub,this.notifyintervalminutes=e.telnotifyintervalminutes?Number(e.telnotifyintervalminutes):15;var t=e.telneedalarmstr;t&&(this.forcealarm=t,this.setCopyAlarmTypeList())},setSmsAlarmData:function(e){this.switcher=e.smsswitcher,this.phonenum=e.smsnum,this.phonenum2=e.smsnum2,this.phonenum3=e.smsnum3,this.salepoints=e.smssalepoints,this.includesub=1==e.smsincludesub,this.notifyintervalminutes=e.smsnotifyintervalminutes?Number(e.smsnotifyintervalminutes):15;var t=e.smsneedalarmstr;t&&(this.forcealarm=t,this.setCopyAlarmTypeList())},setEmailAlarmData:function(e){this.switcher=e.emailswitcher,this.emailAddress=e.emailaddress,this.emailAddress2=e.emailaddress2,this.emailAddress3=e.emailaddress3,this.salepoints=e.emailsalepoints,this.includesub=1==e.emailincludesub,this.notifyintervalminutes=e.emailnotifyintervalminutes?Number(e.emailnotifyintervalminutes):15;var t=e.emailneedalarmstr;t&&(this.forcealarm=t,this.setCopyAlarmTypeList())},getForceAlarmData:function(){for(var e="",t=this.alarmTypeList.length,a=0;a<t;a++){var s=this.checkboxObj["alarm"+(a+1)];e+=s?"1":"0"}return e},setServiceData:function(e){var t=this.serviceType;switch(t){case"phone":this.setPhoneAlarmData(e);break;case"sms":this.setSmsAlarmData(e);break;case"email":this.setEmailAlarmData(e);break}},getServiceData:function(){var e=this.serviceType,t={};switch(e){case"phone":t.telswitcher=this.switcher,t.telnum=this.phonenum,t.telnum2=this.phonenum2,t.telnum3=this.phonenum3,t.telincludesub=this.includesub?1:0,t.telneedalarmstr=this.getForceAlarmData(),t.telsalepoints=isNaN(this.salepoints)?0:Number(this.salepoints),t.telnotifyintervalminutes=this.notifyintervalminutes;break;case"sms":t.smsswitcher=this.switcher,t.smsnum=this.phonenum,t.smsnum2=this.phonenum2,t.smsnum3=this.phonenum3,t.smsincludesub=this.includesub?1:0,t.smsneedalarmstr=this.getForceAlarmData(),t.smssalepoints=isNaN(this.salepoints)?0:Number(this.salepoints),t.smsnotifyintervalminutes=this.notifyintervalminutes;break;case"email":t.emailswitcher=this.switcher,t.emailaddress=this.emailAddress,t.emailaddress2=this.emailAddress2,t.emailaddress3=this.emailAddress3,t.emailincludesub=this.includesub?1:0,t.emailneedalarmstr=this.getForceAlarmData(),t.emailsalepoints=isNaN(this.salepoints)?0:Number(this.salepoints),t.emailnotifyintervalminutes=this.notifyintervalminutes;break}return t.telneedalarmlong=-1,t.smsneedalarmlong=-1,t.emailneedalarmlong=-1,t}}},w=$,S=(a("7b42"),Object(g["a"])(w,u,d,!1,null,null,null)),D=S.exports,k=a("1c31"),A={name:"AddedServiceDialog",props:{value:{type:Boolean,default:!1},tableList:{type:Array,default:function(){return[]}}},data:function(){return{activeName:0,loading:!1,chargeTips:"",telnotifyprice:0,smsnotifyprice:0,emailnotifyprice:0}},components:{PhoneAlarm:D},computed:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["isZh","userName","userType","permissionList","alarmTypeList"])),{},{isHasTel:function(){return-1!=this.permissionList.indexOf("report-addvalues-telnotify")},isHasSms:function(){return-1!=this.permissionList.indexOf("report-addvalues-smsnotify")},isHasEmail:function(){return-1!=this.permissionList.indexOf("report-addvalues-emailnotify")}}),mounted:function(){var e=this;this.$nextTick((function(){e.isHasTel?e.activeName=0:e.isHasSms?e.activeName=1:e.isHasEmail&&(e.activeName=2)}))},watch:{value:function(e){var t=this;e?this.queryAddValueNotify():setTimeout((function(){t.alarmTypeList.forEach((function(e){e.show=!0}))}),1e3)}},methods:{handleClose:function(){this.$emit("input",!1)},handleSubmit:function(){var e=this,t=this.$refs,a=t.service1.getServiceData(),s=t.service2.getServiceData(),i=t.service3.getServiceData();if(!isNaN(a.telsalepoints)&&Number(a.telsalepoints)<this.telnotifyprice)this.$XModal.message({message:this.$t("reportForm.phoneSaleLessThanCost"),status:"error",zIndex:9999});else if(!isNaN(s.smssalepoints)&&Number(s.smssalepoints)<this.smsnotifyprice)this.$XModal.message({message:this.$t("reportForm.smsSaleLessThanCost"),status:"error",zIndex:9999});else if(!isNaN(i.emailsalepoints)&&Number(i.emailsalepoints)<this.emailnotifyprice)this.$XModal.message({message:this.$t("reportForm.emailSaleLessThanCost"),status:"error",zIndex:9999});else{var l=this.$parent.addvaluenotify.alldevices,o=this.$i18n.locale,r=Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({username:this.userName},a),s),i),{},{alldevices:l,notifylanguage:o});this.loading=!0,Object(k["rb"])(r).then((function(t){var a=t.status,s=t.cause;e.loading=!1,0==a?(Object.assign(e.$parent.addvaluenotify,r),e.$XModal.message({message:e.$t("tips.setSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.setFail")+" "+s,status:"error",zIndex:9999})})).catch((function(t){e.loading=!1}))}},queryAddValueNotify:function(){var e=this,t=this.$refs;Object(k["o"])({username:this.userName}).then((function(a){var s=a.status,i=a.addvaluenotify,n=a.emailnotifyprice,l=a.smsnotifyprice,o=a.telnotifyprice;0==s&&(t.service1.setServiceData(i),t.service2.setServiceData(i),t.service3.setServiceData(i),e.telnotifyprice=o,e.smsnotifyprice=l,e.emailnotifyprice=n,e.chargeTips="\n                            <div>".concat(e.$t("reportForm.phoneServiceCostTip",{jindou:o}),"</div>\n                            <div>").concat(e.$t("reportForm.smsServiceCostTip",{jindou:l}),"</div>\n                            <div>").concat(e.$t("reportForm.emailServiceCostTip",{jindou:n}),"</div>\n                        "))}))}}},T=A,C=(a("cce9"),Object(g["a"])(T,r,c,!1,null,null,null)),L=C.exports,N=L,O=a("5bca"),F=a("d73c"),_=a("b562"),I=a("e285"),j=a("c276"),E=a("4c3c"),M=a("a05b"),z={name:"notifyList",data:function(){return{alldevices:0,importDialog:!1,setloading:!1,cancelloading:!1,addedServiceDialog:!1,setOfflineDelayDialog:!1,showDialog:!1,totalList:[],selectList:[]}},mixins:[E["a"],M["a"]],components:{SearchDeviceZtree:o["a"],AddedServiceDialog:N,ImportDeviceidsDialog:O["a"],OfflineDelayDialog:F["a"]},computed:Object(n["a"])({},Object(m["b"])(["alarmTypeList","userName"])),methods:{onSetOfflineDelay:function(e){var t=this,a=this.selectList;a.length>0&&(e.deviceids=a,Object(I["m"])(e).then((function(s){var i=s.total,n=s.success,o=s.fail,r=s.errorrecords;r=null==r?[]:r,t.totalList.forEach((function(t){var s=t.deviceid;a.includes(s)&&(l["a"].deviceInfos[s].offlinedelay=e.offlinedelay,t.offlinedelay=e.offlinedelay)})),i==n?t.$XModal.message({message:t.$t("device.actionSucc")+","+t.$t("bgManage.tower",{count:n}),status:"success",zIndex:9999}):t.$XModal.message({message:"".concat(t.$t("device.actionSucc"),":").concat(n,", ").concat(t.$t("device.actionFail"),":").concat(o),status:"error",zIndex:9999})})))},handleClickSetOfflineDelay:function(){var e=this;this.selectList.length?(this.setOfflineDelayDialog=!0,setTimeout((function(){var t=e.selectList[0],a=l["a"].deviceInfos[t].offlinedelay;e.$refs.offlineDelay.offlinedelay=a}),300)):this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onImportDevice:function(e){var t=this,a=[],s=l["a"].deviceInfos,i=Object(j["t"])(s),n=i.simMap,o=i.iccidMap;e.forEach((function(e){var i=Object(j["ob"])(s,n,o,e);i&&a.push({devicename:i.devicename,deviceid:i.deviceid,groupname:i.groupname,creater:i.creater,notifyOpen:1==i.notifyphonenumisopen?t.$t("header.yes"):t.$t("header.no"),offlinedelay:i.offlinedelay})})),this.totalList=a,this.selectList=a.map((function(e){return e.deviceid})),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0)}),100)},batchSetting:function(){var e=this,t=this.selectList,a={deviceids:t,action:"setnotify",notifyphonenumisopen:1};this.setloading=!0,Object(I["m"])(a).then((function(a){var s=a.success,i=a.total;if(e.setloading=!1,s==i){var n=l["a"].deviceInfos;t.forEach((function(e){n[e].notifyphonenumisopen=1})),e.updateTable(t),e.$XModal.message({message:e.$t("tips.setSucc"),status:"success",zIndex:9999})}else e.$XModal.message({message:e.$t("tips.setFail"),status:"error",zIndex:9999})}))},handleDblClick:function(e){e.row;this.showDialog=!0},selectAllEvent:function(e){e.checked;var t=e.records;this.selectList=t.map((function(e){return e.deviceid}))},selectChangeEvent:function(e){e.checked;var t=e.records;this.selectList=t.map((function(e){return e.deviceid}))},handleSelectAlarm:function(){var e=this;0==this.alarmTypeList.length?Object(_["L"])().then((function(t){if(0==t.status){var a=[],s=t.records;s.forEach((function(e,t){e.show=!0,e.index=t+1,a.push(e)})),e.$store.commit("setAlarmTypeList",a),e.addedServiceDialog=!0}})):this.addedServiceDialog=!0},cancelSetting:function(){var e=this,t=this.selectList,a={deviceids:t,action:"setnotify",notifyphonenumisopen:0};this.cancelloading=!0,Object(I["m"])(a).then((function(a){var s=a.success,i=a.total;if(e.cancelloading=!1,s==i){var n=l["a"].deviceInfos;t.forEach((function(e){n[e].notifyphonenumisopen=0})),e.updateTable(t),e.$XModal.message({message:e.$t("tips.closeSucc"),status:"success",zIndex:9999})}else e.$XModal.message({message:e.$t("tips.setFail"),status:"error",zIndex:9999})}))},clearTable:function(){this.totalList=[],this.selectList=[],this.$refs.ztree.refreshZtree()},noRepeat:function(e){for(var t=0;t<e.length-1;t++)for(var a=t+1;a<e.length;a++)e[t]===e[a]&&(e.splice(a,1),a--);return e},updateTable:function(e){var t=this,a=l["a"].deviceInfos;this.totalList.forEach((function(s){var i=s.deviceid,n=a[i];e.forEach((function(e){e==i&&(s.notifyOpen=1==n.notifyphonenumisopen?t.$t("header.yes"):t.$t("header.no"))}))}))},onTreeCheck:function(e){var t=this,a=[],s=l["a"].deviceInfos;e.forEach((function(e){var i=s[e];a.push({devicename:i.devicename,deviceid:i.deviceid,groupname:i.groupname,creater:i.creater,offlinedelay:i.offlinedelay,notifyOpen:1==i.notifyphonenumisopen?t.$t("header.yes"):t.$t("header.no")})})),this.totalList=a,this.selectList=a.map((function(e){return e.deviceid})),setTimeout((function(){t.$refs.xTable.setAllCheckboxRow(!0)}),100)},localQuery:function(){var e=this,t=l["a"].deviceInfos,a=[];for(var s in t){var i=t[s];i&&1==i.notifyphonenumisopen&&a.push({devicename:i.devicename,deviceid:i.deviceid,groupname:i.groupname,offlinedelay:i.offlinedelay,creater:i.creater,notifyOpen:this.$t("header.yes")})}this.totalList=a,this.selectList=a.map((function(e){return e.deviceid})),setTimeout((function(){e.$refs.xTable.setAllCheckboxRow(!0)}),100)}},watch:{alldevices:function(e,t){var a=this;null!==t&&(this.addvaluenotify.alldevices=e,Object(k["rb"])(this.addvaluenotify).then((function(t){var s=t.status,i=t.cause;0==s?1==e?a.$XModal.message({message:a.$t("tips.setSucc"),status:"success",zIndex:9999}):a.$XModal.message({message:a.$t("tips.selectDevice"),status:"success",zIndex:9999}):a.$XModal.message({message:a.$t("tips.setFail")+" "+i,status:"error",zIndex:9999})})))}},mounted:function(){var e=this;this.addvaluenotify={},Object(k["o"])({username:this.userName}).then((function(t){t.status;var a=t.addvaluenotify;e.addvaluenotify=a||{},e.alldevices=0}))}},P=z,X=(a("072c"),Object(g["a"])(P,s,i,!1,null,null,null)),H=X.exports;t["default"]=H},"7b42":function(e,t,a){"use strict";a("4cf6")},cce9:function(e,t,a){"use strict";a("2b56")}}]);