(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a36ab02"],{"5aff":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"h",(function(){return r})),i.d(t,"l",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return m})),i.d(t,"e",(function(){return p})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return h})),i.d(t,"m",(function(){return d})),i.d(t,"i",(function(){return u})),i.d(t,"a",(function(){return c})),i.d(t,"j",(function(){return v}));var s="#2D9F28",r="#89C6F2",a="#FFC65E",o="red",n="#1EBEFF",m="#E505F7",p="#40A703",l="#F27908",h="#F180D1",d="#0F1F46",u="#000000",c={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},v=function(e,t,i,s,r){var a=e[0],o=r.contentSize,n=r.viewSize;return a+10>n[0]-o[0]?a=a-o[0]-10:a+=10,[a,"0%"]}},"6c06":function(e,t,i){},9649:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form temp-and-humi full"},[t("vxe-modal",{attrs:{title:e.$t("reportForm.seeMap"),className:"modal-padding0",value:e.dialogMap,zIndex:99,width:"500"},on:{hide:function(t){e.dialogMap=!1},close:function(t){e.dialogMap=!1}}},[t("div",{staticStyle:{width:"100%",height:"400px"}},[t("ReportMap",{ref:"mapIns"})],1)]),t("div",{staticClass:"report-form-inner"},[t("el-scrollbar",{staticStyle:{width:"100%"}},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[t("div",{staticClass:"f_left"},[t("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{attrs:{dateType:"datetimerange"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("LabelWrap",{attrs:{label:e.$t("reportForm.interval")}},[t("el-select",{staticStyle:{width:"100px"},model:{value:e.intervalseconds,callback:function(t){e.intervalseconds=t},expression:"intervalseconds"}},[t("el-option",{attrs:{label:e.$t("monitor.zeroMinute"),value:0}}),t("el-option",{attrs:{label:e.$t("monitor.oneMinute"),value:60}}),t("el-option",{attrs:{label:e.$t("monitor.threeMinutes"),value:180}}),t("el-option",{attrs:{label:e.$t("monitor.fiveMinutes"),value:300}}),t("el-option",{attrs:{label:e.$t("monitor.tenMinutes"),value:600}}),t("el-option",{attrs:{label:e.$t("monitor.thirtyMinutes"),value:1800}})],1)],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",disabled:e.loadingAddress,loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loadingAddress,type:"primary"},on:{click:e.queryAddress}},[e._v(e._s(e.$t("common.oneClickQueryAddress")))])],1)])]),t("div",{staticClass:"temp-and-humi-ctrl"},[t("div",{staticClass:"temp-and-humi-ctrl-icon"},[t("div",[t("i",{staticClass:"icon iconfont icon-gengduohunhe",style:{color:1==e.mode?"#2E86FF":"#000000",fontSize:"23px"},on:{click:function(t){e.mode=1}}})]),t("div",[t("i",{staticClass:"icon iconfont icon-LINE_CHART",style:{color:2==e.mode?"#2E86FF":"#000000"},on:{click:function(t){e.mode=2}}})]),t("div",[t("i",{staticClass:"icon iconfont icon-biaoge",style:{color:3==e.mode?"#2E86FF":"#000000"},on:{click:function(t){e.mode=3}}})])]),t("div",{staticClass:"temp-and-humi-ctrl-summary"},[t("div",[t("b",{domProps:{textContent:e._s(e.tableTitle)}}),e._v("("+e._s(e.$t("monitor.total"))+":"+e._s(e.totalList.length)+" "+e._s(e.$t("reportForm.mutations"))+":"+e._s(e.anomalyCount)+")")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTemp1,expression:"isShowTemp1"}]},[t("span",[e._v(e._s(e.$t("reportForm.temp1"))+" ")]),t("span",[e._v(e._s(e.$t("alarm.max"))+":"+e._s(e.summaryData.maxTemp1)+" ")]),t("span",[e._v(e._s(e.$t("alarm.min"))+":"+e._s(e.summaryData.minTemp1))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTemp2,expression:"isShowTemp2"}]},[t("span",[e._v(e._s(e.$t("reportForm.temp2"))+" ")]),t("span",[e._v(e._s(e.$t("alarm.max"))+":"+e._s(e.summaryData.maxTemp2)+" ")]),t("span",[e._v(e._s(e.$t("alarm.min"))+":"+e._s(e.summaryData.minTemp2))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTemp3,expression:"isShowTemp3"}]},[t("span",[e._v(e._s(e.$t("reportForm.temp3"))+" ")]),t("span",[e._v(e._s(e.$t("alarm.max"))+":"+e._s(e.summaryData.maxTemp3)+" ")]),t("span",[e._v(e._s(e.$t("alarm.min"))+":"+e._s(e.summaryData.minTemp3))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTemp4,expression:"isShowTemp4"}]},[t("span",[e._v(e._s(e.$t("reportForm.temp4"))+" ")]),t("span",[e._v(e._s(e.$t("alarm.max"))+":"+e._s(e.summaryData.maxTemp4)+" ")]),t("span",[e._v(e._s(e.$t("alarm.min"))+":"+e._s(e.summaryData.minTemp4))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowHumi,expression:"isShowHumi"}]},[t("span",[e._v(e._s(e.$t("reportForm.humi"))+" ")]),t("span",[e._v(e._s(e.$t("alarm.max"))+":"+e._s(e.summaryData.maxHumi)+" ")]),t("span",[e._v(e._s(e.$t("alarm.min"))+":"+e._s(e.summaryData.minHumi))])])])]),t("div",{staticClass:"temp-and-humi-content"},[t("div",{style:e.chartStyle},[t("TempAndHumiEcharts",{ref:"echartsIns",on:{selectedLegend:e.onSelectedLegend}})],1),e.isHasEditTemp?t("div",{staticClass:"report-form-inner-content",style:e.tableStyle},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,"edit-config":{trigger:"click",mode:"cell",showStatus:!0,icon:"fa fa-pencil"},border:"","highlight-current-row":"","row-class-name":e.rowClassName,resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu,"edit-closed":e.editClosedEvent,"cell-click":e.cellclick,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"updatetimeStr",width:"158",title:e.$t("reportForm.time"),sortable:""}}),e.isShowSpeed?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"speed","sort-type":"number",align:"right",field:"speed",width:"120",title:e.$t("reportForm.speed")+e.speedUnit,sortable:""}}):e._e(),e.isShowTemp1?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp1","sort-type":"number","title-help":{message:e.$t("tips.clickDevicenameEdit"),icon:"el-icon-edit"},"edit-render":{name:"$input",props:{type:"text"}},align:"right",field:"temp1",width:"120",title:e.$t("reportForm.temp1")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp2?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp2","sort-type":"number","title-help":{message:e.$t("tips.clickDevicenameEdit"),icon:"el-icon-edit"},"edit-render":{name:"$input",props:{type:"text"}},align:"right",field:"temp2",width:"120",title:e.$t("reportForm.temp2")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp3?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp3","sort-type":"number","title-help":{message:e.$t("tips.clickDevicenameEdit"),icon:"el-icon-edit"},"edit-render":{name:"$input",props:{type:"text"}},align:"right",field:"temp3",width:"120",title:e.$t("reportForm.temp3")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp4?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp4","sort-type":"number","title-help":{message:e.$t("tips.clickDevicenameEdit"),icon:"el-icon-edit"},"edit-render":{name:"$input",props:{type:"text"}},align:"right",field:"temp4",width:"120",title:e.$t("reportForm.temp4")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowAverageTemp?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right","sort-by":"averageTemp","sort-type":"number",field:"averageTemp",width:"120",title:e.$t("reportForm.averageTemp")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowHumi?t("vxe-table-column",{attrs:{field:"humi1",align:"right",width:"120",title:e.$t("reportForm.humi")+"(%)","sort-by":"humi1","sort-type":"number","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),t("vxe-table-column",{attrs:{field:"address",width:"500",title:e.$t("reportForm.address")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:e._s(i.row.address)}})]}}],null,!1,1807766351)})],1)],1):t("div",{staticClass:"report-form-inner-content",style:e.tableStyle},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,border:"","highlight-current-row":"","row-class-name":e.rowClassName,resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.cellclick,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"updatetimeStr",width:"158",title:e.$t("reportForm.time"),sortable:""}}),e.isShowSpeed?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"speed","sort-type":"number",align:"right",field:"speed",width:"120",title:e.$t("reportForm.speed")+e.speedUnit,sortable:""}}):e._e(),e.isShowTemp1?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp1","sort-type":"number",align:"right",field:"temp1",width:"120",title:e.$t("reportForm.temp1")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp2?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp2","sort-type":"number",align:"right",field:"temp2",width:"120",title:e.$t("reportForm.temp2")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp3?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp3","sort-type":"number",align:"right",field:"temp3",width:"120",title:e.$t("reportForm.temp3")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowTemp4?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,"sort-by":"temp4","sort-type":"number",align:"right",field:"temp4",width:"120",title:e.$t("reportForm.temp4")+e.temperatureUnit,sortable:""}}):e._e(),e.isShowAverageTemp?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right","sort-by":"averageTemp","sort-type":"number",field:"averageTemp",width:"120",title:e.$t("reportForm.averageTemp")+"℃",sortable:""}}):e._e(),e.isShowHumi?t("vxe-table-column",{attrs:{field:"humi1",align:"right",width:"120",title:e.$t("reportForm.humi")+"(%)","sort-by":"humi1","sort-type":"number","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),t("vxe-table-column",{attrs:{field:"address",width:"500",title:e.$t("reportForm.address")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:e._s(i.row.address)}})]}}])})],1)],1)]),t("transition",{attrs:{name:"el-zoom-in-bottom"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"transition-box"},[t("el-card",[t("div",{staticStyle:{position:"absolute",right:"10px",top:"0px"}},[t("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0","font-size":"20px",cursor:"pointer"},on:{click:function(t){e.show=!1}}})]),t("div",{staticStyle:{margin:"10px 0px","white-space":"normal","word-break":"break-all",height:"210px","overflow-y":"auto","font-size":"12px"},domProps:{textContent:e._s(e.messageBody)}})])],1)])],1)],1)},r=[],a=i("5530"),o=(i("99af"),i("c975"),i("14d9"),i("13d5"),i("4e82"),i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("d3b7"),i("159b"),i("4795"),i("2f62")),n=i("d03a"),m=i("d462"),p=i("201d"),l=i("32eb"),h=function(){var e=this,t=e._self._c;return t("div",{ref:"chartId",staticClass:"full"})},d=[],u=i("ade3"),c=(i("b0c0"),i("43c8")),v=i.n(c),b=i("5aff"),g=i("c276"),f={name:"TempAndHumiEcharts",computed:Object(a["a"])({},Object(o["b"])(["speedUnit","temperatureUnit"])),methods:{initChart:function(){var e=this,t=this.$t("reportForm.speed"),i=(this.$t("reportForm.time"),this.$t("reportForm.temp1")),s=this.$t("reportForm.temp2"),r=this.$t("reportForm.temp3"),a=this.$t("reportForm.temp4"),o=this.$t("reportForm.averageTemp"),n=this.$t("reportForm.humi");this.veo=[],this.recvtime=[],this.temp1=[],this.temp2=[],this.temp3=[],this.temp4=[],this.humi1s=[],this.averageTemp=[],this.devStates=[],this.devReissue=[],this.selectedLegend=Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({},t,!1),i,!0),s,!1),r,!1),a,!1),o,!1),n,!1),this.chartsIns=v.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.on("legendselectchanged",(function(t){e.selectedLegend=t.selected,e.isOpenTemp1=t.selected[i],e.isOpenTemp2=t.selected[s],e.isOpenTemp3=t.selected[r],e.isOpenTemp4=t.selected[a],e.chartsIns.setOption(e.getChartsOption(),!0),e.$emit("selectedLegend",t.selected)})),this.chartsIns.getZr().on("click",(function(t){var i=[t.offsetX,t.offsetY];if(e.chartsIns.containPixel("grid",i)&&e.recvtime.length){var s=e.chartsIns.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY])[0];e.$parent.tableScrollToRow&&e.$parent.tableScrollToRow(s)}}))},updateChartsOption:function(e,t){var i=this,s=this.$t("reportForm.temp1"),r=this.$t("reportForm.temp2"),a=this.$t("reportForm.temp3"),o=this.$t("reportForm.temp4");this.isOpenTemp=1==t.temphumialarmstatus,this.isOpenTemp1=this.selectedLegend[s],this.isOpenTemp2=this.selectedLegend[r],this.isOpenTemp3=this.selectedLegend[a],this.isOpenTemp4=this.selectedLegend[o];var n=t.temphumidetectors,m=999999!=n[0].highest?n[0].highest/100:"-",p=999999!=n[0].lowest?n[0].lowest/100:"-",l=999999!=n[1].highest?n[1].highest/100:"-",h=999999!=n[1].lowest?n[1].lowest/100:"-",d=999999!=n[2].highest?n[2].highest/100:"-",u=999999!=n[2].lowest?n[2].lowest/100:"-",c=999999!=n[3].highest?n[3].highest/100:"-",v=999999!=n[3].lowest?n[3].lowest/100:"-",b=[],g=[],f=[],y=[],w=[],x=[],T=[],F=[],$=[],S=[],O=[],_=[],D=[],k=[],C=[],I=[],j=[],A=[];e.forEach((function(e){g.push(e.updatetimeStr),b.push(e.speed),f.push(e.temp1),y.push(e.temp2),w.push(e.temp3),x.push(e.temp4),T.push(e.humi1),$.push(e.strstatus),S.push(0==e.reissue?i.$t("header.no"):i.$t("header.yes")),F.push(e.averageTemp),O.push(m),_.push(p),D.push(l),k.push(h),C.push(d),I.push(u),j.push(c),A.push(v)})),this.veo=b,this.recvtime=g,this.temp1=f,this.temp2=y,this.temp3=w,this.temp4=x,this.humi1s=T,this.highests1=O,this.lowests1=_,this.highests2=D,this.lowests2=k,this.highests3=C,this.lowests3=I,this.highests4=j,this.lowests4=A,this.averageTemp=F,this.devStates=$,this.devReissue=S,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var e=this.$t("reportForm.speed"),t=this.$t("reportForm.time"),i=this.$t("reportForm.temp"),s=this.$t("reportForm.temp1"),r=this.$t("reportForm.temp2"),o=this.$t("reportForm.temp3"),n=this.$t("reportForm.temp4"),m=this.$t("reportForm.averageTemp"),p=this.$t("reportForm.humi"),l=this.$t("reportForm.status"),h=this.$t("reportForm.reissue"),d=this.speedUnit,u=this.temperatureUnit;return{title:{text:e+"/"+i,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:60,y:40,x2:50,y2:40},tooltip:Object(a["a"])(Object(a["a"])({trigger:"axis"},b["a"]),{},{formatter:function(i){var a="<div>".concat(i[0].name,"</div>");for(var c in i){var v=i[c].seriesName,f=i[c].value;v&&v!=t&&(v==e?a+=Object(g["k"])(b["h"],v,f,d):v==s?a+=Object(g["k"])(b["k"],v,f,"-"!=f?u:""):v==r?a+=Object(g["k"])(b["c"],v,f,"-"!=f?u:""):v==o?a+=Object(g["k"])(b["d"],v,f,"-"!=f?u:""):v==n?a+=Object(g["k"])(b["e"],v,f,"-"!=f?u:""):v==m?a+=Object(g["k"])(b["f"],v,f,"-"!=f?u:""):v==p?a+=Object(g["k"])(b["g"],v,f,""):(v==l||v==h)&&(a+=Object(g["k"])(b["m"],v,f,"")))}return'<div style="width:230px">'.concat(a,"</div>")},position:b["j"]}),legend:{data:[s,r,o,n,m,p,e],x:"left",selected:this.selectedLegend},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:0},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1,show:!0},data:this.recvtime,axisPointer:{type:"line",value:"",snap:!1,lineStyle:{color:"#7581BD",width:2},handle:{show:!0,color:"transparent"}}},yAxis:[{name:i,type:"value",nameTextStyle:10,nameGap:5,axisLabel:{formatter:"{value}"+u}},{name:e,type:"value",nameTextStyle:10,nameGap:2,axisLabel:{formatter:"{value}"+d},axisTick:{show:!1}}],series:[{name:t,type:"line",symbol:"none",xAxisIndex:0,color:"#F0805A",smooth:!0,data:this.recvtime},{name:e,type:"line",symbol:"none",yAxisIndex:1,smooth:!0,color:b["h"],data:this.veo},{smooth:!0,name:s,type:"line",symbol:"none",color:b["k"],data:this.temp1,yAxisIndex:0},{name:r,type:"line",symbol:"none",color:b["c"],data:this.temp2,yAxisIndex:0,smooth:!0},{smooth:!0,name:o,type:"line",symbol:"none",color:b["d"],data:this.temp3,yAxisIndex:0},{smooth:!0,name:n,type:"line",symbol:"none",color:b["e"],yAxisIndex:0,data:this.temp4},{name:m,type:"line",symbol:"none",yAxisIndex:0,color:b["f"],smooth:!0,data:this.averageTemp},{name:p,type:"line",symbol:"none",yAxisIndex:0,color:b["g"],smooth:!0,data:this.humi1s},{name:l,type:"line",symbol:"none",color:"#000",data:this.devStates,smooth:!0},{name:h,type:"line",symbol:"none",color:"#000",data:this.devReissue,smooth:!0},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp1?this.highests1:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp1?this.lowests1:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp2?this.highests2:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp2?this.lowests2:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp3?this.highests3:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp3?this.lowests3:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp4?this.highests4:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp4?this.lowests4:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},y=f,w=i("2877"),x=Object(w["a"])(y,h,d,!1,null,null,null),T=x.exports,F=i("1c31"),$=i("e285"),S=i("5101"),O=i("6e52"),_=i("7cf8"),D=i("a05b"),k={name:"tempAndHumi",data:function(){return{mode:1,deviceid:"",loading:!1,dialogMap:!1,exportLoading1:!1,loadingAddress:!1,dateRange:[new Date(S["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),new Date(S["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")],totalList:[],anomalyCount:0,intervalseconds:0,isShowSpeed:!1,isShowTemp:!1,isShowTemp1:!0,isShowTemp2:!1,isShowTemp3:!1,isShowTemp4:!1,isShowAverageTemp:!1,isShowHumi:!1,show:!1,messageBody:"",summaryData:{minTemp1:"-",maxTemp1:"-",minTemp2:"-",maxTemp2:"-",minTemp3:"-",maxTemp3:"-",minTemp4:"-",maxTemp4:"-",minHumi:"-",maxHumi:"-"}}},mixins:[D["a"]],components:{SingleChoiceVehicle:n["a"],SelectDate:m["a"],TempAndHumiEcharts:T,LabelWrap:p["a"],ReportMap:l["a"]},computed:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["isZh","singleDeviceid","permissionList","speedUnit","temperatureUnit"])),{},{isHasEditTemp:function(){return-1!=this.permissionList.indexOf("report-temperaturereports-edittemp")},tableTitle:function(){var e=O["a"].deviceInfos[this.deviceid];return e?e.devicename+"-"+this.deviceid:""},chartStyle:function(){var e=this.mode;return 1==e?{width:"100%",height:"300px"}:2==e?{width:"100%",height:"100%"}:{width:"100%",height:"300px"}},tableStyle:function(){var e=this.mode;return 1==e?{top:"304px"}:2==e?{top:"304px",display:"none"}:{top:"0px"}}}),watch:{mode:function(){var e=this;setTimeout((function(){e.$refs.echartsIns.resize()}),300)},dateRange:function(){this.loading||this.handleQuery()},deviceid:function(e){this.setSingleDeviceid(e),this.handleQuery()}},methods:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["setSingleDeviceid"])),{},{editClosedEvent:function(e){this.saveRowEvent(e.row)},numberToFixed2:g["qb"],seeMapPoint:function(e){var t=this;this.dialogMap=!0,setTimeout((function(){t.$refs.mapIns.singleMarkerToMap(e)}),300)},rowClassName:function(e){var t=e.row;e.rowIndex;return t.isSelected?"row--current":t.isYellow?"row-low-yellow":""},cellclick:function(e){var t=e.row;if("address"==e.column.property)this.seeMapPoint(t);else{var i=e.rowIndex,s=t.updatetimeStr;this.$refs.echartsIns.chartsIns.setOption({xAxis:{axisPointer:{value:s}}});var r=i;r>=0&&this.$refs.echartsIns.chartsIns.dispatchAction({type:"showTip",seriesIndex:2,dataIndex:r})}},saveRowEvent:function(e){var t=this;this.isEditing=!1;var i=JSON.parse(JSON.stringify(e));65535==i.tempOriginalValue1||536870911==i.tempOriginalValue1?(e.temp1="-",i.temp1=i.tempOriginalValue1):i.temp1=Number((100*Number(i.temp1)).toFixed(0)),65535==i.tempOriginalValue2||536870911==i.tempOriginalValue2?(e.temp2="-",i.temp2=i.tempOriginalValue2):i.temp2=Number((100*Number(i.temp2)).toFixed(0)),65535==i.tempOriginalValue3||536870911==i.tempOriginalValue3?(e.temp3="-",i.temp3=i.tempOriginalValue3):i.temp3=Number((100*Number(i.temp3)).toFixed(0)),65535==i.tempOriginalValue4||536870911==i.tempOriginalValue4?(e.temp4="-",i.temp4=i.tempOriginalValue4):i.temp4=Number((100*Number(i.temp4)).toFixed(0)),65535==i.humiOriginalValue1||536870911==i.humiOriginalValue1?(e.humi1="-",i.humi1=i.humiOriginalValue1):i.humi1=Number((100*Number(i.humi1)).toFixed(0)),Object(F["k"])(i).then((function(s){var r=s.status;s.cause;0==r?(e.temp1=i.temp1/100,Object($["Rb"])(i.deviceid).then((function(e){var i=e.temphumidetectorsetting;t.$refs.echartsIns.updateChartsOption(t.totalList,i)})),t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999})):(t.cancelRowEvent(e),t.$XModal.message({message:t.$t("tips.recordInUse"),status:"error",zIndex:9999}))}))},cellDblclick:function(e){var t=this,i=e.row,s={deviceid:this.deviceid,updatetime:i.updatetime,trackid:i.trackid};Object(F["u"])(s).then((function(e){t.messageBody=JSON.stringify(e.track),t.show=!0}))},queryAddress:function(e){var t=this,i=this.totalList,s=[];i.forEach((function(e){"-"==e.address&&s.push({lat:e.callat,lon:e.callon})})),this.loadingAddress=!0,Object(_["v"])(s).then((function(s){var r=s.points;t.loadingAddress=!1,r&&(r.forEach((function(e){e.address&&Object(g["rb"])({callat:e.lat,callon:e.lon},e.address)})),i.forEach((function(e){"-"==e.address&&(e.address=Object(g["I"])(e))}))),e&&e()})).catch((function(){t.loadingAddress=!1}))},tableScrollToRow:function(e){var t=this.totalList[e];this.$refs.xTable.scrollToRow(t),this.$refs.xTable.setCurrentRow(t)},onSelectedLegend:function(e){var t=this.$t("reportForm.speed"),i=this.$t("reportForm.temp"),s=this.$t("reportForm.temp1"),r=this.$t("reportForm.temp2"),a=this.$t("reportForm.temp3"),o=this.$t("reportForm.temp4"),n=this.$t("reportForm.averageTemp"),m=this.$t("reportForm.humi");this.isShowSpeed=e[t],this.isShowTemp=e[i],this.isShowTemp1=e[s],this.isShowTemp2=e[r],this.isShowTemp3=e[a],this.isShowTemp4=e[o],this.isShowAverageTemp=e[n],this.isShowHumi=e[m]},calcTempAndHumiValue:function(){var e=99999,t=-99999,i=99999,s=-99999,r=99999,a=-99999,o=99999,n=-99999,m=99999,p=-99999;this.totalList.forEach((function(l,h){if("-"!=l.temp1){var d=Number(l.temp1);d>t&&(t=d),d<e&&(e=d)}if("-"!=l.temp2){var u=Number(l.temp2);u>s&&(s=u),u<i&&(i=u)}if("-"!=l.temp3){var c=Number(l.temp3);c>a&&(a=c),c<r&&(r=c)}if("-"!=l.temp4){var v=Number(l.temp4);v>n&&(n=v),v<o&&(o=v)}var b="-"==l.humi1?l.humi1:Number(l.humi1);"-"!=b&&(b>p&&(p=b),b<m&&(m=b))})),-99999!=t&&99999!=e?(t=t.toFixed(2)+this.temperatureUnit,e=e.toFixed(2)+this.temperatureUnit):(t="-",e="-"),-99999!=s&&99999!=i?(s=s.toFixed(2)+this.temperatureUnit,i=i.toFixed(2)+this.temperatureUnit):(s="-",i="-"),-99999!=a&&99999!=r?(a=a.toFixed(2)+this.temperatureUnit,r=r.toFixed(2)+this.temperatureUnit):(a="-",r="-"),-99999!=n&&99999!=o?(n=n.toFixed(2)+this.temperatureUnit,o=o.toFixed(2)+this.temperatureUnit):(n="-",o="-"),-99999!=p&&99999!=m?(p=p.toFixed(1)+"%",m=m.toFixed(1)+"%"):(p="-",m="-"),this.summaryData.minTemp1=e,this.summaryData.maxTemp1=t,this.summaryData.minTemp2=i,this.summaryData.maxTemp2=s,this.summaryData.minTemp3=r,this.summaryData.maxTemp3=a,this.summaryData.minTemp4=o,this.summaryData.maxTemp4=n,this.summaryData.minHumi=m,this.summaryData.maxHumi=p},handleQuery:function(){var e=this,t=this.deviceid;if(t){var i=this.dateRange,s=S["a"].format(i[0],"yyyy-MM-dd HH:mm:ss"),r=S["a"].format(i[1],"yyyy-MM-dd HH:mm:ss"),a={begintime:s,endtime:r,timezone:S["a"].getOffset(),deviceids:[t],intervalseconds:this.intervalseconds,needaddress:1};this.loading=!0,this.queryDetailDateRange="".concat(s," - ").concat(r),Object(F["mb"])(a).then((function(i){var s=i.records,r=i.addressmap;e.loading=!1;var a=[],o=0;s&&s.forEach((function(e){var t=e.deviceid,i=O["a"].getDeviceNameByDeviceId(t),s=e.records;s&&s.sort((function(e,t){return e.updatetime-t.updatetime})),s.forEach((function(e){var s=0,o=0;if(e.deviceid=t,e.devicename=i,e.tempOriginalValue1=e.temp1,e.tempOriginalValue2=e.temp2,e.tempOriginalValue3=e.temp3,e.tempOriginalValue4=e.temp4,e.humiOriginalValue1=e.humi1,e.updatetimeStr=S["a"].longToLocalDateTimeStr(e.updatetime),e.speed=Number(Object(g["e"])(e.speed).toFixed(0)),65535!=e.temp1&&536870911!=e.temp1?(e.temp1=Object(g["f"])(e.temp1/100),s+=e.temp1,o++):e.temp1="-",65535!=e.temp2&&536870911!=e.temp2?(e.temp2=Object(g["f"])(e.temp2/100),s+=e.temp2,o++):e.temp2="-",65535!=e.temp3&&536870911!=e.temp3?(e.temp3=Object(g["f"])(e.temp3/100),s+=e.temp3,o++):e.temp3="-",65535!=e.temp4&&536870911!=e.temp4?(e.temp4=Object(g["f"])(e.temp4/100),s+=e.temp4,o++):e.temp4="-",e.humi1<0||e.humi1>1e3?e.humi1="-":e.humi1=(e.humi1/10).toFixed(1),0==o)e.averageTemp="-";else{var n=Object(g["f"])(s/o);e.averageTemp=n}var m=Object(g["L"])(r,e.callat,e.callon);e.address=m||"-",a.push(e)})),a.forEach((function(e,t){var i=a[t-1];i&&(e.isYellow=!1,i&&"-"!=i.temp1&&"-"!=e.temp1&&(e.isYellow=Math.abs(i.temp1-e.temp1)>=1),0==e.isYellow&&i&&"-"!=i.temp2&&"-"!=e.temp2&&(e.isYellow=Math.abs(i.temp2-e.temp2)>=1),0==e.isYellow&&i&&"-"!=i.temp3&&"-"!=e.temp3&&(e.isYellow=Math.abs(i.temp3-e.temp3)>=1),0==e.isYellow&&i&&"-"!=i.temp4&&"-"!=e.temp4&&(e.isYellow=Math.abs(i.temp4-e.temp4)>=1),e.isYellow&&o++)}))})),e.anomalyCount=o,e.totalList=a,e.calcTempAndHumiValue(),Object($["Rb"])(t).then((function(t){var i=t.temphumidetectorsetting;e.$refs.echartsIns.updateChartsOption(a,i)}))}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){var e=this;this.loadingAddress||(this.exportLoading1=!0,this.queryAddress((function(){if(e.exportLoading1=!1,e.totalList.length){var t=[[e.$t("reportForm.index"),e.$t("alarm.devName"),e.$t("alarm.devNum"),e.$t("reportForm.date")]],i=e.isShowSpeed,s=e.isShowTemp1,r=e.isShowTemp2,a=e.isShowTemp3,o=e.isShowTemp4,n=e.isShowAverageTemp,m=e.isShowHumi;i&&t[0].push(e.$t("reportForm.speed")),s&&t[0].push(e.$t("reportForm.temp1")+e.temperatureUnit),r&&t[0].push(e.$t("reportForm.temp2")+e.temperatureUnit),a&&t[0].push(e.$t("reportForm.temp3")+e.temperatureUnit),o&&t[0].push(e.$t("reportForm.temp4")+e.temperatureUnit),n&&t[0].push(e.$t("reportForm.averageTemp")+e.temperatureUnit),m&&t[0].push(e.$t("reportForm.humi")+"%"),t[0].push(e.$t("reportForm.address")),t[0].push(e.$t("monitor.coordinate"));var p="";e.totalList.forEach((function(e,l){0==l&&(p=e.deviceid);var h=[];h.push(l+1),h.push(e.devicename),h.push(e.deviceid),h.push(e.updatetimeStr),i&&h.push(Object(g["qb"])(e.speed)),s&&h.push(Object(g["qb"])(e.temp1)),r&&h.push(Object(g["qb"])(e.temp2)),a&&h.push(Object(g["qb"])(e.temp3)),o&&h.push(Object(g["qb"])(e.temp4)),n&&h.push(Object(g["qb"])(e.averageTemp)),m&&h.push(e.humi1),h.push(e.address),h.push(e.callon+","+e.callat),t.push(h)}));var l=O["a"].getDeviceNameByDeviceId(p),h=e.$refs.echartsIns.chartsIns.getDataURL({type:"png",pixelRatio:6,backgroundColor:"#fff"});try{var d={title:e.$t("reportForm.tempAndHumi"),data:t,devicename:l,deviceid:p,dateRange:e.queryDetailDateRange,imgData:{imgBase64:h,echartTitle:e.$t("device.tempAndHumidityCurve"),tableList:e.getImgDataList(p)}};new ExcelCls(d).exportExcel(e)}catch(u){console.log(u)}}})))},getImgDataList:function(e){var t=this.isShowTemp1,i=this.isShowTemp2,s=this.isShowTemp3,r=this.isShowTemp4,a=this.isShowHumi,o=O["a"].getDeviceNameByDeviceId(e),n=this.queryDetailDateRange.split(" - "),m=[];m.push([o+" - "+e+" "+this.$t("device.tempAndHumidityCurve")]),m.push([this.$t("alarm.devName"),o,this.$t("alarm.devNum"),e]),m.push([this.$t("videoback.startTime"),n[0],this.$t("videoback.endTime"),n[1]]),m.push([this.$t("reportForm.sensorType"),this.$t("reportForm.maxValue"),this.$t("reportForm.minValue"),this.$t("reportForm.averageValue")]);var p=null,l=null,h=null,d=null,u=null;return t&&(p=[this.$t("reportForm.temp1")],m.push(p)),i&&(l=[this.$t("reportForm.temp2")],m.push(l)),s&&(h=[this.$t("reportForm.temp3")],m.push(h)),r&&(d=[this.$t("reportForm.temp4")],m.push(d)),a&&(u=[this.$t("reportForm.humi")],m.push(u)),this.pushTempAndHumiValue(p,l,h,d,u),m},pushTempAndHumiValue:function(e,t,i,s,r){var a=this.isShowTemp1,o=this.isShowTemp2,n=this.isShowTemp3,m=this.isShowTemp4,p=this.isShowHumi,l=99999,h=-99999,d=0,u=[],c=99999,v=-99999,b=0,g=[],f=99999,y=-99999,w=0,x=[],T=99999,F=-99999,$=0,S=[],O=99999,_=-99999,D=0,k=[];this.totalList.forEach((function(e){if(a&&"-"!=e.temp1&&(e.temp1>h&&(h=e.temp1),e.temp1<l&&(l=e.temp1),u.push(e.temp1)),o&&"-"!=e.temp2&&(e.temp2>v&&(v=e.temp2),e.temp2<c&&(c=e.temp2),g.push(e.temp2)),n&&"-"!=e.temp3&&(e.temp3>y&&(y=e.temp3),e.temp3<f&&(f=e.temp3),x.push(e.temp3)),m&&"-"!=e.temp4&&(e.temp4>F&&(F=e.temp4),e.temp4<T&&(T=e.temp4),S.push(e.temp4)),p&&"-"!=e.humi1){var t=Number(e.humi1);t>_&&(_=t),t<O&&(O=t),k.push(t)}})),a&&(-99999!==h&&99999!==l?(h=h.toFixed(2)+this.temperatureUnit,l=l.toFixed(2)+this.temperatureUnit,d=this.calculateAverage(u),d=d.toFixed(2)+this.temperatureUnit):h=l=d="-",e.push(h),e.push(l),e.push(d)),o&&(-99999!==v&&99999!==c?(v=v.toFixed(2)+this.temperatureUnit,c=c.toFixed(2)+this.temperatureUnit,b=this.calculateAverage(g),b=b.toFixed(2)+this.temperatureUnit):v=c=b="-",t.push(v),t.push(c),t.push(b)),n&&(-99999!==y&&99999!==f?(y=y.toFixed(2)+this.temperatureUnit,f=f.toFixed(2)+this.temperatureUnit,w=this.calculateAverage(x),w=w.toFixed(2)+this.temperatureUnit):y=f=w="-",i.push(y),i.push(f),i.push(w)),m&&(-99999!==F&&99999!==T?(F=F.toFixed(2)+this.temperatureUnit,T=T.toFixed(2)+this.temperatureUnit,$=this.calculateAverage(S),$=$.toFixed(2)+this.temperatureUnit):F=T=$="-",s.push(F),s.push(T),s.push($)),p&&(-99999!==_&&99999!==O?(_=_.toFixed(1)+"%",O=O.toFixed(1)+"%",D=this.calculateAverage(k),D=D.toFixed(1)+"%"):_=O=D="-",r.push(_),r.push(O),r.push(D))},calculateAverage:function(e){if(0===e.length)return 0;var t=e.reduce((function(e,t){return e+t}),0),i=t/e.length;return i}}),mounted:function(){this.queryDetailDateRange=null,this.singleDeviceid&&(this.deviceid=this.singleDeviceid)}},C=k,I=(i("a1ae"),Object(w["a"])(C,s,r,!1,null,null,null)),j=I.exports;t["default"]=j},a1ae:function(e,t,i){"use strict";i("6c06")}}]);