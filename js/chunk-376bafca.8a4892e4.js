(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-376bafca"],{"0595":function(t,e,r){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(r){return e("div",{key:r.type,style:{color:r.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(r.type)}}},[t._v(t._s(r.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},a=[],o=r("5101"),l={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,r=[],i=new Date,a=new Date;switch(e&&(i=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:r=[new Date(o["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(a,"yyyy-MM-dd")+" 23:59:59")];break;case 1:i.setTime(i.getTime()-864e5),a.setTime(a.getTime()-864e5),r=[i,a];break;case 3:i.setTime(i.getTime()-2592e5),r=[i,a];break;case 7:i.setTime(i.getTime()-6048e5),r=[i,a];break;case 10:i.setTime(i.getTime()-864e6),r=[i,a];break;case 30:i.setTime(i.getTime()-2592e6),r=[i,a];break}this.type=t,this.$emit("input",r)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},n=l,s=(r("8d09"),r("2877")),c=Object(s["a"])(n,i,a,!1,null,null,null);e["a"]=c.exports},"3b13":function(t,e,r){},"57c9":function(t,e,r){"use strict";var i=r("0595");e["a"]=i["a"]},"5fdd":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[e("div",[e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading1,plain:""},on:{click:t.exportData},slot:"reference"},[t._v(t._s(t.$t("common.summary")))]),e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading2,plain:""},on:{click:t.exportDetailData},slot:"reference"},[t._v(t._s(t.$t("reportForm.detailed")))])],1),e("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("common.export")))])],1)],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"40px"}},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{border:"","expand-config":{accordion:!1},"sort-config":t.sortConfig,"menu-config":t.tableMenu,data:t.totalList,height:"auto",size:"mini"},on:{"menu-click":t.handleClickTableMenu,"cell-dblclick":t.cellDblclick}},[e("vxe-table-column",{attrs:{type:"seq",width:"60"}}),e("vxe-table-column",{attrs:{type:"expand",width:"36"},scopedSlots:t._u([{key:"content",fn:function(r){var i=r.row;return[[e("div",{staticStyle:{"padding-left":"60px"}},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-hover-row":"",height:i.tableHeight,data:i.records,size:"mini"},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"statisticsday",width:"120",title:t.$t("reportForm.date"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totaldistance",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.mileage")+t.distanceUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",width:"125",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.avgSpeed")+t.speedUnit,sortable:""}}),e("vxe-table-column",{attrs:{field:"totalaccStr",align:"right",width:"130",formatter:t.numberToFixed2,title:t.$t("reportForm.workingDuration")+"(H)",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaloil",align:"right",width:"120",formatter:t.numberToFixed2,title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"currenttotaloil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"100",title:t.$t("reportForm.currentTotaloil")}}),e("vxe-table-column",{attrs:{field:"totalidle",align:"right",formatter:t.numberToFixed2,width:"130",title:t.$t("home.idleDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",align:"right",formatter:t.numberToFixed2,width:"130",title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilperhour",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.fuelConsumptionHour"),sortable:""}}),e("vxe-table-column",{attrs:{field:"runoilper100km",align:"right",formatter:t.numberToFixed2,width:"130",title:t.$t("reportForm.runoilper100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilper100km",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.fuelConsumption100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.addnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.leaknotrunningad"),sortable:""}})],1)],1)]]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("reportForm.creater"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"parents-wrapper"},t._l(t.parentsList,(function(r){return e("div",{key:r.username},[t._v(t._s(r.username)+"("+t._s(r.usertypeStr)+")")])})),0),e("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(e){return t.queryParents(r.row.creater)}},slot:"reference"},[t._v(t._s(r.row.creater))])],1)]}}])}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"avgrunoilper100km",align:"right",formatter:t.numberToFixed2,sortable:"",width:"160",title:t.$t("reportForm.avgrunoilper100km")+"(L)"}}),e("vxe-table-column",{attrs:{field:"avgoilper100km",align:"right",formatter:t.numberToFixed2,sortable:"",width:"160",title:t.$t("reportForm.avgoilper100km")+"(L)"}}),e("vxe-table-column",{attrs:{field:"totalaccStr",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.workingDuration")+"(H)",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaloil",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalidle",align:"right",formatter:t.numberToFixed2,title:t.$t("home.idleDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",align:"right",formatter:t.numberToFixed2,title:t.$t("reportForm.idleOil"),sortable:""}})],1)],1)])])},a=[],o=r("5530"),l=(r("14d9"),r("4e82"),r("a9e3"),r("b680"),r("d3b7"),r("159b"),r("2f62")),n=r("e561"),s=r("d462"),c=r("57c9"),u=r("1c31"),d=r("5101"),p=r("6e52"),m=r("a05b"),h=r("0c87"),b=r("c276"),f={name:"dayTravelOil",data:function(){return{loading:!1,exportLoading1:!1,exportLoading2:!1,dateRange:[new Date,new Date],totalList:[],sortConfig:{sortMethod:function(t){var e=t.data,r=t.sortList,i=r[0],a=i.property,o=i.order,l=[];return l="totalaccStr"==a?"desc"===o?e.sort((function(t,e){return e.totalacc-t.totalacc})):"asc"===o?e.sort((function(t,e){return t.totalacc-e.totalacc})):e.sort():"durationidleStr"==a?"desc"===o?e.sort((function(t,e){return e.durationidle-t.durationidle})):"asc"===o?e.sort((function(t,e){return t.durationidle-e.durationidle})):e.sort():"parkTimeStr"==a?"desc"===o?e.sort((function(t,e){return e.parktime-t.parktime})):"asc"===o?e.sort((function(t,e){return t.parktime-e.parktime})):e.sort():"totalParkTime"==a?"desc"===o?e.sort((function(t,e){return e.gTotalParkTime-t.gTotalParkTime})):"asc"===o?e.sort((function(t,e){return t.gTotalParkTime-e.gTotalParkTime})):e.sort():"gTotalDurationIdle"==a?"desc"===o?e.sort((function(t,e){return e.gtotaldurationidle-t.gtotaldurationidle})):"asc"===o?e.sort((function(t,e){return t.gtotaldurationidle-e.gtotaldurationidle})):e.sort():"desc"===o?e.sort((function(t,e){var r=e[a]+"";return r.localeCompare(t[a])})):"asc"===o?e.sort((function(t,e){var r=t[a]+"";return r.localeCompare(e[a])})):e.sort(),l}}}},mixins:[m["a"],h["a"]],watch:{},components:{MultiChoiceVehicle:n["a"],SelectDate:s["a"],QuickTimeRange:c["a"]},computed:Object(o["a"])({},Object(l["b"])(["singleDeviceid","distanceUnit","speedUnit"])),methods:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["setSingleDeviceid"])),{},{numberToFixed2:b["qb"],cellDblclick:function(t){var e=t.row,r=this.$refs.xTable.isRowExpandByRow(e);this.$refs.xTable.setRowExpand(e,!r)},onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids,r=this.dateRange;if(e.length){var i=d["a"].format(r[0],"yyyy-MM-dd"),a=d["a"].format(r[1],"yyyy-MM-dd"),o={startday:i,endday:a,offset:d["a"].getOffset(),devices:e};this.loading=!0,Object(u["X"])(o).then((function(e){var r=e.records;t.startdayAndEndday=i==a?i:i+" - "+a,t.loading=!1;var o=[];r&&r.forEach((function(t){var e=t.deviceid,r=p["a"].deviceInfos[e].devicename,i=p["a"].deviceInfos[e].creater,a=p["a"].deviceInfos[e].groupname;t.devicename=r,t.creater=i,t.groupname=a,t.totalacc=0,t.totaloil=0,t.totalidle=0,t.addoil=0,t.leakoil=0,t.idleoil=0,t.records.forEach((function(o){o.deviceid=e,o.devicename=r,o.creater=i,o.groupname=a;var l=o.totalacc/1e3/3600;o.idleoil=o.idleoil/100,o.runoilper100km=o.runoilper100km,o.totaldistance=Object(b["d"])(o.totaldistance),o.totalaccStr=l,o.totaloil=o.totaloil/100,o.addoil=o.addoil/100,o.leakoil=o.leakoil/100,o.totalnotrunningad=o.totalnotrunningad/100,o.addnotrunningad=o.addnotrunningad/100,o.leaknotrunningad=o.leaknotrunningad/100,o.oilperhour=o.oilperhour,o.currenttotaloil=o.endoil/100;var n=o.totalidle/1e3/3600;o.totalidle=n,o.avgspeed=Object(b["e"])(1e3*o.avgspeed).toFixed(2),0==o.totaldistance||0==o.totalacc?o.averagespeed=0:o.averagespeed=o.totaldistance/l,t.totalacc+=Number(l),t.totaloil+=Number(o.totaloil),t.totalidle+=Number(o.totalidle),t.addoil+=Number(o.addoil),t.leakoil+=Number(o.leakoil),t.idleoil+=Number(o.idleoil)})),t.totalacc=t.totalacc,t.totaloil=t.totaloil,t.totalidle=t.totalidle,t.addoil=t.addoil,t.leakoil=t.leakoil,t.idleoil=t.idleoil,t.avgrunoilper100km=t.avgrunoilper100km,t.avgoilper100km=t.avgoilper100km,0==t.records.length?t.tableHeight=72:t.tableHeight=36*t.records.length+36,t.tableHeight+=10,t.totalaccStr=t.totalacc,o.push(t)})),t.totalList=o}))}},exportData:function(){if(this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.avgrunoilper100km")+"(L)",this.$t("reportForm.avgoilper100km")+"(L)",this.$t("reportForm.workingDuration")+"(H)",this.$t("reportForm.oilConsumption"),this.$t("reportForm.idleDuration"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil")]],e=this.$refs.xTable.getTableData().visibleData;e.forEach((function(e,r){var i=[];i.push(r+1),i.push(e.devicename),i.push(e.deviceid),i.push(e.creater),i.push(e.groupname),i.push(Object(b["qb"])(e.avgrunoilper100km)),i.push(Object(b["qb"])(e.avgoilper100km)),i.push(Object(b["qb"])(e.totalaccStr)),i.push(Object(b["qb"])(e.totaloil)),i.push(Object(b["qb"])(e.totalidle)),i.push(Object(b["qb"])(e.addoil)),i.push(Object(b["qb"])(e.leakoil)),i.push(Object(b["qb"])(e.idleoil)),t.push(i)}));var r={title:this.$t("reportForm.dayTravelOil")+" "+this.startdayAndEndday,data:t};this.exportLoading1=!0,new ExcelCls(r).exportExcel(this)}},exportDetailData:function(){if(this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("reportForm.date"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.mileage")+this.distanceUnit,this.$t("reportForm.avgSpeed")+this.speedUnit,this.$t("reportForm.workingDuration"),this.$t("reportForm.oilConsumption"),this.$t("reportForm.currentTotaloil"),this.$t("reportForm.idleDuration"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.fuelConsumptionHour"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad")]],e=this.$refs.xTable.getTableData().visibleData;e.forEach((function(e){if(e.records.forEach((function(e,r){var i=[];i.push(r+1),i.push(e.statisticsday),i.push(e.devicename),i.push(e.deviceid),i.push(Object(b["qb"])(e.totaldistance)),i.push(Object(b["qb"])(e.avgspeed)),i.push(Object(b["qb"])(e.totalaccStr)),i.push(Object(b["qb"])(e.totaloil)),i.push(Object(b["qb"])(e.currenttotaloil)),i.push(Object(b["qb"])(e.totalidle)),i.push(Object(b["qb"])(e.addoil)),i.push(Object(b["qb"])(e.leakoil)),i.push(Object(b["qb"])(e.idleoil)),i.push(Object(b["qb"])(e.oilperhour)),i.push(Object(b["qb"])(e.runoilper100km)),i.push(Object(b["qb"])(e.oilper100km)),i.push(Object(b["qb"])(e.totalnotrunningad)),i.push(Object(b["qb"])(e.addnotrunningad)),i.push(Object(b["qb"])(e.leaknotrunningad)),t.push(i)})),0==e.records.length){var r=[];r.push("1"),r.push(e.devicename),r.push(e.deviceid),r.push(e.creater),r.push(e.groupname),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),r.push("0"),t.push(r)}else{r=[];r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(Object(b["qb"])(e.totalaccStr)),r.push(Object(b["qb"])(e.totaloil)),r.push(""),r.push(Object(b["qb"])(e.totalidle)),r.push(Object(b["qb"])(e.addoil)),r.push(Object(b["qb"])(e.leakoil)),r.push(Object(b["qb"])(e.idleoil)),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),t.push(r)}r=[];r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),r.push(""),t.push(r)}));var r={title:this.$t("reportForm.dayTravelOil")+" "+this.startdayAndEndday,data:t};this.exportLoading2=!0,new ExcelCls(r).exportExcel(this)}}}),mounted:function(){this.deviceids=[]}},g=f,v=(r("9cc8"),r("2877")),x=Object(v["a"])(g,i,a,!1,null,null,null),k=x.exports;e["default"]=k},7031:function(t,e,r){"use strict";r("3b13")},"8d09":function(t,e,r){"use strict";r("a818")},"9cc8":function(t,e,r){"use strict";r("b110")},a818:function(t,e,r){},b110:function(t,e,r){},e561:function(t,e,r){"use strict";var i=r("ea22");e["a"]=i["a"]},ea22:function(t,e,r){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},a=[],o=r("5530"),l=(r("4795"),r("2f62")),n=r("2df7"),s={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(o["a"])({},Object(l["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:n["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},c=s,u=(r("7031"),r("2877")),d=Object(u["a"])(c,i,a,!1,null,null,null);e["a"]=d.exports}}]);