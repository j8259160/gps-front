(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6669e9ac"],{"0595":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(i){return e("div",{key:i.type,style:{color:i.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(i.type)}}},[t._v(t._s(i.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},s=[],r=i("5101"),o={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,i=[],a=new Date,s=new Date;switch(e&&(a=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),s=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:i=[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(s,"yyyy-MM-dd")+" 23:59:59")];break;case 1:a.setTime(a.getTime()-864e5),s.setTime(s.getTime()-864e5),i=[a,s];break;case 3:a.setTime(a.getTime()-2592e5),i=[a,s];break;case 7:a.setTime(a.getTime()-6048e5),i=[a,s];break;case 10:a.setTime(a.getTime()-864e6),i=[a,s];break;case 30:a.setTime(a.getTime()-2592e6),i=[a,s];break}this.type=t,this.$emit("input",i)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},n=o,l=(i("8d09"),i("2877")),d=Object(l["a"])(n,a,s,!1,null,null,null);e["a"]=d.exports},1633:function(t,e,i){},"3b13":function(t,e,i){},"41da":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"full",attrs:{id:t.chartId}})},s=[],r=i("ade3"),o=i("5530"),n=(i("14d9"),i("b0c0"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("43c8")),l=i.n(n),d=i("5aff"),c=i("c276"),h=i("2f62"),m={name:"TravelEchart",computed:Object(o["a"])(Object(o["a"])({},Object(h["b"])(["distanceUnit","speedUnit"])),{},{chartId:function(){return"chart_".concat(this._uid)}}),methods:{initChart:function(){var t=this;this.disMin=0,this.distance=[],this.recvtime=[],this.veo=[],this.totalad=[],this.notRunOil=[],this.oil1=[],this.oil2=[],this.oil3=[],this.oil4=[],this.devStates=[],this.devReissue=[];var e=this.$t("reportForm.oil1"),i=this.$t("reportForm.oil2"),a=this.$t("reportForm.oil3"),s=this.$t("reportForm.oil4");this.selectedLegend=Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},e,!1),i,!1),a,!1),s,!1),this.chartsIns=l.a.init(document.getElementById(this.chartId)),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.on("legendselectchanged",(function(e){t.selectedLegend=e.selected})),this.chartsIns.getZr().on("click",(function(e){var i=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",i)&&t.recvtime.length){var a=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0],s=t.records[a];t.$emit("select-point",s)}}))},resize:function(){this.chartsIns.resize()},updateChartsOption:function(t){var e=this,i=this,a=t,s=[],r=[],o=[],n=[],l=[],d=[],h=[],m=[],u=[],p=[],f=[];this.disMin=0;var v=0;a.forEach((function(t,a){t.totaldistance=t.totaldistance,0==a&&(v=t.totaldistance),d.push(t.ad0/100),h.push(t.ad1/100),m.push(t.ad2/100),u.push(t.ad3/100),p.push(t.strstatus),f.push(0==t.reissue?i.$t("header.no"):i.$t("header.yes")),n.push(t.totalad/100),l.push(t.totalnotrunningad/100),r.push(e.$dateformat.longToLocalDateTimeStr(t.updatetime)),o.push(Number(Object(c["e"])(t.speed).toFixed(0))),s.push(Number(Object(c["d"])(t.totaldistance-v).toFixed(3)))})),this.records=a,this.distance=s,this.recvtime=r,this.veo=o,this.totalad=n,this.notRunOil=l,this.oil1=d,this.oil2=h,this.oil3=m,this.oil4=u,this.devStates=p,this.devReissue=f,this.chartsIns.setOption(this.getChartsOption(),!0)},getChartsOption:function(){var t=this.distanceUnit,e=this.speedUnit,i=this.$t("reportForm.totalOil"),a=this.$t("reportForm.notRunTotalad"),s=this.$t("reportForm.speed"),r=this.$t("reportForm.mileage"),n=this.$t("reportForm.time"),l=this.$t("reportForm.oil1"),h=this.$t("reportForm.oil2"),m=this.$t("reportForm.oil3"),u=this.$t("reportForm.oil4"),p=this.$t("reportForm.status"),f=this.$t("reportForm.reissue");return{grid:{top:40,left:60,right:60,bottom:20},tooltip:Object(o["a"])(Object(o["a"])({trigger:"axis"},d["a"]),{},{formatter:function(o){var p="<div>".concat(o[0].name,"</div>");for(var f in o){var v=o[f].seriesName,g=o[f].value;v&&v!=n&&(p+=v==r?Object(c["k"])(d["b"],v,g,t):v==s?Object(c["k"])(d["h"],v,g,e):v==i?Object(c["k"])(d["k"],v,g,"L"):v==a?Object(c["k"])(d["c"],v,g,"L"):v==l?Object(c["k"])(d["d"],v,g,""):v==h?Object(c["k"])(d["e"],v,g,""):v==m?Object(c["k"])(d["f"],v,g,""):v==u?Object(c["k"])(d["g"],v,g,""):Object(c["k"])(d["m"],v,g,""))}return'<div style="width:230px">'.concat(p,"</div>")},position:d["j"]}),legend:{data:[s,r,i,a,l,h,m,u],selected:this.selectedLegend,x:"left"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:s+e,type:"value",nameTextStyle:10,nameGap:5,axisLabel:{formatter:"{value}"}},{name:r+t,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value}"},axisTick:{show:!1}}],series:[{name:n,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:s,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:d["h"],data:this.veo},{name:r,type:"line",symbol:"none",yAxisIndex:1,color:d["b"],smooth:!0,data:this.distance},{smooth:!0,name:i,type:"line",symbol:"none",color:d["k"],data:this.totalad,markPoint:{data:this.markPointData,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:a,type:"line",symbol:"none",color:d["c"],data:this.notRunOil,markPoint:{data:this.markPointDataOil99,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:l,type:"line",symbol:"none",color:d["d"],data:this.oil1,markPoint:{data:this.markPointDataOil1,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:h,type:"line",symbol:"none",color:d["e"],data:this.oil2,markPoint:{data:this.markPointDataOil2,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:m,type:"line",symbol:"none",color:d["f"],data:this.oil3,markPoint:{data:this.markPointDataOil3,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:u,type:"line",symbol:"none",color:d["g"],data:this.oil4,markPoint:{data:this.markPointDataOil4,symbolSize:36,symbolKeepAspect:!0}},{smooth:!0,name:p,type:"line",symbol:"none",color:d["m"],data:this.devStates},{smooth:!0,name:f,type:"line",symbol:"none",color:d["m"],data:this.devReissue}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},u=m,p=i("2877"),f=Object(p["a"])(u,a,s,!1,null,null,null);e["a"]=f.exports},5676:function(t,e,i){},"57c9":function(t,e,i){"use strict";var a=i("0595");e["a"]=a["a"]},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"h",(function(){return s})),i.d(e,"l",(function(){return r})),i.d(e,"k",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return d})),i.d(e,"f",(function(){return c})),i.d(e,"g",(function(){return h})),i.d(e,"m",(function(){return m})),i.d(e,"i",(function(){return u})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return f}));var a="#2D9F28",s="#89C6F2",r="#FFC65E",o="red",n="#1EBEFF",l="#E505F7",d="#40A703",c="#F27908",h="#F180D1",m="#0F1F46",u="#000000",p={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(t,e,i,a,s){var r=t[0],o=s.contentSize,n=s.viewSize;return r+10>n[0]-o[0]?r=r-o[0]-10:r+=10,[r,"0%"]}},6267:function(t,e,i){"use strict";i("1633")},"632c":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(t.prefix,"-left-area"),style:{width:t.leftSize}},[t._t("left")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.horizontalTriggerStyle},[e("div",{staticClass:"split-pane-trigger-btn",on:{click:t.onClickHorizontal}}),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-right-area"),style:{width:t.horizontalModeShowLeft?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:t.onClickHorizontal,mouseenter:t.onClickHorizontal}},[e("div",{staticClass:"split-pane-right-btn-wrapper"})]),t._t("right")],2)],2):e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(t.prefix,"-top-area"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==t.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("top")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:"move"==t.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-btn")},[e("div",{on:{click:function(e){return t.setVerticalMode("top")}}}),e("div",{on:{click:function(e){return t.setVerticalMode("bottom")}}})]),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"top"==t.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("bottom")],2)],2)])},s=[],r=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),o={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return r(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(t){this.$emit("on-resize",t)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-e;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(i("9526"),i("2877")),d=Object(l["a"])(n,a,s,!1,null,null,null),c=d.exports;e["a"]=c},7031:function(t,e,i){"use strict";i("3b13")},7604:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full travel-vehicle"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"170px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.minSpeed")}},[e("el-select",{model:{value:t.speed,callback:function(e){t.speed=e},expression:"speed"}},t._l(t.optionList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"tabTotal"==t.activeName,expression:"activeName == 'tabTotal'"}],staticClass:"f_left"},[e("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[e("div",[e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading1,plain:""},on:{click:t.exportDetailData},slot:"reference"},[t._v(t._s(t.$t("reportForm.onlySummary")))]),e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading,plain:""},on:{click:t.exportAllData},slot:"reference"},[t._v(t._s(t.$t("reportForm.SummaryAndDetail")))])],1),e("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("common.export")))])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName == 'details'"}],staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.exportDetailData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticClass:"report-form-inner-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.drivingStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"",name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName == 'details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v("("+t._s(t.detailsList.length)+")")])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("common.sn")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"starttimeStr",title:t.$t("reportForm.startTime"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",title:t.$t("reportForm.endTime"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationtime",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.travelTime")+"(H)",width:"110",sortable:""}}),e("vxe-table-column",{attrs:{field:"startdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"enddistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.durationDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.avgSpeed")+t.speedUnit,width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"maxspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.maxSpeed")+t.speedUnit,width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"startaddress",title:t.$t("reportForm.startAddress"),width:"250"}}),e("vxe-table-column",{attrs:{field:"endaddress",title:t.$t("reportForm.endAddress"),width:"250"}})],1)],1),e("div",{staticClass:"travel-vehicle-content-details",style:t.detailsStyle},[e("div",[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",loading:t.detaileLoading,data:t.detailsList,"row-config":{isCurrent:!0,isHover:!0}},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.cellClickEvent,"current-change":t.currentChangeEvent}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("common.sn")}}),e("vxe-table-column",{attrs:{field:"starttimeStr",title:t.$t("reportForm.startTime"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",title:t.$t("reportForm.endTime"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationtime",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.travelTime")+"(H)",width:"110",sortable:""}}),e("vxe-table-column",{attrs:{field:"startdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"enddistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.durationDistance")+t.distanceUnit,width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.avgSpeed")+t.speedUnit,width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"maxspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.maxSpeed")+t.speedUnit,width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"startaddress",title:t.$t("reportForm.startAddress")}}),e("vxe-table-column",{attrs:{field:"endaddress",title:t.$t("reportForm.endAddress")}})],1)],1),e("div",[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"1200"},on:{"on-resize":t.onResize,"on-resizing-end":t.onResizingEnd},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"left"},slot:"left"},[e("ReportMap",{ref:"reportMap"})],1),e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"right"},slot:"right"},[e("TravelEchart",{ref:"echartsIns"})],1)])],1)])])],1)])},s=[],r=i("5530"),o=(i("14d9"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("6e52")),n=i("201d"),l=i("e561"),d=i("d462"),c=i("80f4"),h=i("57c9"),m=i("632c"),u=i("41da"),p=i("7cf8"),f=i("1c31"),v=i("5101"),g=i("4c3c"),b=i("a05b"),x=i("c276"),y=i("2f62"),$={name:"travelVehicle",data:function(){return{tableTitle:"",speed:"5",offsetVertical:Number(50),optionList:[],activeName:"tabTotal",loading:!1,exportLoading1:!1,horizontalModeShowLeft:!0,detaileLoading:!1,exportLoading:!1,dateRange:[new Date,new Date],totalList:[],detailsList:[]}},mixins:[g["a"],b["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},components:{MultiChoiceVehicle:l["a"],SelectDate:d["a"],ReportMap:c["a"],TravelEchart:u["a"],QuickTimeRange:h["a"],LabelWrap:n["a"],SplitPane:m["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(y["b"])(["distanceUnit","speedUnit"])),{},{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?99:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?99:0}}}),methods:{numberToFixed2:x["qb"],onResizingEnd:function(){this.onResize(this.horizontalModeShowLeft)},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){e.$refs.echartsIns.resize()}),300)},currentChangeEvent:function(t){t.row},cellClickEvent:function(t){var e=this,i=t.row.data;Object(p["Z"])(i).then((function(t){t.status;var i=t.records;i=i||[],e.$refs.reportMap.markersAndLineLayerToMap(i),e.$refs.echartsIns.updateChartsOption(i)})).catch((function(t){console.log(t)}))},handleClickRow:function(t){var e=this,i=t.devicename,a=t.deviceid,s=t.data;this.detailsList=[],this.tableTitle=i+"-"+a,this.activeName="details",this.detaileLoading=!0,s.offset=v["a"].getOffset(),s.limitspeed=Number(this.speed),Object(f["M"])(s).then((function(t){var r=t.status,o=t.summaries;if(e.detaileLoading=!1,e.queryDetailDateRange=s.startday+" "+s.endday,0==r){var n=o[0];if(n.records&&(n.records.forEach((function(t){t.deviceid=a,t.devicename=i,t.starttimeStr=t.starttime>0?e.$dateformat.longToLocalDateTimeStr(t.starttime):"-",t.endtimeStr=t.endtime>0?e.$dateformat.longToLocalDateTimeStr(t.endtime):"-",t.durationtime=t.durationtime/1e3/3600,t.startdistance=Object(x["d"])(t.startdistance),t.enddistance=Object(x["d"])(t.enddistance),t.durationdistance=Object(x["d"])(t.durationdistance),t.avgspeed=Object(x["e"])(t.avgspeed),t.maxspeed=Object(x["e"])(t.maxspeed),t.start_lon_lat=t.slon.toFixed(5)+","+t.slat.toFixed(5),t.end_lon_lat=t.elon.toFixed(5)+","+t.elat.toFixed(5);var r=t.starttime,o=t.endtime;t.data={deviceid:a,begintimeutclong:r,endtimeutclong:o,begintime:t.starttimeStr,endtime:t.endtimeStr,timezone:s.offset}})),e.detailsList=n.records),e.detailsList.length>0){var l=e.detailsList[0];e.$refs.xTable.setCurrentRow(l),e.cellClickEvent({row:l,rowIndex:0})}else e.$XModal.message({message:e.$t("tips.noData"),status:"error",zIndex:9999})}else e.$XModal.message({message:e.$t("tips.selectDevice"),status:"error",zIndex:9999})})).catch((function(t){e.detaileLoading=!1}))},handleQuery:function(){var t=this,e=this.deviceids,i=this.dateRange;if(0!=e.length)if(0!=i.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var a=this.$dateformat.format(i[0],"yyyy-MM-dd"),s=this.$dateformat.format(i[1],"yyyy-MM-dd"),r={startday:a,endday:s,offset:v["a"].getOffset(),deviceids:e,limitspeed:Object(x["Mb"])(Number(this.speed)),reporttype:0};this.loading=!0,Object(f["M"])(r).then((function(e){var i=e.status,a=e.summaries;if(t.queryDetailDateRange=r.startday+" "+r.endday,0==i){var s=o["a"].deviceInfos;a.forEach((function(e){var i=e.deviceid,a=s[i].devicename;e.devicename=a,e.starttimeStr=e.starttime>0?t.$dateformat.longToLocalDateTimeStr(e.starttime):"-",e.endtimeStr=e.endtime>0?t.$dateformat.longToLocalDateTimeStr(e.endtime):"-",e.durationtime=e.durationtime/1e3/3600,e.startdistance=Object(x["d"])(e.startdistance),e.enddistance=Object(x["d"])(e.enddistance),e.durationdistance=Object(x["d"])(e.durationdistance),e.avgspeed=Object(x["e"])(e.avgspeed),e.maxspeed=Object(x["e"])(e.maxspeed),e.start_lon_lat=e.slon.toFixed(5)+","+e.slat.toFixed(5),e.end_lon_lat=e.elon.toFixed(5)+","+e.elat.toFixed(5),e.data={deviceids:[i],reporttype:1,startday:e.starttimeStr,endday:e.endtimeStr,offset:r.offset}})),t.totalList=a}else t.$XModal.message({message:t.$t("tips.networkError"),status:"error",zIndex:9999});t.loading=!1})).catch((function(e){t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSelectDevice:function(t){this.deviceids=t},exportDetailData:function(){var t=this.deviceids,e=this.dateRange;if(0!=t.length)if(0!=e.length)if("tabTotal"==this.activeName){var i=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.travelTime")+"(H)",this.$t("reportForm.startDistance")+this.distanceUnit,this.$t("reportForm.endDistance")+this.distanceUnit,this.$t("reportForm.durationDistance")+this.distanceUnit,this.$t("reportForm.avgSpeed")+this.speedUnit,this.$t("reportForm.maxSpeed")+this.speedUnit,this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],a=null;if(0==this.totalList.length)return;this.totalList.forEach((function(t,e){null==a&&(a=t.devicename);var s=[];s.push(e+1),s.push(t.devicename),s.push(t.deviceid),s.push(t.starttimeStr),s.push(t.endtimeStr),s.push(Object(x["qb"])(t.durationtime)),s.push(Object(x["qb"])(t.startdistance)),s.push(Object(x["qb"])(t.enddistance)),s.push(Object(x["qb"])(t.durationdistance)),s.push(Object(x["qb"])(t.avgspeed)),s.push(Object(x["qb"])(t.maxspeed)),s.push(null!=t.startaddress?t.startaddress:""),s.push(null!=t.endaddress?t.endaddress:""),s.push(t.slon+","+t.slat),s.push(t.elon+","+t.elat),i.push(s)}));var s=this.$t("reportForm.travelReport")+"-";1==this.totalList.length?s+=a:s+=this.$t("bgManage.tower",{count:this.totalList.length});var r={title:s,data:i,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(r).exportExcel(this)}else{i=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.travelTime")+"(H)",this.$t("reportForm.durationDistance")+this.distanceUnit,this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.startDistance")+this.distanceUnit,this.$t("reportForm.endDistance")+this.distanceUnit,this.$t("reportForm.avgSpeed")+this.speedUnit,this.$t("reportForm.maxSpeed")+this.speedUnit,this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]];var o="";if(0==this.detailsList.length)return;this.detailsList.forEach((function(t,e){var a=[];o=t.devicename,a.push(e+1),a.push(t.devicename),a.push(t.deviceid),a.push(Object(x["qb"])(t.durationtime)),a.push(Object(x["qb"])(t.durationdistance)),a.push(t.starttimeStr),a.push(t.endtimeStr),a.push(Object(x["qb"])(t.startdistance)),a.push(Object(x["qb"])(t.enddistance)),a.push(Object(x["qb"])(t.avgspeed)),a.push(Object(x["qb"])(t.maxspeed)),a.push(t.startaddress),a.push(t.endaddress),a.push(t.start_lon_lat),a.push(t.end_lon_lat),i.push(a)}));r={title:this.$t("reportForm.travelDetail"),devicename:o,data:i,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(r).exportExcel(this)}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportAllData:function(){var t=this,e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.duration")+"(H)",this.$t("monitor.total")+this.$t("reportForm.durationDistance")+this.distanceUnit,this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.durationDistance")+this.distanceUnit,this.$t("reportForm.startDistance")+this.distanceUnit,this.$t("reportForm.endDistance")+this.distanceUnit,this.$t("reportForm.avgSpeed")+this.speedUnit,this.$t("reportForm.maxSpeed")+this.speedUnit,this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],i=this.deviceids,a=this.dateRange;if(0!=i.length)if(0!=a.length){"tabDetails"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var s=this.$dateformat.format(a[0],"yyyy-MM-dd"),r=this.$dateformat.format(a[1],"yyyy-MM-dd"),n={startday:s+" 00:00:00",endday:r+" 23:59:59",offset:this.$dateformat.getOffset(),deviceids:i,limitspeed:Number(this.speed),reporttype:1},l=this.$t("reportForm.drivingStatistics");i.length>1?l+="-"+this.$t("bgManage.tower",{count:i.length}):l+="-"+o["a"].getDeviceNameByDeviceId(i[0]);var d={title:l,dateRange:s+" "+r},c=this.$dateformat;this.exportLoading=!0,Object(f["M"])(n).then((function(i){var a=i.summaries;if(t.exportLoading=!1,null!=a){var s=[],r=3;a.forEach((function(t,i){var a=t.records,n=t.deviceid,l=o["a"].getDeviceNameByDeviceId(n);if(t.devicename=l,null!=a&&a.length>0){t.starttimeStr=c.longToLocalDateTimeStr(t.starttime),t.endtimeStr=c.longToLocalDateTimeStr(t.endtime),t.durationtime=Object(x["qb"])(t.durationtime/1e3/3600),t.durationdistance=Object(x["qb"])(Object(x["d"])(t.durationdistance));var d=r,h=r;a.forEach((function(a){a.starttimeStr=c.longToLocalDateTimeStr(a.starttime),a.endtimeStr=c.longToLocalDateTimeStr(a.endtime),a.durationtime=Object(x["qb"])(a.durationtime/1e3/3600),a.startdistance=Object(x["qb"])(Object(x["d"])(a.startdistance)),a.enddistance=Object(x["qb"])(Object(x["d"])(a.enddistance)),a.durationdistance=Object(x["qb"])(Object(x["d"])(a.durationdistance)),a.avgspeed=Object(x["qb"])(Object(x["e"])(a.avgspeed)),a.maxspeed=Object(x["qb"])(Object(x["e"])(a.maxspeed)),a.start_lon_lat=a.slon.toFixed(5)+","+a.slat.toFixed(5),a.end_lon_lat=a.elon.toFixed(5)+","+a.elat.toFixed(5);var s=[];s.push(i+1),s.push(t.devicename),s.push(t.deviceid),s.push(t.durationtime),s.push(t.durationdistance),s.push(a.starttimeStr),s.push(a.endtimeStr),s.push(a.durationdistance),s.push(a.startdistance),s.push(a.enddistance),s.push(a.avgspeed),s.push(a.maxspeed),s.push(a.startaddress),s.push(a.endaddress),s.push(a.start_lon_lat),s.push(a.end_lon_lat),e.push(s),r++,h++}));var m={s:{r:d,c:0},e:{r:h-1,c:0}};s.push(m),m={s:{r:d,c:1},e:{r:h-1,c:1}},s.push(m),m={s:{r:d,c:2},e:{r:h-1,c:2}},s.push(m),m={s:{r:d,c:3},e:{r:h-1,c:3}},s.push(m),m={s:{r:d,c:4},e:{r:h-1,c:4}},s.push(m)}else{var u=[];u.push(i+1),u.push(t.devicename),u.push(t.deviceid),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push("-"),u.push("-"),u.push("-"),u.push("-"),e.push(u),r++}})),d.merges=s}d.data=e,new ExcelCls(d).exportExcel(t)}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}},mounted:function(){var t=this.$store.state.userSetting.unit_speed;this.deviceids=[],this.optionList=[{label:"0"+t,value:"0"},{label:"5"+t,value:"5"},{label:"10"+t,value:"10"},{label:"20"+t,value:"20"},{label:"30"+t,value:"30"},{label:"40"+t,value:"40"},{label:"50"+t,value:"50"},{label:"60"+t,value:"60"},{label:"70"+t,value:"70"}]}},w=$,F=(i("6267"),i("2877")),S=Object(F["a"])(w,a,s,!1,null,null,null),O=S.exports;e["default"]=O},"80f4":function(t,e,i){"use strict";var a=i("32eb");e["a"]=a["a"]},"8d09":function(t,e,i){"use strict";i("a818")},9526:function(t,e,i){"use strict";i("5676")},a818:function(t,e,i){},e561:function(t,e,i){"use strict";var a=i("ea22");e["a"]=a["a"]},ea22:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},s=[],r=i("5530"),o=(i("4795"),i("2f62")),n=i("2df7"),l={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(r["a"])({},Object(o["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:n["a"]},methods:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},d=l,c=(i("7031"),i("2877")),h=Object(c["a"])(d,a,s,!1,null,null,null);e["a"]=h.exports}}]);