(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49846aa3"],{"13a1":function(t,e,i){},1665:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full tempHumiMonth"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:t.deviceid,callback:function(e){t.deviceid=e},expression:"deviceid"}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"100px"}},[e("el-select",{model:{value:t.tempindex,callback:function(e){t.tempindex=e},expression:"tempindex"}},t._l(t.tempIndexList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query"))+" ")])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[e("div",[e("div",{staticStyle:{"padding-bottom":"5px"}},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,"highlight-current-row":"","auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-hover-row":"",height:"auto",data:t.detaileList,size:"mini"},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.handleClickRow}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{fixed:"left",field:"statisticsday",width:"280",sortable:"",title:t.$t("reportForm.time")}}),e("vxe-table-column",{attrs:{field:"devicename",width:"120",sortable:"",title:t.$t("alarm.devName")}}),e("vxe-table-column",{attrs:{field:"tempIndexStr",sortable:"",width:"90",title:t.$t("reportForm.tempIndex")}}),e("vxe-table-column",{attrs:{field:"alarmstatus",sortable:"",width:"80",title:t.$t("reportForm.status")}}),e("vxe-table-column",{attrs:{field:"stemp",formatter:t.numberToFixed2,align:"right",sortable:"",width:"120",title:t.$t("reportForm.beginTemp")+t.temperatureUnit}}),e("vxe-table-column",{attrs:{field:"etemp",formatter:t.numberToFixed2,align:"right",sortable:"",width:"120",title:t.$t("reportForm.endTemp")+t.temperatureUnit}}),e("vxe-table-column",{attrs:{field:"threshold",width:"100",sortable:"",title:t.$t("device.threshold")}}),e("vxe-table-column",{attrs:{field:"duration",align:"right",width:"120",sortable:"",title:t.$t("common.duration")}}),e("vxe-table-column",{attrs:{field:"distance",formatter:t.numberToFixed2,align:"right",width:"110",sortable:"",title:t.$t("reportForm.mileage")+t.distanceUnit}}),e("vxe-table-column",{attrs:{field:"address",title:t.$t("reportForm.address")}})],1)],1),e("div",{staticStyle:{"padding-top":"5px"}},[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"1200"},on:{"on-resize":t.onResize,"on-resizing-end":t.onResizingEnd},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"left"},slot:"left"},[e("ReportMap",{ref:"mapIns"})],1),e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"right"},slot:"right"},[e("TempHumiEcharts",{ref:"echartsIns"})],1)])],1)])])])])},o=[],s=i("5530"),n=(i("14d9"),i("3c65"),i("a9e3"),i("d3b7"),i("159b"),i("4795"),i("2f62")),a=i("d462"),l=i("d03a"),c=i("80f4"),h=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},d=[],m=i("ade3"),f=(i("b0c0"),i("b680"),i("43c8")),u=i.n(f),p=i("c276"),v=i("5101"),g=i("5aff"),b={name:"TempHumiEcharts",computed:Object(s["a"])({},Object(n["b"])(["isZh","temperatureUnit","speedUnit","distanceUnit"])),methods:{initChart:function(){this.distance=[],this.recvtime=[],this.veo=[],this.totalad=[],this.notRunOil=[],this.temp1=[],this.temp2=[],this.temp3=[],this.temp4=[],this.devStates=[],this.devReissue=[],this.disMin=0,this.totalDistanceMin=0;var t=this.$t("reportForm.temp2"),e=this.$t("reportForm.temp3"),i=this.$t("reportForm.temp4");this.selectedLegend=Object(m["a"])(Object(m["a"])(Object(m["a"])({},t,!1),e,!1),i,!1),this.chartsIns=u.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0)},updateChartsOption:function(t){var e=this,i=[],r=[],o=[],s=[],n=[],a=[],l=[],c=[],h=[],d=0;t.forEach((function(t,m){0==m&&(d=t.totaldistance),s.push(t.temp1<65535?Object(p["f"])(item.temp1/100):"-"),n.push(t.temp2<65535?Object(p["f"])(item.temp2/100):"-"),a.push(t.temp3<65535?Object(p["f"])(item.temp3/100):"-"),l.push(t.temp4<65535?Object(p["f"])(item.temp4/100):"-"),c.push(t.strstatus),h.push(0==t.reissue?e.$t("header.no"):e.$t("header.yes")),r.push(v["a"].longToLocalDateTimeStr(t.updatetime)),o.push(Number(Object(p["e"])(t.speed).toFixed(0))),i.push(Number((t.totaldistance-d).toFixed(3)))})),this.distance=i,this.recvtime=r,this.veo=o,this.temp1=s,this.temp2=n,this.temp3=a,this.temp4=l,this.devStates=c,this.devReissue=h,this.totalDistanceMin=d,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var t=this.$t("reportForm.speed"),e=this.$t("reportForm.mileage"),i=this.$t("reportForm.time"),r=this.$t("reportForm.temp1"),o=this.$t("reportForm.temp2"),n=this.$t("reportForm.temp3"),a=this.$t("reportForm.temp4"),l=this.$t("reportForm.status"),c=this.$t("reportForm.reissue"),h=this.temperatureUnit,d=this.distanceUnit,m=this.speedUnit;return{grid:{top:40,left:60,right:60,bottom:20},tooltip:Object(s["a"])(Object(s["a"])({trigger:"axis"},g["a"]),{},{formatter:function(s){var l="<div>".concat(s[0].name,"</div>");for(var c in s){var f=s[c].seriesName,u=s[c].value;f&&f!=i&&(l+=f==e?Object(p["k"])(g["b"],f,u,d):f==t?Object(p["k"])(g["h"],f,u,m):f==r?Object(p["k"])(g["d"],f,u,h):f==o?Object(p["k"])(g["e"],f,u,h):f==n?Object(p["k"])(g["f"],f,u,h):f==a?Object(p["k"])(g["g"],f,u,h):Object(p["k"])(g["m"],f,u,""))}return'<div style="width:230px">'.concat(l,"</div>")}}),legend:{data:[t,e,r,o,n,a],selected:this.selectedLegend,x:"left"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:t+m,type:"value",nameTextStyle:10,nameGap:5},{name:e+d,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisTick:{show:!1}}],series:[{name:i,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:t,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:g["h"],data:this.veo},{name:e,type:"line",symbol:"none",yAxisIndex:1,color:g["b"],smooth:!0,data:this.distance},{smooth:!0,name:r,type:"line",symbol:"none",color:g["d"],data:this.temp1},{smooth:!0,name:o,type:"line",symbol:"none",color:g["e"],data:this.temp2},{smooth:!0,name:n,type:"line",symbol:"none",color:g["f"],data:this.temp3},{smooth:!0,name:a,type:"line",symbol:"none",color:g["g"],data:this.temp4},{smooth:!0,name:l,type:"line",symbol:"none",color:g["m"],data:this.devStates},{smooth:!0,name:c,type:"line",symbol:"none",color:g["m"],data:this.devReissue}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},x=b,w=i("2877"),y=Object(w["a"])(x,h,d,!1,null,null,null),M=y.exports,O=i("1c31"),$=i("7cf8"),S=i("632c"),z=i("6e52"),T=i("a05b"),F={name:"tempHumiMonth",data:function(){return{deviceid:"",month:new Date,loading:!1,offsetVertical:Number(50),horizontalModeShowLeft:!0,exportLoading1:!1,detaileList:[],tempindex:0,tempIndexList:[]}},mixins:[T["a"]],components:{SingleChoiceVehicle:l["a"],SelectDate:a["a"],ReportMap:c["a"],TempHumiEcharts:M,SplitPane:S["a"]},watch:{month:function(){this.loading||this.handleQuery()},deviceid:function(t){this.setSingleDeviceid(t)}},computed:Object(s["a"])({},Object(n["b"])(["singleDeviceid","distanceUnit","temperatureUnit"])),methods:Object(s["a"])(Object(s["a"])({},Object(n["c"])(["setSingleDeviceid"])),{},{numberToFixed2:p["qb"],onResizingEnd:function(){this.onResize(this.horizontalModeShowLeft)},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){e.$refs.echartsIns.resize()}),300)},handleClickRow:function(t){var e=this,i=t.row,r=v["a"].longToLocalDateTimeStr(i.begintime-6e5),o=v["a"].longToLocalDateTimeStr(i.endtime+6e5),s={deviceid:i.deviceid,begintime:r,endtime:o,timezone:v["a"].getOffset()};Object($["Z"])(s).then((function(t){var i=t.records;i&&i.length?(e.$refs.mapIns.markersAndLineLayerToMap(i),e.$refs.echartsIns.updateChartsOption(i)):(e.$refs.mapIns.markersAndLineLayerToMap([]),e.$refs.echartsIns.updateChartsOption([]))}))},handleQuery:function(){var t=this,e=this.deviceid;if(e){var i=this.month.getFullYear(),r=this.month.getMonth()+1,o={year:i,month:r,tempindex:this.tempindex,deviceids:[e],offset:v["a"].getOffset()};this.loading=!0,Object(O["nb"])(o).then((function(e){var i=e.records,r=e.addressmap;t.addressmap=r,t.loading=!1;var o=i[0],s=[];void 0!=o&&(s=t.getDetaileList(o,r||{})),t.detaileList=s,s.length>0?(t.handleClickRow({row:s[0]}),t.$refs.xTable.setCurrentRow(s[0])):(t.$refs.mapIns.markersAndLineLayerToMap([]),t.$refs.echartsIns.updateChartsOption([]))})).catch((function(t){console.log(t)}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getDetaileList:function(t,e){var i=t.deviceid,r=t.records,o=[],s=z["a"].deviceInfos[i].devicename;return r.forEach((function(t){o.unshift({devicename:s,deviceid:i,tempIndexStr:t.tempindex,tempindex:t.tempindex,stemp:Object(p["f"])(t.stemp/100),etemp:Object(p["f"])(t.etemp/100),begintime:t.begintime,endtime:t.endtime,threshold:t.threshold/100,duration:Object(p["Pb"])(t.duration,!0),distance:t.distance/1e3,alarmstatus:Object(p["eb"])(t.alarmstatus),statisticsday:v["a"].longToLocalDateTimeStr(t.begintime)+" - "+v["a"].longToLocalDateTimeStr(t.endtime),address:Object(p["L"])(e,t.slat,t.slon),slon:t.slon,slat:t.slat,elon:t.elon,elat:t.elat})})),o},exportData:function(){if(this.detaileList.length>0){var t=[[this.$t("reportForm.index"),this.$t("reportForm.time"),this.$t("alarm.devName"),this.$t("reportForm.tempIndex"),this.$t("reportForm.status"),this.$t("reportForm.beginTemp")+this.temperatureUnit,this.$t("reportForm.endTemp")+this.temperatureUnit,this.$t("common.duration"),this.$t("reportForm.mileage"),this.$t("reportForm.address"),this.$t("reportForm.coordinate")]],e="";this.detaileList.forEach((function(i,r){0==r&&(e=i.deviceid);var o=[];o.push(r+1),o.push(i.statisticsday),o.push(i.devicename),o.push(i.tempIndexStr),o.push(i.alarmstatus),o.push(Object(p["qb"])(i.stemp)),o.push(Object(p["qb"])(i.etemp)),o.push(i.threshold),o.push(i.duration),o.push(Object(p["qb"])(i.distance)),o.push(i.address),o.push(i.slon+","+i.slat),t.push(o)}));var i=z["a"].getDeviceNameByDeviceId(e),r={title:this.$t("reportForm.tempAndHumi"),data:t,devicename:i};this.exportLoading1=!0,new ExcelCls(r).exportExcel(this)}}}),mounted:function(){var t=this;this.singleDeviceid&&(this.deviceid=this.singleDeviceid),this.$nextTick((function(){t.tempIndexList=[{label:t.$t("reportForm.all"),value:0},{label:t.$t("reportForm.temp1"),value:1},{label:t.$t("reportForm.temp2"),value:2},{label:t.$t("reportForm.temp3"),value:3},{label:t.$t("reportForm.temp4"),value:4}]}))}},k=F,L=(i("96e4"),Object(w["a"])(k,r,o,!1,null,null,null)),C=L.exports;e["default"]=C},5676:function(t,e,i){},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"h",(function(){return o})),i.d(e,"l",(function(){return s})),i.d(e,"k",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return h})),i.d(e,"g",(function(){return d})),i.d(e,"m",(function(){return m})),i.d(e,"i",(function(){return f})),i.d(e,"a",(function(){return u})),i.d(e,"j",(function(){return p}));var r="#2D9F28",o="#89C6F2",s="#FFC65E",n="red",a="#1EBEFF",l="#E505F7",c="#40A703",h="#F27908",d="#F180D1",m="#0F1F46",f="#000000",u={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},p=function(t,e,i,r,o){var s=t[0],n=o.contentSize,a=o.viewSize;return s+10>a[0]-n[0]?s=s-n[0]-10:s+=10,[s,"0%"]}},"632c":function(t,e,i){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(t.prefix,"-left-area"),style:{width:t.leftSize}},[t._t("left")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.horizontalTriggerStyle},[e("div",{staticClass:"split-pane-trigger-btn",on:{click:t.onClickHorizontal}}),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-right-area"),style:{width:t.horizontalModeShowLeft?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:t.onClickHorizontal,mouseenter:t.onClickHorizontal}},[e("div",{staticClass:"split-pane-right-btn-wrapper"})]),t._t("right")],2)],2):e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(t.prefix,"-top-area"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==t.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("top")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:"move"==t.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-btn")},[e("div",{on:{click:function(e){return t.setVerticalMode("top")}}}),e("div",{on:{click:function(e){return t.setVerticalMode("bottom")}}})]),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"top"==t.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("bottom")],2)],2)])},o=[],s=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),n={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return s(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(t){this.$emit("on-resize",t)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var r=100-e;r<=this.minTransed?this.triggerOffset=100-Math.max(r,this.minTransed):this.triggerOffset=100-Math.min(r,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},a=n,l=(i("9526"),i("2877")),c=Object(l["a"])(a,r,o,!1,null,null,null),h=c.exports;e["a"]=h},"80f4":function(t,e,i){"use strict";var r=i("32eb");e["a"]=r["a"]},9526:function(t,e,i){"use strict";i("5676")},"96e4":function(t,e,i){"use strict";i("13a1")}}]);