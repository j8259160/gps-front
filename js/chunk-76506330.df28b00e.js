(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76506330"],{"2a6f":function(t,e,o){},"3b13":function(t,e,o){},7031:function(t,e,o){"use strict";o("3b13")},"938a":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full oil-month-summary"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1),e("div",{staticClass:"f_left",staticStyle:{flex:"1"}}),e("div",{staticClass:"f_right_desc"},[e("span",{staticStyle:{"background-color":"#31b16c"}}),e("b",[t._v(t._s(t.$t("reportForm.refuel"))+" ")]),e("span",{staticStyle:{"background-color":"#ff0000"}}),e("b",[t._v(t._s(t.$t("reportForm.leak")))]),e("span",{staticStyle:{"background-color":"#242424"}}),e("b",[t._v(t._s(t.$t("home.normal")))])])]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu,"cell-dblclick":t.onCellDblClick}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"devicename",sortable:"",width:"140",title:t.$t("alarm.devName"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"deviceid",sortable:"",width:"140",title:t.$t("alarm.devNum")}}),e("vxe-table-column",{attrs:{field:"avgrunoilper100km",align:"right",formatter:t.numberToFixed2,sortable:"",width:"150",title:t.$t("reportForm.avgrunoilper100km")}}),e("vxe-table-column",{attrs:{field:"avgoilper100km",align:"right",formatter:t.numberToFixed2,sortable:"",width:"150",title:t.$t("reportForm.avgoilper100km")}}),e("vxe-table-column",{attrs:{field:"totaldistance",align:"right",formatter:t.numberToFixed2,sortable:"",width:"120",title:t.$t("reportForm.totalMileage")+t.distanceUnit}}),e("vxe-table-column",{attrs:{field:"totaloil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"130",title:t.$t("reportForm.totalrunconsumption")}}),e("vxe-table-column",{attrs:{field:"currenttotaloil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"100",title:t.$t("reportForm.currentTotaloil")}}),e("vxe-table-column",{attrs:{field:"totaladdoil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"100",title:t.$t("reportForm.totalAddOil")}}),e("vxe-table-column",{attrs:{field:"totalleakoil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"100",title:t.$t("reportForm.totalLeakOil")}}),e("vxe-table-column",{attrs:{field:"totalidleoil",align:"right",formatter:t.numberToFixed2,sortable:"",width:"110",title:t.$t("reportForm.totalIdleFuel")}}),e("vxe-table-column",{attrs:{field:"totalidle",align:"right",formatter:t.numberToFixed2,sortable:"",width:"120",title:t.$t("reportForm.totalIdleTime")+"(h)"}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",align:"right",formatter:t.numberToFixed2,sortable:"",width:"120",title:t.$t("reportForm.totalnotrunningad")}}),e("vxe-table-column",{attrs:{field:"avgoilperhour",align:"right",formatter:t.numberToFixed2,sortable:"",width:"150",title:t.$t("reportForm.fuelConsumptionHour")}}),e("vxe-table-column",{attrs:{field:"totalacc",align:"right",formatter:t.numberToFixed2,sortable:"",width:"110",title:t.$t("reportForm.totalManHours")+"(h)"}}),t._l(t.dayList,(function(o,i){return[e("vxe-table-column",{key:o.deviceid,attrs:{title:o.label,width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return["-"!==o.row["day".concat(i+1)]?e("div",[e("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"hover","append-to-body":!1,"popper-options":{boundariesElement:"body",gpuAcceleration:!0,positionFixed:!0,preventOverflow:!0}}},[e("div",{staticClass:"ztree-drapdown",staticStyle:{height:"256px",width:"100%",overflow:"hidden"}},[e("div",[t._v(t._s(t.$t("common.totalMileage"))+": "+t._s(o.row["dis".concat(i+1)]))]),e("div",[t._v(t._s(t.$t("common.oilConsumption"))+": "+t._s(o.row["oil".concat(i+1)]))]),e("div",[t._v(t._s(t.$t("reportForm.fuelVolume"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].addoil:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.oilLeakage"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].leakoil:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.runoilper100km"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].runoilper100km:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.fuelConsumption100km"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].oilper100km:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.idleOil"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].leakoil:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.idleDuration"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].totalidleStr:0)+"H")]),e("div",[t._v(t._s(t.$t("reportForm.fuelConsumptionHour"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].oilperhour:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.workingDuration"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].totalaccStr:0)+"H")]),e("div",[t._v(t._s(t.$t("reportForm.avgSpeed"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].avgspeed:0)+t._s(t.speedUnit))]),e("div",[t._v(t._s(t.$t("reportForm.addnotrunningad"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].addnotrunningad:0)+"L")]),e("div",[t._v(t._s(t.$t("reportForm.leaknotrunningad"))+": "+t._s(o.row["record".concat(i+1)]?o.row["record".concat(i+1)].leaknotrunningad:0)+"L")])]),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("div",{staticClass:"column-oil"},[e("div",{staticClass:"full",style:o.row["color".concat(i+1)]},[e("div",{staticStyle:{"text-align":"center"},domProps:{innerHTML:t._s(o.row["dis".concat(i+1)])}}),e("div",{staticStyle:{"text-align":"center"},domProps:{innerHTML:t._s(o.row["oil".concat(i+1)])}})])])])])],1):t._e()]}}],null,!0)})]}))],2)],1),e("vxe-modal",{attrs:{title:t.$t("reportForm.oilMonthSummary")+"-"+t.deviceName,value:t.show,className:"modal-padding0",width:"860px"},on:{hide:function(e){t.show=!1},close:function(e){t.show=!1}}},[e("vxe-table",{ref:"xTableDetaile",staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","highlight-hover-row":"",height:"430",data:t.detaileList,size:"mini"},on:{"menu-click":t.handleClickTableMenu,"cell-dblclick":t.cellDblClick}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"statisticsday",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.date"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"runoilper100km",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.runoilper100km")}}),e("vxe-table-column",{attrs:{field:"oilper100km",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.fuelConsumption100km")}}),e("vxe-table-column",{attrs:{field:"totaldistance",align:"right",formatter:t.numberToFixed2,width:"130",title:t.$t("reportForm.mileage")+t.distanceUnit}}),e("vxe-table-column",{attrs:{field:"totaloil",align:"right",formatter:t.numberToFixed2,width:"130",title:t.$t("reportForm.oilConsumption")}}),e("vxe-table-column",{attrs:{field:"addoil",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.fuelVolume")}}),e("vxe-table-column",{attrs:{field:"leakoil",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.oilLeakage")}}),e("vxe-table-column",{attrs:{field:"idleoil",align:"right",formatter:t.numberToFixed2,width:"120",title:t.$t("reportForm.idleOil")}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.totalnotrunningad")}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.addnotrunningad")}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",align:"right",formatter:t.numberToFixed2,width:"155",title:t.$t("reportForm.leaknotrunningad")}}),e("vxe-table-column",{attrs:{field:"totalidleStr",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("home.idleDuration")}}),e("vxe-table-column",{attrs:{field:"totalaccStr",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.workingDuration")}}),e("vxe-table-column",{attrs:{field:"oilperhour",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.fuelConsumptionHour")}}),e("vxe-table-column",{attrs:{field:"avgspeed",align:"right",formatter:t.numberToFixed2,width:"140",title:t.$t("reportForm.avgSpeed")+t.speedUnit}})],1),e("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[e("el-button",{staticStyle:{width:"240px"},attrs:{type:"primary",loading:t.exportLoading2},on:{click:t.exportDataDeitailes}},[t._v(t._s(t.$t("common.export")))])],1)],1)],1)])},r=[],a=o("5530"),l=(o("14d9"),o("a9e3"),o("b680"),o("d3b7"),o("159b"),o("5101")),n=o("e561"),s=o("d462"),d=o("6e52"),c=o("1c31"),u=o("c276"),m=o("2f62"),h=o("4c3c"),p=o("a05b"),v={name:"oilMonthSummary",data:function(){return{show:!1,loading:!1,exportLoading1:!1,exportLoading2:!1,month:new Date,totalList:[],detaileList:[],dayList:[],deviceName:""}},components:{MultiChoiceVehicle:n["a"],SelectDate:s["a"]},watch:{month:function(){this.loading||this.handleQuery()}},mixins:[h["a"],p["a"]],computed:Object(a["a"])({},Object(m["b"])(["isZh","distanceUnit","speedUnit"])),methods:Object(a["a"])(Object(a["a"])({},Object(m["c"])(["setSingleDeviceid","setJumpOilReportDate"])),{},{numberToFixed2:u["qb"],cellDblClick:function(t){var e=this,o=t.row,i=o.deviceid,r=o.statisticsday;this.$confirm(this.$t("missing.jumpToTimeOilReport"),{title:this.$t("bgManage.tip"),center:!0,customClass:"MessageBox_confirm"}).then((function(t){"confirm"==t&&(e.show=!1,e.setSingleDeviceid(i),e.setJumpOilReportDate(r),e.$router.push("/reportForm/timeOil"))})).catch((function(t){}))},onCellDblClick:function(t){var e=t.row;this.deviceName=e.devicename,this.show=!0,this.selectRow=e;for(var o=[],i=1;i<=31;i++){var r=e["record".concat(i)];if(!r)break;o.push(r)}this.detaileList=o},onSelectDevice:function(t){this.deviceids=t},handleClickRow:function(t){console.log(t)},handleQuery:function(){var t=this,e=this.deviceids;if(0!=e.length){this.dayList=this.getDayList();var o=this.dayList.length,i=l["a"].format(this.month,"yyyy-MM"),r=i.split("-"),a=this.month.getFullYear(),n=this.month.getMonth()+1,s={year:a,month:n,offset:l["a"].getOffset(),deviceids:e};this.loading=!0,Object(c["bb"])(s).then((function(e){var i=e.devices;t.loading=!1,i.forEach((function(e,i){e.index=i+1;var a=e.deviceid,l=d["a"].deviceInfos[a].devicename,s=e.records;delete e.records;for(var c=0,m=0,h=0,p=0,v=0,f=0,g=0;g<o;g++){var b=s[g];if(b){b.devicename=l,b.deviceid=a,b.addoil=b.addoil/100,b.leakoil=b.leakoil/100,b.totaloil=b.totaloil/100,b.totalnotrunningad=b.totalnotrunningad/100,b.idleoil=b.idleoil/100,b.avgspeed=Number(Object(u["e"])(b.avgspeed).toFixed(2)),b.leaknotrunningad=b.leaknotrunningad/100,b.addnotrunningad=b.addnotrunningad/100;var x=b.statisticsday.split("-")[2],F=b.totaldistance;c+=F,e["day"+String(parseInt(x))]=0==F?F+t.distanceUnit:(1*F/1e3).toFixed(2)+t.distanceUnit,e["day"+String(parseInt(x))+"oil"]=Object(u["qb"])(b.totaloil),m+=b.totaloil,h+=b.totalnotrunningad,p+=b.addoil,v+=b.leakoil,f+=b.idleoil,e["dis"+Number(x)]=e["day"+String(parseInt(x))],e["oil"+Number(x)]=e["day"+String(parseInt(x))+"oil"]+"L",b.yearmonth=r[0]+"-"+r[1],b.runoilper100km>0&&(b.runoilper100km),b.oilper100km>0&&(b.oilper100km),b.totalidleStr=b.totalidle/1e3/3600,b.totalaccStr=b.totalacc/1e3/3600,e["color".concat(Number(x))]=t.getDayColor(b),b.totaldistance=Object(u["d"])(b.totaldistance),e["record".concat(Number(x))]=b}}for(var w=0;w<o;w++){x="day"+(w+1);e[x]||(e[x]="-")}e.avgrunoilper100km=e.avgrunoilper100km,e.avgoilper100km=e.avgoilper100km,e.totaloil=m,e.totalidleoil=e.totalidleoil/100,e.totalnotrunningad=h,e.avgoilperhour=e.avgoilperhour,e.currenttotaloil=e.currenttotaloil/100,e.totaladdoil=p,e.totalleakoil=v,e.idleoil=f,e.month=n,e.devicename=l,e.deviceid=a,e.totalacc=e.totalacc/1e3/3600,e.totalidle=e.totalidle/1e3/3600,e.totaldistance=Object(u["d"])(1*c)})),t.totalList=i})).catch((function(e){console.log(e),t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getDayColor:function(t){var e={backgroundColor:"#ffffff",color:"#000000 !important"};return t&&(t.leakoil>0?e={backgroundColor:"#DB2121",color:"#ffffff"}:t&&t.addoil>0&&(e={backgroundColor:"#31B16C",color:"#ffffff"})),e},exportData:function(){for(var t=l["a"].format(this.month,"yyyy_MM"),e=this.dayList.length,o=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.avgrunoilper100km")+"(L)",this.$t("reportForm.avgoilper100km")+"(L)",this.$t("reportForm.totalMileage")+this.distanceUnit,this.$t("reportForm.totalrunconsumption")+"(L)",this.$t("reportForm.currentTotaloil")+"(L)",this.$t("reportForm.totalAddOil")+"(L)",this.$t("reportForm.totalLeakOil")+"(L)",this.$t("reportForm.totalIdleFuel"),this.$t("reportForm.totalIdleTime")+"(h)",this.$t("reportForm.totalnotrunningad")+"(L)",this.$t("reportForm.fuelConsumptionHour")+"(L)",this.$t("reportForm.totalManHours")+"(h)"]],i=0;i<e;i++)o[0].push(i+1);if(0!=this.totalList.length){var r=this.$refs.xTable.getTableData().visibleData;r.forEach((function(t,i){var r=[];r.push(i+1),r.push(t.devicename),r.push(t.deviceid),r.push(t.avgrunoilper100km),r.push(t.avgoilper100km),r.push(t.totaldistance),r.push(t.totaloil),r.push(t.currenttotaloil),r.push(t.totaladdoil),r.push(t.totalleakoil),r.push(t.totalidleoil),r.push(t.totalidle),r.push(t.totalnotrunningad),r.push(t.avgoilperhour),r.push(t.totalacc);for(var a=0;a<e;a++){var l="dis"+(a+1),n="oil"+(a+1);void 0!=t[l]?r.push(t[l]+"/"+t[n]):r.push("")}o.push(r)}));var a={title:this.$t("reportForm.oilMonthSummary")+"_"+t,data:o};this.exportLoading1=!0,new ExcelCls(a).exportExcel(this)}},exportDataDeitailes:function(){var t=this.selectRow,e=l["a"].format(this.month,"yyyy_MM"),o=[[this.$t("reportForm.index"),this.$t("reportForm.date"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.mileage")+this.distanceUnit,this.$t("reportForm.oilConsumption"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad"),this.$t("reportForm.workingDuration"),this.$t("reportForm.fuelConsumptionHour"),this.$t("reportForm.avgSpeed")+this.speedUnit]],i=0,r=0,a=0;if(0!=this.detaileList.length){var n=this.$refs.xTableDetaile.getTableData().visibleData;n.forEach((function(t,e){i+=t.totalnotrunningad,r+=t.addnotrunningad,a+=t.leaknotrunningad;var l=[];l.push(e+1),l.push(t.statisticsday),l.push(t.devicename),l.push(t.deviceid),l.push(Object(u["qb"])(t.runoilper100km)),l.push(Object(u["qb"])(t.oilper100km)),l.push(Object(u["qb"])(t.totaldistance)),l.push(Object(u["qb"])(t.totaloil)),l.push(Object(u["qb"])(t.addoil)),l.push(Object(u["qb"])(t.leakoil)),l.push(Object(u["qb"])(t.idleoil)),l.push(Object(u["qb"])(t.totalnotrunningad)),l.push(Object(u["qb"])(t.addnotrunningad)),l.push(Object(u["qb"])(t.leaknotrunningad)),l.push(Object(u["qb"])(t.totalaccStr)),l.push(Object(u["qb"])(t.oilperhour)),l.push(Object(u["qb"])(t.avgspeed)),o.push(l)}));var s=[];s.push(""),s.push(""),s.push(""),s.push(""),s.push(t.avgrunoilper100km),s.push(t.avgoilper100km),s.push(t.totaldistance),s.push(t.totaloil),s.push(t.totaladdoil),s.push(t.totalleakoil),s.push(t.totalidleoil),s.push(i),s.push(r),s.push(a),s.push(t.totalacc),s.push(t.avgoilperhour),t.totalacc>0?s.push((t.totaldistance/t.totalacc).toFixed(2)):s.push(0),o.push(s);var d={title:this.$t("reportForm.oilMonthSummary")+"_"+this.deviceName+"_"+e,data:o};this.exportLoading2=!0,new ExcelCls(d).exportExcel(this)}},getTheMonthDays:function(t){var e=t.getFullYear(),o=t.getMonth()+1;return new Date(new Date(e,o,1)-1).getDate()},getDayList:function(){for(var t=[],e=this.getTheMonthDays(this.month),o=1;o<=e;o++)t.push({label:String(o),value:"day".concat(o)});return t}}),mounted:function(){var t=this;this.deviceids=[],this.$nextTick((function(){t.dayList=t.getDayList()}))}},f=v,g=(o("f775"),o("2877")),b=Object(g["a"])(f,i,r,!1,null,null,null),x=b.exports;e["default"]=x},e561:function(t,e,o){"use strict";var i=o("ea22");e["a"]=i["a"]},ea22:function(t,e,o){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},r=[],a=o("5530"),l=(o("4795"),o("2f62")),n=o("2df7"),s={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(a["a"])({},Object(l["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:n["a"]},methods:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},d=s,c=(o("7031"),o("2877")),u=Object(c["a"])(d,i,r,!1,null,null,null);e["a"]=u.exports},f775:function(t,e,o){"use strict";o("2a6f")}}]);