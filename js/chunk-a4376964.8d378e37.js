(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4376964"],{"517d":function(e,t,a){},c946:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"device-types full"},[t("div",{staticClass:"btns"},[t("div",{staticClass:"float_left"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleClickAdd}},[e._v(e._s(e.$t("systemManage.addPackage")))])],1),t("div",{staticClass:"float_left"},[t("LabelWrap",{attrs:{label:e.$t("common.search")}},[t("el-input",{attrs:{clearable:"",type:"text"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSearch}},[e._v(e._s(e.$t("common.search")))])],1)]),t("div",{staticClass:"device-types-table"},[t("vxe-table",{attrs:{border:"","edit-config":e.editConfig,resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.tableList},on:{"edit-closed":e.editClosed,"cell-dblclick":e.handleEdit}},[t("vxe-table-column",{attrs:{field:"showlevel",title:e.$t("common.sn"),width:"80","edit-render":{name:"$input",props:{type:"text"}}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"edit-devicename",attrs:{title:e.$t("tips.clickToEdit")}},[t("span",{domProps:{textContent:e._s(a.row.showlevel)}}),t("i",{staticClass:"el-icon-edit"})])]}}])}),t("vxe-table-column",{attrs:{field:"packageid",title:"ID",width:"60",sortable:""}}),t("vxe-table-column",{attrs:{field:"packagename",title:e.$t("systemManage.packageNameZh"),sortable:""}}),t("vxe-table-column",{attrs:{field:"packagenameen",title:e.$t("systemManage.packageNameEn"),sortable:""}}),t("vxe-table-column",{attrs:{field:"remark",title:e.$t("systemManage.remarkzh"),sortable:""}}),t("vxe-table-column",{attrs:{field:"remarken",title:e.$t("systemManage.remarken"),sortable:""}}),t("vxe-table-column",{attrs:{field:"points",title:e.$t("systemManage.points"),sortable:""}}),t("vxe-table-column",{attrs:{field:"updatetimeStr",title:e.$t("systemManage.updateTime"),width:"160",sortable:""}}),t("vxe-table-column",{attrs:{field:"enabledStr",title:e.$t("systemManage.isUsed"),sortable:""}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{"padding-top":"7px"}},[t("span",{staticStyle:{padding:"0px 10px 0px 0px"}},[t("img",{staticStyle:{width:"20px",cursor:"pointer"},attrs:{src:e.editIcon},on:{click:function(t){return e.handleEdit(a)}}})]),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:"确定删除吗？"},on:{confirm:function(t){return e.handleDelete(a)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[t("img",{staticStyle:{width:"20px",cursor:"pointer"},attrs:{src:e.deleteIcon}})])])],1)]}}])})],1)],1),t("AddPackageDialog",{ref:"packageDialog",attrs:{isEdit:e.isEdit},on:{onAction:e.handleAction},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],1)},i=[],n=a("5530"),l=(a("c975"),a("14d9"),a("4e82"),a("a9e3"),a("d3b7"),a("498a"),a("159b"),function(){var e=this,t=e._self._c;return t("vxe-modal",{attrs:{title:e.title,value:e.value,className:"modal-padding0",width:"480px"},on:{hide:e.handleClose,close:e.handleClose}},[t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.packageNameZh"),labelWidth:"120px"}},[t("el-input",{attrs:{clearable:""},model:{value:e.packagename,callback:function(t){e.packagename=t},expression:"packagename"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.packageNameEn"),labelWidth:"120px"}},[t("el-input",{attrs:{clearable:""},model:{value:e.packagenameen,callback:function(t){e.packagenameen=t},expression:"packagenameen"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.remarkzh"),labelWidth:"120px"}},[t("el-input",{attrs:{clearable:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.remarken"),labelWidth:"120px"}},[t("el-input",{attrs:{clearable:""},model:{value:e.remarken,callback:function(t){e.remarken=t},expression:"remarken"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.points"),labelWidth:"120px"}},[t("el-input",{attrs:{clearable:""},model:{value:e.points,callback:function(t){e.points="string"===typeof t?t.trim():t},expression:"points"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("systemManage.isUsed"),labelWidth:"120px"}},[t("div",{staticStyle:{padding:"5px 0px 0px 10px"}},[t("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)])],1)],1),e.isEdit?t("el-row",[t("el-col",{attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleEdit}},[e._v(e._s(e.$t("common.determine")))])],1)],1):t("el-row",[t("el-col",{attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleAdd}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)}),c=[],o=a("201d"),r=a("b562"),d={name:"AddPackageDialog",props:{value:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1}},computed:{title:function(){return this.isEdit?this.$t("systemManage.editPackage")+" - "+this.row.packageid:this.$t("systemManage.addPackage")}},components:{LabelWrap:o["a"]},data:function(){return{loading:!1,packagename:"",packagenameen:"",remark:"",remarken:"",points:"",checked:!1}},watch:{value:function(e){e&&0==this.isEdit&&(this.packagename="",this.packagenameen="",this.remark="",this.remarken="",this.points="",this.checked=!1)}},methods:{handleClose:function(){this.$emit("input",!1)},handleAdd:function(){var e=this,t={packagename:this.packagename,packagenameen:this.packagenameen,remark:this.remark,remarken:this.remarken,points:this.points,enabled:this.checked?1:0};""==t.points||isNaN(t.points)?this.$XModal.message({message:this.$t("systemManage.inputPoints"),status:"error",zIndex:9999}):(this.loading=!0,Object(r["d"])(t).then((function(t){var a=t.status,s=t.valueaddpackage;e.loading=!1,0==a?(e.$emit("onAction",s),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.addFail"),status:"error",zIndex:9999})})))},setRowInfo:function(e){var t=e.row;this.row=t,this.packagename=t.packagename,this.packagenameen=t.packagenameen,this.remark=t.remark,this.remarken=t.remarken,this.points=t.points,this.checked=0!=t.enabled},handleEdit:function(){var e=this,t={packageid:this.row.packageid,packagename:this.packagename,packagenameen:this.packagenameen,remark:this.remark,remarken:this.remarken,points:this.points,enabled:this.checked?1:0};""==t.points||isNaN(t.points)?this.$XModal.message({message:this.$t("systemManage.inputPoints"),status:"error",zIndex:9999}):(this.loading=!0,Object(r["A"])(t).then((function(t){var a=t.status,s=t.valueaddpackage;e.loading=!1,0==a?(e.$emit("onAction",s),e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.editFail"),status:"error",zIndex:9999})})))}}},p=d,m=a("2877"),h=Object(m["a"])(p,l,c,!1,null,null,null),u=h.exports,g=a("2f62"),k=a("5101"),b=a("61fc"),f=a("e173"),v={name:"Packages",data:function(){return{editIcon:b,deleteIcon:f,searchText:"",tableList:[],dialog:!1,isEdit:!1,editConfig:{trigger:"click",mode:"cell",showStatus:!0,icon:"fa fa-pencil"}}},computed:Object(n["a"])({},Object(g["b"])(["isZh"])),components:{LabelWrap:o["a"],AddPackageDialog:u},methods:{editClosed:function(e){var t=this,a=e.row;a.showlevel=Number(a.showlevel),Object(r["A"])(a).then((function(e){var a=e.status;0==a?(t.tableList.sort((function(e,t){return e.showlevel-t.showlevel})),t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.editFail"),status:"error",zIndex:9999})}))},handleAction:function(e){e.enabledStr=0!=e.enabled?this.$t("header.yes"):this.$t("header.no"),e.updatetimeStr=k["a"].longToLocalDateTimeStr(e.updatetime),this.isEdit?(this.tableList.forEach((function(t){e.packageid==t.packageid&&Object.assign(t,e)})),this.cacehList.forEach((function(t){e.packageid==t.packageid&&Object.assign(t,e)}))):(this.tableList.push(Object(n["a"])({},e)),this.cacehList.push(Object(n["a"])({},e))),this.dialog=!1},handleEdit:function(e){this.$refs.packageDialog.setRowInfo(e),this.isEdit=!0,this.dialog=!0},handleDelete:function(e){var t=this,a=e.rowIndex,s=e.row.packageid;Object(r["r"])({packageid:s}).then((function(e){var i=e.status;if(0==i){t.$delete(t.tableList,a);var n=[];t.cacehList.forEach((function(e){e.packageid!=s&&n.push(e)})),t.cacehList=n,t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999})}else t.$XModal.message({message:t.$t("tips.deleteFail"),status:"error",zIndex:9999})}))},handleClickAdd:function(){this.isEdit=!1,this.dialog=!0},handleClickSearch:function(){var e=this.searchText.trim();e=e.toLocaleLowerCase();var t=[];this.cacehList.forEach((function(a){var s=a.packagename?a.packagename:"",i=a.packagenameen?a.packagenameen:"",n=a.remark?a.remark:"",l=a.remarken?a.remarken:"";s=s.toLocaleLowerCase(),i=i.toLocaleLowerCase(),n=n.toLocaleLowerCase(),l=l.toLocaleLowerCase(),-1==s.indexOf(e)&&-1==i.indexOf(e)&&-1==n.indexOf(e)&&-1==l.indexOf(e)||t.push(a)})),t.sort((function(e,t){return e.showlevel-t.showlevel})),this.tableList=t},queryPackages:function(){var e=this,t={filterenabled:0};Object(r["Z"])(t).then((function(t){var a=t.status,s=t.packages,i=[],l=[];0==a&&null!=s&&s.forEach((function(t){t.enabledStr=0!=t.enabled?e.$t("header.yes"):e.$t("header.no"),t.updatetimeStr=k["a"].longToLocalDateTimeStr(t.updatetime),i.push(Object(n["a"])({},t)),l.push(Object(n["a"])({},t))})),e.cacehList=i,e.tableList=l}))}},mounted:function(){var e=this;this.cacehList=[],this.$nextTick((function(){e.queryPackages()}))}},x=v,$=(a("eb5d"),Object(m["a"])(x,s,i,!1,null,null,null)),w=$.exports;t["default"]=w},eb5d:function(e,t,a){"use strict";a("517d")}}]);