(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6279c58e"],{"0595":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(i){return e("div",{key:i.type,style:{color:i.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(i.type)}}},[t._v(t._s(i.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},r=[],s=i("5101"),n={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,i=[],a=new Date,r=new Date;switch(e&&(a=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),r=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:i=[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(r,"yyyy-MM-dd")+" 23:59:59")];break;case 1:a.setTime(a.getTime()-864e5),r.setTime(r.getTime()-864e5),i=[a,r];break;case 3:a.setTime(a.getTime()-2592e5),i=[a,r];break;case 7:a.setTime(a.getTime()-6048e5),i=[a,r];break;case 10:a.setTime(a.getTime()-864e6),i=[a,r];break;case 30:a.setTime(a.getTime()-2592e6),i=[a,r];break}this.type=t,this.$emit("input",i)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},o=n,l=(i("8d09"),i("2877")),c=Object(l["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},1078:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},[e("div",{class:"".concat(t.prefix,"-container")},[e("div",{class:"".concat(t.prefix,"-top-area-oil"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[t._t("top")],2),t._t("trigger",(function(){return[e("div",{ref:"trigger",class:"".concat(t.prefix,"-trigger-oil"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-oil-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[t._t("bottom")],2)],2)])},r=[],s=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),n={name:"MySplitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return s(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return{height:"4px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)}},methods:{handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-e;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},o=n,l=(i("acd3"),i("2877")),c=Object(l["a"])(o,a,r,!1,null,null,null),d=c.exports;e["a"]=d},"3b13":function(t,e,i){},"465a":function(t,e,i){},"57c9":function(t,e,i){"use strict";var a=i("0595");e["a"]=a["a"]},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"h",(function(){return r})),i.d(e,"l",(function(){return s})),i.d(e,"k",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return u})),i.d(e,"m",(function(){return h})),i.d(e,"i",(function(){return f})),i.d(e,"a",(function(){return m})),i.d(e,"j",(function(){return p}));var a="#2D9F28",r="#89C6F2",s="#FFC65E",n="red",o="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",u="#F180D1",h="#0F1F46",f="#000000",m={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},p=function(t,e,i,a,r){var s=t[0],n=r.contentSize,o=r.viewSize;return s+10>o[0]-n[0]?s=s-n[0]-10:s+=10,[s,"0%"]}},7031:function(t,e,i){"use strict";i("3b13")},"8d09":function(t,e,i){"use strict";i("a818")},9677:function(t,e,i){"use strict";i.r(e);var a=i("ade3"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full idle-report"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"164px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.minDuration")}},[e("el-select",{model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}},t._l(t.optionList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticClass:"report-form-inner-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.idleStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"",name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName == 'details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v(" ("+t._s(t.detailsList.length)+") "),e("span",[t._v(t._s(t.$t("reportForm.totalIdleDuration"))+":"+t._s(t.totalIdleDuration))])])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",sortable:"",title:t.$t("alarm.devName")}}),e("vxe-table-column",{attrs:{field:"deviceid",sortable:"",title:t.$t("alarm.devNum")}}),e("vxe-table-column",{attrs:{field:"creater",sortable:"",title:t.$t("reportForm.creater")}}),e("vxe-table-column",{attrs:{field:"groupname",sortable:"",title:t.$t("reportForm.groupName")}}),e("vxe-table-column",{attrs:Object(a["a"])({field:"idleCount",sortable:"",title:t.$t("reportForm.idleCount")},"sortable","")}),e("vxe-table-column",{attrs:Object(a["a"])({field:"idleDuration",align:"right",sortable:"",title:t.$t("reportForm.idleDuration")},"sortable","")})],1)],1),e("div",{staticClass:"idle-report-details",style:t.detailsStyle},[e("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",showBtn:!1,min:25,max:75},on:{"on-resizing-end":t.onResizingEnd},model:{value:t.triggerOffsetV,callback:function(e){t.triggerOffsetV=e},expression:"triggerOffsetV"}},[e("div",{staticStyle:{height:"100%"},attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"idle-report-details-echarts"},[e("IdleEcharts",{ref:"echartsIns",on:{"select-time":t.selectTime}})],1)]),e("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[e("div",{staticClass:"idle-report-details-table"},[e("vxe-table",{ref:"xTable",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.onCellClick}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"idleDuration",align:"right",title:t.$t("reportForm.idleDuration"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"startDate",title:t.$t("reportForm.startTime")}}),e("vxe-table-column",{attrs:{field:"endDate",title:t.$t("reportForm.endTime")}}),e("vxe-table-column",{attrs:{field:"startAddress",title:t.$t("reportForm.startAddress")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:t._s(i.row.startAddress)},on:{click:function(e){return t.seeMapTracks(i.row)}}})]}}])}),e("vxe-table-column",{attrs:{field:"endAddress",title:t.$t("reportForm.endAddress")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388cfe"},domProps:{textContent:t._s(i.row.endAddress)},on:{click:function(e){return t.seeMapTracks(i.row)}}})]}}])})],1)],1)])])],1)]),e("vxe-modal",{attrs:{title:t.$t("reportForm.seeMap"),className:"modal-padding0",value:t.dialogMap,width:"500"},on:{hide:function(e){t.dialogMap=!1},close:function(e){t.dialogMap=!1}}},[e("div",{staticStyle:{width:"100%",height:"400px"}},[e("ReportMap",{ref:"mapIns"})],1)])],1)])},s=[],n=(i("14d9"),i("4e82"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("6e52")),o=i("e561"),l=i("d462"),c=i("57c9"),d=i("32eb"),u=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},h=[],f=i("5530"),m=(i("b0c0"),i("43c8")),p=i.n(m),g=i("2f62"),v=i("5aff"),b=i("c276"),y={name:"IdleEcharts",computed:Object(f["a"])({},Object(g["b"])(["isZh","distanceUnit","speedUnit","weightUnit"])),methods:{initChart:function(){var t=this;this.disMin=0,this.recvtime=[],this.speeds=[],this.mileages=[],this.status=[],this.reissues=[],this.idles=[],this.rangeArr=[],this.chartsIns=p.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(e){var i=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",i)&&t.recvtime.length){var a=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];t.$emit("select-time",t.recvtime[a])}}))},isIdleTrack:function(t){var e=!1,i=t.status,a=3&i;if(3==a){var r=t.speed;r<=0&&(e=!0)}return e},updateRangeArr:function(t,e){var i=this,a=[];this.records.forEach((function(r,s){var n=r.updatetime,o=i.mileages[s];t<=n&&n<=e?a.push(o):a.push("")})),this.rangeArr=a,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},updateChartsOption:function(t){var e=this;this.records=t;var i=this.isZh,a=[],r=[],s=[],n=[],o=[],l=[],c=0;t.length>0&&(c=t[0].totaldistance),t.forEach((function(t){var d=Number(Object(b["d"])(t.totaldistance-c).toFixed(2));a.push(t.updatetimeStr),r.push(Number(Object(b["e"])(t.speed).toFixed(0))),s.push(d),n.push(i?t.strstatus:t.strstatusen),o.push(t.reissueStr),e.isIdleTrack(t)?l.push(d):l.push("-")})),this.recvtime=a,this.speeds=r,this.mileages=s,this.status=n,this.reissues=o,this.idles=l,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var t=this.distanceUnit,e=this.speedUnit,i=this.weightUnit,r=this.$t("reportForm.speed"),s=this.$t("reportForm.mileage"),n=this.$t("reportForm.idle"),o=this.$t("reportForm.time"),l=this.$t("reportForm.status"),c=this.$t("reportForm.reissue"),d=this.$t("reportForm.weight");return{title:{text:o,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:50,y:40,x2:50,y2:40,bottom:55},tooltip:Object(f["a"])(Object(f["a"])({trigger:"axis"},v["a"]),{},{formatter:function(a,l){var c="<div>".concat(a[0].name,"</div>");for(var u in a){var h=a[u].seriesName,f=a[u].value;h&&h!=o&&"rangeArr"!=h&&(c+=h==s?Object(b["k"])(v["b"],h,f,t):h==r?Object(b["k"])(v["h"],h,f,e):h==n?Object(b["k"])(v["k"],h,f,"-"==f?"":t):h==d?Object(b["k"])(v["m"],h,f,i):Object(b["k"])(v["m"],h,f,""))}return'<div style="width:230px">'.concat(c,"</div>")}}),legend:{data:[r,s,n],x:"left"},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:10},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],yAxis:[Object(a["a"])({name:r+this.speedUnit,type:"value",nameTextStyle:10,nameGap:5},"nameTextStyle",{padding:2,align:"center"}),Object(a["a"])(Object(a["a"])(Object(a["a"])({name:s+this.distanceUnit,type:"value",nameTextStyle:10,nameGap:2},"nameTextStyle",{padding:5,align:"center"}),"min",this.disMin),"axisTick",{show:!1})],series:[{name:o,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:r,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:v["h"],data:this.speeds},{name:s,type:"line",symbol:"none",yAxisIndex:1,color:v["b"],smooth:!0,data:this.mileages},{name:n,type:"line",symbol:"none",yAxisIndex:1,color:v["k"],smooth:!0,data:this.idles},{smooth:!0,name:l,type:"line",symbol:"none",color:v["m"],data:this.status},{smooth:!0,name:c,type:"line",symbol:"none",color:v["m"],data:this.reissues},{smooth:!0,name:"rangeArr",type:"line",yAxisIndex:1,symbol:"none",color:"#B217F7",data:this.rangeArr}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},x=y,D=i("2877"),$=Object(D["a"])(x,u,h,!1,null,null,null),T=$.exports,w=i("1c31"),O=i("7cf8"),C=i("5101"),M=i("1078"),k=i("201d"),F=i("a05b"),S={name:"idleReport",data:function(){return{loading:!1,dialogMap:!1,exportLoading1:!1,activeName:"tabTotal",tableTitle:"",triggerOffsetV:45,totalIdleDuration:"",dateRange:[new Date,new Date],totalList:[],detailsList:[],interval:"5",optionList:[],sortConfig:{sortMethod:function(t){var e=t.data,i=t.sortList,a=i[0],r=a.property,s=a.order,n=[];return n="idleDuration"==r?"desc"===s?e.sort((function(t,e){return e.duration-t.duration})):"asc"===s?e.sort((function(t,e){return t.duration-e.duration})):e.sort():"desc"===s?e.sort((function(t,e){var i=e[r]+"";return i.localeCompare(t[r])})):"asc"===s?e.sort((function(t,e){var i=t[r]+"";return i.localeCompare(e[r])})):e.sort(),n}}}},mixins:[F["a"]],computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},watch:{dateRange:function(){this.loading||this.handleQuery()}},components:{ReportMap:d["a"],MultiChoiceVehicle:o["a"],SelectDate:l["a"],QuickTimeRange:c["a"],IdleEcharts:T,SplitPane:M["a"],LabelWrap:k["a"]},methods:{onCellClick:function(t){var e=t.row;this.$refs.echartsIns.updateRangeArr(e.begintime,e.endtime)},seeMapTracks:function(t){var e=this,i={deviceid:t.deviceid,begintime:t.startDate,endtime:t.endDate,timezone:C["a"].getOffset()};this.dialogMap=!0,Object(O["Z"])(i).then((function(t){t.status;var i=t.records;setTimeout((function(){i=i||[],e.$refs.mapIns.markersAndLineLayerToMap(i)}),300)})).catch((function(t){console.log(t)}))},onResizingEnd:function(){this.$refs.echartsIns.resize()},selectTime:function(t){var e=new Date(t).getTime(),i=null;this.detailsList.forEach((function(t){var a=new Date(t.startDate).getTime(),r=new Date(t.endDate).getTime();a<=e&&r<=r&&(i=t)})),i?(this.$refs.xTable.setCurrentRow(i),this.$refs.xTable.scrollToRow(i)):this.$refs.xTable.clearCurrentRow()},onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids,i=this.dateRange;if(0!=e.length)if(0!=i.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var a=C["a"].format(i[0],"yyyy-MM-dd"),r=C["a"].format(i[1],"yyyy-MM-dd"),s={startday:a,endday:r,offset:C["a"].getOffset(),devices:e,intervalminutes:Number(this.interval)};this.loading=!0,this.queryDetailDateRange=s.startday+"  "+s.endday,Object(w["K"])(s).then((function(e){var i=e.records,s=e.addressmap;t.addressmap=s,t.loading=!1;var o=[];i&&i.forEach((function(t,e){var i=t.deviceid,s=n["a"].deviceInfos[i],l=s.devicename,c=n["a"].getShowName(s.creater),d=s.groupname,u=0,h={devicename:l,creater:c,groupname:d,deviceid:i,idleCount:t.records.length,records:t.records,startday:a,endday:r};t.records.forEach((function(t){t.devicename=l,t.creater=c,t.groupname=d,t.deviceid=i,u+=t.endtime-t.begintime})),h.duration=u,h.idleDuration=Object(b["Pb"])(u,!0),o.push(h)})),t.totalList=o})).catch((function(e){t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleClickRow:function(t){var e=this;if(t.records&&t.records.length>0){this.$refs.echartsIns.rangeArr=[],this.activeName="details",this.detailsList=this.getAccDetailTableData(t.records),this.tableTitle=t.devicename+"-"+t.deviceid;var i={startday:t.startday,endday:t.endday,offset:8,devices:[t.deviceid]};this.totalIdleDuration=t.idleDuration,Object(w["A"])(i).then((function(t){var i=t.records,a=[];if(i){var r=i[0].records;r.forEach((function(t){t.updatetimeStr=C["a"].longToLocalDateTimeStr(t.updatetime),t.durationStr=Object(b["Pb"])(t.endtime-t.starttime,!0),t.reissueStr=0==t.reissue?e.$t("header.no"):e.$t("header.yes")})),a=r}e.$refs.echartsIns.updateChartsOption(a)}))}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},getAccDetailTableData:function(t){var e=[],i=this.addressmap;return t.sort((function(t,e){return t.begintime-e.begintime})),t.forEach((function(t,a){var r=((t.endtime-t.begintime)/1e3/3600).toFixed(2),s=Object(b["Pb"])(t.endtime-t.begintime,!0);e.push({index:a+1,deviceid:t.deviceid,devicename:t.devicename,startDate:C["a"].longToLocalDateTimeStr(t.begintime),endDate:C["a"].longToLocalDateTimeStr(t.endtime),duration:r,idleDuration:s,begintime:t.begintime,endtime:t.endtime,startAddress:Object(b["L"])(i,t.slat,t.slon),endAddress:Object(b["L"])(i,t.elat,t.elon),slat:t.slat,slon:t.slon,elat:t.elat,elon:t.elon})})),e},exportData:function(){if("tabTotal"==this.activeName){if(0==this.totalList.length)return;var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.idleCount"),this.$t("reportForm.idleDuration")]];this.totalList.forEach((function(e,i){var a=[];a.push(i+1),a.push(e.devicename),a.push(e.deviceid),a.push(e.creater),a.push(e.groupname),a.push(e.idleCount),a.push(e.idleDuration),t.push(a)}));var e={title:this.$t("reportForm.idleReport"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}else{if(0==this.detailsList.length)return;t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.idleDuration"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]];var i="";this.detailsList.forEach((function(e,a){var r=[];""==i&&(i=e.deviceid),r.push(a+1),r.push(e.devicename),r.push(e.deviceid),r.push(e.idleDuration),r.push(e.startDate),r.push(e.endDate),r.push(e.startAddress),r.push(e.endAddress),r.push(e.slon+","+e.slat),r.push(e.elon+","+e.elat),t.push(r)}));e={title:this.$t("reportForm.idleReport")+"-"+n["a"].getDeviceNameByDeviceId(i),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}}},mounted:function(){var t=this;this.deviceids=[],this.$nextTick((function(){var e=t.$t("monitor.minute");t.optionList=[{label:"5"+e,value:"5"},{label:"10"+e,value:"10"},{label:"15"+e,value:"15"},{label:"30"+e,value:"30"},{label:"60"+e,value:"60"}]}))}},I=S,L=(i("d1b0"),Object(D["a"])(I,r,s,!1,null,null,null)),z=L.exports;e["default"]=z},9758:function(t,e,i){},a818:function(t,e,i){},acd3:function(t,e,i){"use strict";i("9758")},d1b0:function(t,e,i){"use strict";i("465a")},e561:function(t,e,i){"use strict";var a=i("ea22");e["a"]=a["a"]},ea22:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice multi-choice-vehicle"},[e("div",{staticClass:"multi-choice-input"},[e("ZtreeDeviceDropdown",{ref:"ztreeDevice",attrs:{disableShare:t.disableShare,isCheck:"",placeholder:this.$t("tips.selectDevice"),isQueryInitData:t.isQueryInitData,selectDeviceIds:t.multipleDeviceids},on:{onTreeCheck:t.onTreeCheck}})],1)])},r=[],s=i("5530"),n=(i("4795"),i("2f62")),o=i("2df7"),l={name:"MultiChoiceVehicle",props:{disableShare:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(s["a"])({},Object(n["b"])(["isQueryInitData","multipleDeviceids"])),components:{ZtreeDeviceDropdown:o["a"]},methods:Object(s["a"])(Object(s["a"])({},Object(n["c"])(["setMultipleDeviceids"])),{},{onTreeCheck:function(t){this.$emit("onSelectDevice",t),this.setMultipleDeviceids(t)},clearText:function(){var t=this;setTimeout((function(){t.$refs.ztreeDevice.clearText()}),300)}})},c=l,d=(i("7031"),i("2877")),u=Object(d["a"])(c,a,r,!1,null,null,null);e["a"]=u.exports}}]);