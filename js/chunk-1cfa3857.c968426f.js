(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cfa3857"],{1078:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},[e("div",{class:"".concat(t.prefix,"-container")},[e("div",{class:"".concat(t.prefix,"-top-area-oil"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[t._t("top")],2),t._t("trigger",(function(){return[e("div",{ref:"trigger",class:"".concat(t.prefix,"-trigger-oil"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-oil-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[t._t("bottom")],2)],2)])},i=[],a=(r("c975"),r("a9e3"),function(t,e){return e.indexOf(t)>=0}),o={name:"MySplitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return a(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return{height:"4px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)}},methods:{handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,r=0;if("horizontal"===this.direction?(r=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-r:r)):(r=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-r:r)),this.right){var s=100-e;s<=this.minTransed?this.triggerOffset=100-Math.max(s,this.minTransed):this.triggerOffset=100-Math.min(s,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(r("acd3"),r("2877")),c=Object(l["a"])(n,s,i,!1,null,null,null),u=c.exports;e["a"]=u},3218:function(t,e,r){"use strict";r.r(e);r("498a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full message-report"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:t.deviceid,callback:function(e){t.deviceid=e},expression:"deviceid"}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left",staticStyle:{width:"240px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.searchContent")}},[e("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-search",placeholder:t.$t("reportForm.pleaseEnterSearchContent")},model:{value:t.filterText,callback:function(e){t.filterText="string"===typeof e?e.trim():e},expression:"filterText"}})],1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary"},on:{click:t.filterTypeDesc}},[t._v(t._s(t.$t("common.filter")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"45px"}},[e("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",showBtn:!1,min:25,max:75},on:{"on-resizing-end":t.onResizingEnd},model:{value:t.triggerOffsetV,callback:function(e){t.triggerOffsetV=e},expression:"triggerOffsetV"}},[e("div",{staticStyle:{height:"100%"},attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"message-report-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.timeChart"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:t.$t("reportForm.uploadStatistics"),name:"details"}})],1),e("div",{staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v("("+t._s(t.messageList.length)+") "+t._s(t.$t("missing.exceptionPoint"))+":"+t._s(t.exceptionCount)+" "+t._s(t.$t("reportForm.reissue"))+":"+t._s(t.reissuesCount)+" ")])],1),e("div",{staticClass:"message-report-charts"},[e("div",{style:t.ecahts1Style},[e("TimeEchart",{ref:"echartIns"})],1),e("div",{style:t.ecahts2Style},[e("TypeEchart",{ref:"typeEchart"})],1)])]),e("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","auto-resize":"","row-class-name":t.rowClassName,"highlight-current-row":"",size:"mini",height:"auto","sort-config":t.sortConfig,data:t.messageList},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.cellclick,"cell-dblclick":t.cellDblclick}},[e("vxe-table-column",{attrs:{field:"sn",title:t.$t("reportForm.sn"),width:"70",sortable:""}}),e("vxe-table-column",{attrs:{field:"messageType",title:t.$t("reportForm.messageType"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"typedescr",title:t.$t("reportForm.typeDescr"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"strstatus",title:t.$t("reportForm.strstatus"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"stralarm",title:t.$t("reportForm.alarm")+(t.alarmCount?"(".concat(t.alarmCount,")"):""),width:"95",sortable:""}}),e("vxe-table-column",{attrs:{field:"exception",title:t.$t("missing.exception")+(t.exceptionCount?"(".concat(t.exceptionCount,")"):""),width:"95",sortable:""}}),e("vxe-table-column",{attrs:{field:"reissueStr",title:t.$t("reportForm.reissue")+(t.reissuesCount?"(".concat(t.reissuesCount,")"):""),width:"95",sortable:""}}),e("vxe-table-column",{attrs:{field:"updatetimeStr",title:t.$t("reportForm.updatetimeStr"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"arrivedtimeStr",title:t.$t("reportForm.arrivedtimeStr"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"gotsrc",title:t.$t("reportForm.gotsrc"),width:"90",sortable:""}}),e("vxe-table-column",{attrs:{field:"gpsvalidnum",title:t.$t("reportForm.GPSNumber"),width:"90",sortable:""}}),e("vxe-table-column",{attrs:{field:"rxlevel",title:t.$t("reportForm.rxlevel"),width:"90",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaldistance",title:t.$t("reportForm.totalMileage")+t.distanceUnit,width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"speed",sortable:"",title:t.$t("reportForm.speed")+t.speedUnit,align:"right",width:"100"}}),e("vxe-table-column",{attrs:{field:"course",title:t.$t("reportForm.course"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"altitude",title:t.$t("reportForm.altitude"),width:"90",sortable:""}}),e("vxe-table-column",{attrs:{field:"reportmodeStr",title:t.$t("reportForm.reportmodeStr"),width:"110",sortable:""}}),e("vxe-table-column",{attrs:{field:"status",title:t.$t("reportForm.status"),width:"80"}}),e("vxe-table-column",{attrs:{field:"callat",title:t.$t("reportForm.callat"),width:"100"}}),e("vxe-table-column",{attrs:{field:"callon",title:t.$t("reportForm.callon"),width:"100"}}),e("vxe-table-column",{attrs:{field:"radius",title:t.$t("reportForm.radius"),width:"80"}}),e("vxe-table-column",{attrs:{field:"recorderspeed",title:t.$t("reportForm.recorderspeedStr"),width:"120"}})],1)],1)])],1),e("transition",{attrs:{name:"el-zoom-in-bottom"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"transition-box"},[e("el-card",[e("div",{staticStyle:{position:"absolute",right:"10px",top:"0px"}},[e("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0","font-size":"20px",cursor:"pointer"},on:{click:function(e){t.show=!1}}})]),e("div",{staticStyle:{margin:"10px 0px","white-space":"normal","word-break":"break-all",height:"210px","overflow-y":"auto","font-size":"12px"},domProps:{textContent:t._s(t.messageBody)}}),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleRefresh}},[t._v(t._s(t.$t("monitor.refreshLocation")))])],1)])],1)])],1)])},i=[],a=r("5530"),o=(r("c975"),r("14d9"),r("4e82"),r("e9c4"),r("b680"),r("d3b7"),r("25f0"),r("159b"),r("4795"),r("2f62")),n=r("d03a"),l=r("d462"),c=r("1c31"),u=r("7cf8"),d=r("5101"),h=r("c276"),p=r("eb10"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"full",attrs:{id:t.chartId}})},f=[],g=(r("07ac"),r("43c8")),v=r.n(g),b={name:"TypeEchart",computed:{chartId:function(){return"chart_".concat(this._uid)}},methods:{initChart:function(){this.chartsIns=v.a.init(document.getElementById(this.chartId)),this.chartsIns.setOption(this.getChartsOption([]),!0)},resize:function(){this.chartsIns.resize()},updateChartsOption:function(t){var e={},r=this.$parent.$parent.padPreZero;t.forEach((function(t){var s=null,i=(t.status,t.messagetype),a="0x"+r(parseInt(t.messagetype,10).toString(16),4);if(512==i){s=a+"-1("+t.typedescr+")"}else s=a+"("+t.typedescr+")";void 0==e[s]?e[s]={name:s,value:1}:e[s].value++})),this.chartsIns.setOption(this.getChartsOption(Object.values(e)),!0)},getChartsOption:function(t){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"right"},grid:{top:5,left:20,right:5,bottom:5},series:[{type:"pie",radius:"70%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},x=b,y=r("2877"),$=Object(y["a"])(x,m,f,!1,null,null,null),w=$.exports,S=r("1078"),O=r("201d"),C=r("6e52"),F=r("a05b"),T={name:"messageReport",data:function(){return{activeName:"tabTotal",triggerOffsetV:45,show:!1,loading:!1,exportLoading1:!1,deviceid:"",exceptionCount:0,reissuesCount:0,alarmCount:0,date:new Date,messageList:[],messageBody:"",tableTitle:"",filterText:"",sortConfig:{sortMethod:function(t){var e=t.data,r=t.sortList,s=r[0],i=s.property,a=s.order,o=[];return o="desc"===a?"sn"==i?e.sort((function(t,e){return e.sn-t.sn})):"reissueStr"==i?e.sort((function(t,e){return e.reissue-t.reissue})):"course"==i?e.sort((function(t,e){return e.course-t.course})):"speed"==i?e.sort((function(t,e){return e.speed-t.speed})):"altitude"==i?e.sort((function(t,e){return e.altitude-t.altitude})):"gpsvalidnum"==i?e.sort((function(t,e){return e.gpsvalidnum-t.gpsvalidnum})):"updatetimeStr"==i?e.sort((function(t,e){return e.updatetime-t.updatetime})):"arrivedtimeStr"==i?e.sort((function(t,e){return e.arrivedtime-t.arrivedtime})):e.sort((function(t,e){var r=e[i]+"";return r.localeCompare(t[i])})):"asc"===a?"sn"==i?e.sort((function(t,e){return t.sn-e.sn})):"reissueStr"==i?e.sort((function(t,e){return t.reissue-e.reissue})):"course"==i?e.sort((function(t,e){return t.course-e.course})):"speed"==i?e.sort((function(t,e){return t.speed-e.speed})):"altitude"==i?e.sort((function(t,e){return t.altitude-e.altitude})):"gpsvalidnum"==i?e.sort((function(t,e){return t.gpsvalidnum-e.gpsvalidnum})):"updatetimeStr"==i?e.sort((function(t,e){return t.updatetime-e.updatetime})):"arrivedtimeStr"==i?e.sort((function(t,e){return t.arrivedtime-e.arrivedtime})):e.sort((function(t,e){var r=t[i]+"";return r.localeCompare(e[i])})):e.sort(),o}}}},mixins:[F["a"]],components:{SingleChoiceVehicle:n["a"],SelectDate:l["a"],TimeEchart:p["a"],TypeEchart:w,SplitPane:S["a"],LabelWrap:O["a"]},computed:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["isZh","singleDeviceid","distanceUnit","speedUnit"])),{},{ecahts1Style:function(){return{zIndex:"tabTotal"==this.activeName?999:1}},ecahts2Style:function(){return{zIndex:"details"==this.activeName?999:1}}}),watch:{date:function(){this.loading||this.handleQuery()},deviceid:function(t){this.setSingleDeviceid(t)}},methods:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["setSingleDeviceid"])),{},{rowClassName:function(t){var e=t.row;t.rowIndex;return e.isException?"row-low-yellow":""},onResizingEnd:function(){this.$refs.echartIns.resize(),this.$refs.typeEchart.resize()},scrollToRow:function(t){var e=this.messageList[this.messageList.length-1-t];this.$refs.xTable.setCurrentRow(e),this.$refs.xTable.scrollToRow(e)},handleRefresh:function(){var t=this,e=this.row,r={deviceid:this.deviceid,updatetime:e.updatetime,trackid:e.trackid};Object(u["db"])(r).then((function(s){var i=s.status,a=(s.cause,s.track);0==i&&(a.deviceid=r.deviceid,a.reissueStr=0==a.reissue?"":t.$t("header.yes"),a.messageType=t.getMessageType(a.messagetype),a.reportmodeStr=t.getReportModeStr(a.reportmode),a.updatetimeStr=d["a"].longToLocalDateTimeStr(a.updatetime),a.arrivedtimeStr=d["a"].longToLocalDateTimeStr(a.arrivedtime),a.gpsvalidnum<0&&(a.gpsvalidnum=""),a.updatetimeStr=d["a"].longToLocalDateTimeStr(a.updatetime),"zh"!==t.$i18n.locale&&(a.typedescr=Object(h["O"])(a.messagetype),"en"==t.$i18n.locale?(item.strstatus=item.strstatusen?item.strstatusen:"",item.stralarm=item.stralarmen?item.stralarmen:""):(item.strstatus=item.strstatusen?Object(h["y"])(item.strstatusen):"",item.stralarm=item.stralarmen?Object(h["Wb"])(item.stralarmen):"")),Object.assign(e,a),t.messageBody=JSON.stringify(a)),t.$XModal.message({message:t.$t("monitor.refreshLocationSucc"),status:"success",zIndex:9999})}))},filterTypeDesc:function(){var t=this.filterText.trim();if(t){t=t.toLowerCase();for(var e=[],r=0;r<this.cachedata.length;r++){var s=this.cachedata[r];(s.typedescr&&-1!=s.typedescr.toLowerCase().indexOf(t)||s.strstatus&&-1!=s.strstatus.toLowerCase().indexOf(t)||s.stralarm&&-1!=s.stralarm.toLowerCase().indexOf(t)||s.messageType&&-1!=s.messageType.toLowerCase().indexOf(t)||s.reissueStr&&-1!=s.reissueStr.toLowerCase().indexOf(t)||s.gotsrc&&-1!=s.gotsrc.toLowerCase().indexOf(t))&&e.push(s)}this.messageList=e}else this.messageList=this.cachedata},cellclick:function(t){var e=this,r=t.row,s=t.rowIndex;if(this.show){this.row=r;var i={deviceid:this.deviceid,updatetime:r.updatetime,trackid:r.trackid};Object(c["u"])(i).then((function(t){e.messageBody=JSON.stringify(t.track),e.show=!0}))}var a=r.updatetimeStr;this.$refs.echartIns.chartsIns.setOption({xAxis:{axisPointer:{value:a}}});var o=this.messageList.length-s-1;o>0&&this.$refs.echartIns.chartsIns.dispatchAction({type:"showTip",seriesIndex:2,dataIndex:o})},cellDblclick:function(t){var e=this,r=t.row;this.row=r;var s={deviceid:this.deviceid,updatetime:r.updatetime,trackid:r.trackid};Object(c["u"])(s).then((function(t){e.messageBody=JSON.stringify(t.track),e.show=!0}))},handleQuery:function(){var t=this,e=this.deviceid;if(""!=e){this.cachedata=[];var r=d["a"].format(this.date,"yyyy-MM-dd"),s={deviceid:e,lbs:1,timezone:d["a"].getOffset(),interval:-1,begintime:"".concat(r," 00:00:00"),endtime:"".concat(r," 23:59:59")},i=this.$refs.echartIns,a=this.$refs.typeEchart;this.loading=!0,this.tableTitle=C["a"].getDeviceNameByDeviceId(e)+"-"+e,Object(c["t"])(s).then((function(e){var s=e.records;t.queryDateRange=r,t.loading=!1;var o=[],n=0,l=0,c=0;s&&(s.sort((function(t,e){return e.updatetime-t.updatetime})),s.forEach((function(e){var r=e.arrivedtime-e.updatetime;e.isException=r>6e5&&1!=e.reissue,e.isException?(n++,e.exception=t.$t("missing.exception")):e.exception="",1==e.reissue&&l++,e.gotsrc=Object(h["C"])(e),e.reissueStr=0==e.reissue?"":t.$t("header.yes"),e.totaldistance=Object(h["d"])(e.totaldistance),e.messageType=t.getMessageType(e.messagetype),e.reportmodeStr=t.getReportModeStr(e.reportmode),e.updatetimeStr=d["a"].longToLocalDateTimeStr(e.updatetime),e.arrivedtimeStr=d["a"].longToLocalDateTimeStr(e.arrivedtime),e.gpsvalidnum<0&&(e.gpsvalidnum=""),e.speed=Object(h["e"])(e.speed).toFixed(2),e.stralarmen&&c++,"zh"!==t.$i18n.locale&&(e.typedescr=Object(h["O"])(e.messagetype),"en"==t.$i18n.locale?(e.strstatus=e.strstatusen?e.strstatusen:"",e.stralarm=e.stralarmen?e.stralarmen:""):(e.strstatus=e.strstatusen?Object(h["y"])(e.strstatusen):"",e.stralarm=e.stralarmen?Object(h["Wb"])(e.stralarmen):""))})),o=s),i.updateChartsOption(o),a.updateChartsOption(o),t.cachedata=o,t.messageList=o,o.length>0&&setTimeout((function(){t.$refs.xTable.scrollToRow(o[0])}),300),t.exceptionCount=n,t.reissuesCount=l,t.alarmCount=c}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if(this.messageList.length){var t=[[this.$t("reportForm.sn"),this.$t("reportForm.messageType"),this.$t("reportForm.typeDescr"),this.$t("reportForm.status"),this.$t("reportForm.strstatus"),this.$t("reportForm.alarm"),this.$t("missing.exception"),this.$t("reportForm.reissue"),this.$t("reportForm.updatetimeStr"),this.$t("reportForm.arrivedtimeStr"),this.$t("reportForm.GPSNumber"),this.$t("reportForm.reportmodeStr"),this.$t("reportForm.callat"),this.$t("reportForm.callon"),this.$t("reportForm.radius"),this.$t("reportForm.speed")+this.speedUnit,this.$t("reportForm.recorderspeedStr"),this.$t("reportForm.totalMileage"),this.$t("reportForm.altitude"),this.$t("reportForm.course"),this.$t("reportForm.gotsrc"),this.$t("reportForm.rxlevel")]];this.messageList.forEach((function(e,r){var s=[];s.push(e.sn),s.push(e.messageType),s.push(e.typedescr),s.push(e.status),s.push(e.strstatus),s.push(e.stralarm),s.push(e.exception),s.push(e.reissueStr),s.push(e.updatetimeStr),s.push(e.arrivedtimeStr),s.push(e.gpsvalidnum),s.push(e.reportmodeStr),s.push(e.callat),s.push(e.callon),s.push(e.radius),s.push(e.speed),s.push(e.recorderspeed),s.push(e.totaldistance),s.push(e.altitude),s.push(e.course),s.push(e.gotsrc),s.push(e.rxlevel),t.push(s)}));var e={title:this.$t("reportForm.messageReport")+" - "+this.deviceid,data:t,dateRange:this.queryDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}},getMessageType:function(t){var e=t,r=null,s="0x"+this.padPreZero(parseInt(t,10).toString(16),4);if(512==e){var i=4==(4&status);r=i?s+"-1("+t+")":s+"-0("+t+")"}else r=s+"("+t+")";return r},padPreZero:function(t,e){var r=t,s=t.toString().length;if(s<e)for(var i=e-s,a=0;a<i;a++)r="0"+r;return r},getReportModeStr:function(t){var e="0x"+t.toString(16);switch(t){case 0:e+="定时上报";break;case 1:e+="定距上报";break;case 2:e+="拐点上传";break;case 3:e+="ACC状态改变上传";break;case 4:e+="运动变静止最后一个点";break;case 5:e+="网络重连最后一个有效点";break;case 6:e+="星历更新强制上传 GPS点";break;case 7:e+="按键上传定位点";break;case 8:e+="开机上报位置信息";break;case 9:e+="未使用";break;case 10:e+="静止后上报最后的经纬度且时间更新";break;case 11:e+="WiFi解析经纬度上传包";break;case 12:e+="立即定位指令上报";break;case 13:e+="设备静止后上报最后的经纬度";break;case 14:e+="静止状态定时上传";break;case-1:e+="-1";break}return e}}),mounted:function(){this.singleDeviceid&&(this.deviceid=this.singleDeviceid)}},k=T,M=(r("9bdf"),Object(y["a"])(k,s,i,!1,null,null,null)),I=M.exports;e["default"]=I},"5aff":function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"h",(function(){return i})),r.d(e,"l",(function(){return a})),r.d(e,"k",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return c})),r.d(e,"f",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"m",(function(){return h})),r.d(e,"i",(function(){return p})),r.d(e,"a",(function(){return m})),r.d(e,"j",(function(){return f}));var s="#2D9F28",i="#89C6F2",a="#FFC65E",o="red",n="#1EBEFF",l="#E505F7",c="#40A703",u="#F27908",d="#F180D1",h="#0F1F46",p="#000000",m={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(t,e,r,s,i){var a=t[0],o=i.contentSize,n=i.viewSize;return a+10>n[0]-o[0]?a=a-o[0]-10:a+=10,[a,"0%"]}},9758:function(t,e,r){},"9bdf":function(t,e,r){"use strict";r("adea")},acd3:function(t,e,r){"use strict";r("9758")},adea:function(t,e,r){},eb10:function(t,e,r){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},i=[],a=r("ade3"),o=r("5530"),n=(r("14d9"),r("b0c0"),r("a9e3"),r("b680"),r("43c8")),l=r.n(n),c=r("2f62"),u=r("5aff"),d=r("c276"),h={name:"TimeEchart",computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["isZh"])),{},{distanceUnit:function(){return this.$store.state.userSetting.unit_distance},speedUnit:function(){return this.$store.state.userSetting.unit_speed}}),methods:{initChart:function(){var t=this;this.disMin=0,this.recvtime=[],this.speeds=[],this.mileages=[],this.status=[],this.rxlevels=[],this.gpsvalidnums=[];var e=this.$t("reportForm.speed"),r=this.$t("reportForm.mileage"),s=this.$t("reportForm.reissue"),i=(s=this.$t("reportForm.reissue"),this.$t("reportForm.GPSNumber")),o=this.$t("reportForm.rxlevel");this.selectedLegend=Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},e,!1),r,!0),s,!0),i,!1),o,!1),this.chartsIns=l.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(e){var r=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",r)&&t.recvtime.length){var s=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];t.$parent.$parent.scrollToRow&&t.$parent.$parent.scrollToRow(s)}})),this.chartsIns.on("legendselectchanged",(function(e){t.selectedLegend=e.selected}))},updateChartsOption:function(t){var e=this.isZh,r=[],s=[],i=[],a=[],o=[],n=[],l=[],c=0;t.length>0&&(c=t[t.length-1].totaldistance);var u=0,h=t.length-1;while(h>=0){var p=t[h],m=Number(p.gpsvalidnum),f=Number(Object(d["d"])(1e3*(p.totaldistance-c)).toFixed(2));m<=0&&(m=u),u=m,r.push(p.updatetimeStr),s.push(Number(p.speed)),i.push(f),n.push(Number(p.rxlevel)),l.push(m),p.strstatus?a.push(e?p.strstatus:p.strstatusen):a.push(""),o.push(0!=p.reissue?f:""),h--}this.recvtime=r,this.speeds=s,this.mileages=i,this.status=a,this.reissues=o,this.rxlevels=n,this.gpsvalidnums=l,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var t=this,e=this.$t("reportForm.speed"),r=this.$t("reportForm.mileage"),s=this.$t("reportForm.time"),i=this.$t("reportForm.status"),a=this.$t("reportForm.reissue"),n=(a=this.$t("reportForm.reissue"),this.$t("reportForm.GPSNumber")),l=this.$t("reportForm.rxlevel"),c=this.distanceUnit,h=this.speedUnit;return{title:{text:s,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:50,y:40,x2:50,y2:40,bottom:55},tooltip:Object(o["a"])(Object(o["a"])({trigger:"axis"},u["a"]),{},{formatter:function(i){var o="<div>".concat(i[0].name,"</div>");for(var p in i){var m=i[p].seriesName,f=i[p].value;if(m&&m!=s)if(m==r)o+=Object(d["k"])(u["b"],m,f,c);else if(m==e)o+=Object(d["k"])(u["h"],m,f,h);else if(m==a)f=""===f?t.$t("header.no"):t.$t("header.yes"),o+=Object(d["k"])("red",m,f,"");else{var g=u["m"];m==n?g="#0952C8":m==l&&(g="#0DBC79"),o+=Object(d["k"])(g,m,f,"")}}return'<div style="width:230px">'.concat(o,"</div>")},position:u["j"]}),legend:{data:[e,r,a,n,l],selected:this.selectedLegend,x:"left"},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1,show:!0},data:this.recvtime,axisPointer:{type:"line",value:"",snap:!1,lineStyle:{color:"#7581BD",width:2},handle:{show:!0,color:"transparent"}}},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:10},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],yAxis:[{name:e+this.speedUnit,type:"value",nameTextStyle:10,nameGap:5},{name:r+this.distanceUnit,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value}"},axisTick:{show:!1}}],series:[{name:s,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:e,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:u["h"],data:this.speeds},{name:r,type:"line",symbol:"none",yAxisIndex:1,color:u["b"],smooth:!0,data:this.mileages},{name:n,type:"line",symbol:"none",yAxisIndex:0,color:"#0952C8",smooth:!0,data:this.gpsvalidnums},{name:l,type:"line",symbol:"none",yAxisIndex:0,color:"#0DBC79",smooth:!0,data:this.rxlevels},{smooth:!0,name:i,type:"line",symbol:"none",color:u["m"],data:this.status},{smooth:!0,name:a,type:"line",yAxisIndex:1,symbol:"none",color:"red",data:this.reissues}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},p=h,m=r("2877"),f=Object(m["a"])(p,s,i,!1,null,null,null);e["a"]=f.exports}}]);