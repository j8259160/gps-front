(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a7ef81"],{"10b5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"oiling full"},[i("div",{staticClass:"oiling-wrap full"},[i("page-frame",{attrs:{headerTitle:t.$t("record.oilingReport"),queryTime:t.queryTime,listLength:t.dataList.length,isCustomTime:"",showSwitch:""},on:{"select-day":t.onSelectTime}},[i("div",{staticClass:"data-list"},[0==t.dataList.length?i("div",{staticClass:"full",staticStyle:{"background-color":"#fff"}},[i("van-empty",{staticClass:"custom-image",attrs:{description:t.$t("tips.noData"),image:t.imageSrc}})],1):t._e(),t._l(t.dataList,(function(e,a){return[i("oiling-item",{attrs:{data:e},nativeOn:{click:function(i){return t.handleClick(e.deviceid)}}})]}))],2)])],1),i("router-view")],1)},s=[],r=i("5530"),n=(i("8a79"),i("159b"),i("a9e3"),i("b680"),i("2f62")),c=i("b562"),o=i("c276"),l=i("d503"),d=i("dce3"),u=i("5101"),h={name:"Oiling",components:{PageFrame:l["a"],OilingItem:d["a"]},beforeRouteUpdate:function(t,e,i){if(i(),e.path.endsWith("/search")){var a=this.$route.query.updated;1==a&&this.queryOilingRecord()}},data:function(){return{imageSrc:i("6095"),queryTime:0,dataList:[]}},methods:Object(r["a"])({back:function(){this.$router.push("/home")},onSelectTime:function(t){if("number"==typeof t)this.queryTime=t,this.dataList=[],this.queryOilingRecord();else{this.queryTime=t.queryTime;var e=t.startDate,i=t.endDate;if(t.isQuery)if(e<=i){this.clearData();var a={startday:t.startDate,endday:t.endDate,offset:u["a"].getOffset()};this.queryOilingRecord(a)}else this.$toast(this.$t("tips.startDateAndEndDateTips"))}},clearData:function(){this.dataList=[],this.cacheList=[]},queryOilingRecord:function(t){var e=this,i=null;i=t||Object(o["k"])(this.queryTime),i.devices=this.selectedList,i.oilstate=1,i.oilindex=0,i.devices.length>0?Object(c["n"])(i).then((function(t){var i=t.status,a=t.records,s=t.addressmap;0===i?(e.addressmap=s,e.cacheList=e.getDataList(a),e.filterData()):(e.addressmap={},e.clearData()),e.$toast.clear()})).catch((function(t){e.clearData(),e.$toast(e.$t("tips.networkError"))})):this.$toast(this.$t("record.selecteDevicetip"),{duration:1e4})},filterData:function(){if(this.isShowAllData)this.dataList=this.cacheList;else{var t=[];this.cacheList.forEach((function(e){e.totaloil>0&&t.push(e)})),this.dataList=t}},getDataList:function(t){var e=this,i=[],a={};return t.forEach((function(t){var s=t.deviceid,r=0,n=e.deviceNames[s],c=n.devicename,l=n.creater;t.records.forEach((function(t){t.eoil=t.eoil/100,t.soil=t.soil/100,r+=t.eoil-t.soil,t.address=Object(o["i"])(e.addressmap,t.slat,t.slon)})),i.push({devicename:c,deviceid:s,creater:l,totaloil:Number(r.toFixed(2)),count:t.records.length,imgSrc:Object(o["h"])(e.lastPositon[s])}),a[s]=t.records})),this.globalRecords=a,i.sort((function(t,e){return e.totaloil-t.totaloil})),i},handleClick:function(t){var e=this.deviceNames[t].devicename,i=this.globalRecords[t];0==i.length?this.$toast(this.$t("tips.noDataToast")):(i.sort((function(t,e){return e.begintime-t.begintime})),this.setSelectedRecords({devicename:e,deviceid:t,records:i}),this.$router.push("/oiling/oilingdetail?queryTime=".concat(this.queryTime)))}},Object(n["d"])(["setSelectedRecords"])),watch:{isShowAllData:function(){this.filterData()}},beforeDestroy:function(){this.$toast.clear()},computed:Object(r["a"])(Object(r["a"])({},Object(n["e"])(["groups","selectedList","deviceNames","isShowAllData"])),{},{lastPositon:function(){return this.$store.state.lastPositon}}),mounted:function(){this.cacheList=[],this.queryOilingRecord()}},f=h,m=(i("6dd6"),i("2877")),v=Object(m["a"])(f,a,s,!1,null,null,null);e["default"]=v.exports},3617:function(t,e,i){},"6dd6":function(t,e,i){"use strict";i("3617")},"7e4d":function(t,e,i){},"8a79":function(t,e,i){"use strict";var a=i("23e7"),s=i("06cf").f,r=i("50c4"),n=i("5a34"),c=i("1d80"),o=i("ab13"),l=i("c430"),d="".endsWith,u=Math.min,h=o("endsWith"),f=!l&&!h&&!!function(){var t=s(String.prototype,"endsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!f&&!h},{endsWith:function(t){var e=String(c(this));n(t);var i=arguments.length>1?arguments[1]:void 0,a=r(e.length),s=void 0===i?a:u(r(i),a),o=String(t);return d?d.call(e,o,s):e.slice(s-o.length,s)===o}})},dce3:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"record-item"},[i("div",{staticClass:"record-item-title"},[i("div",{staticClass:"item-icon"},[i("img",{attrs:{src:t.data.imgSrc}})]),i("div",{staticClass:"item-title"},[i("div",{staticClass:"item-device-name"},[i("b",[t._v(t._s(t.data.devicename))])]),i("div",{staticClass:"item-device-id",style:t.textSty},[t._v(t._s(t.$t("record.deviceId"))+": "+t._s(t.data.deviceid))])])]),i("div",{staticClass:"record-item-content"},[i("div",{staticClass:"ellipsis",style:t.textSty},[t._v(t._s(t.$t("record.creater"))+": "+t._s(t.data.creater))]),i("div",{style:t.textSty},[t._v(t._s(t.stateStr)+": "+t._s(t.data.count))]),i("div",{style:t.textSty},[t._v(t._s(t.amountStr)+": "+t._s(t.data.totaloil)+"L")])])])},s=[],r=(i("a9e3"),i("ae60")),n={name:"OilingItem",components:{Icon:r["a"]},props:{data:{type:Object,default:function(){return{}}},textColor:{type:String,default:"#000000"},state:{type:Number,default:1}},computed:{textSty:function(){return{color:this.textColor}},stateStr:function(){return 1==this.state?this.$t("record.oilingCount"):this.$t("record.oilleakCount")},amountStr:function(){return 1==this.state?this.$t("record.fuelVolume"):this.$t("record.oilleakVolume")}}},c=n,o=(i("e126"),i("2877")),l=Object(o["a"])(c,a,s,!1,null,null,null),d=l.exports;e["a"]=d},e126:function(t,e,i){"use strict";i("7e4d")}}]);