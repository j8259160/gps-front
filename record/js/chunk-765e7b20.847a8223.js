(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-765e7b20"],{"2c7d":function(t,e,i){"use strict";i("dca4")},d7a6:function(t,e,i){"use strict";(function(e){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function i(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:r});else{var i=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[r].concat(t.init):r,i.call(this,t)}}function r(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}var r="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},s=r.__VUE_DEVTOOLS_GLOBAL_HOOK__;function n(t){s&&(t._devtoolHook=s,s.emit("vuex:init",t),s.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){s.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){s.emit("vuex:action",t,e)}),{prepend:!0}))}function o(t,e){return t.filter(e)[0]}function a(t,e){if(void 0===e&&(e=[]),null===t||"object"!==typeof t)return t;var i=o(e,(function(e){return e.original===t}));if(i)return i.copy;var r=Array.isArray(t)?[]:{};return e.push({original:t,copy:r}),Object.keys(t).forEach((function(i){r[i]=a(t[i],e)})),r}function c(t,e){Object.keys(t).forEach((function(i){return e(t[i],i)}))}function u(t){return null!==t&&"object"===typeof t}function h(t){return t&&"function"===typeof t.then}function p(t,e){return function(){return t(e)}}var d=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=("function"===typeof i?i():i)||{}},m={namespaced:{configurable:!0}};m.namespaced.get=function(){return!!this._rawModule.namespaced},d.prototype.addChild=function(t,e){this._children[t]=e},d.prototype.removeChild=function(t){delete this._children[t]},d.prototype.getChild=function(t){return this._children[t]},d.prototype.hasChild=function(t){return t in this._children},d.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},d.prototype.forEachChild=function(t){c(this._children,t)},d.prototype.forEachGetter=function(t){this._rawModule.getters&&c(this._rawModule.getters,t)},d.prototype.forEachAction=function(t){this._rawModule.actions&&c(this._rawModule.actions,t)},d.prototype.forEachMutation=function(t){this._rawModule.mutations&&c(this._rawModule.mutations,t)},Object.defineProperties(d.prototype,m);var l=function(t){this.register([],t,!1)};function f(t,e,i){if(e.update(i),i.modules)for(var r in i.modules){if(!e.getChild(r))return void 0;f(t.concat(r),e.getChild(r),i.modules[r])}}l.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},l.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,i){return e=e.getChild(i),t+(e.namespaced?i+"/":"")}),"")},l.prototype.update=function(t){f([],this.root,t)},l.prototype.register=function(t,e,i){var r=this;void 0===i&&(i=!0);var s=new d(e,i);if(0===t.length)this.root=s;else{var n=this.get(t.slice(0,-1));n.addChild(t[t.length-1],s)}e.modules&&c(e.modules,(function(e,s){r.register(t.concat(s),e,i)}))},l.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1],r=e.getChild(i);r&&r.runtime&&e.removeChild(i)},l.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1];return!!e&&e.hasChild(i)};var v;var g=function(t){var e=this;void 0===t&&(t={}),!v&&"undefined"!==typeof window&&window.Vue&&M(window.Vue);var i=t.plugins;void 0===i&&(i=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new l(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new v,this._makeLocalGettersCache=Object.create(null);var s=this,o=this,a=o.dispatch,c=o.commit;this.dispatch=function(t,e){return a.call(s,t,e)},this.commit=function(t,e,i){return c.call(s,t,e,i)},this.strict=r;var u=this._modules.root.state;S(this,u,[],this._modules.root),_(this,u),i.forEach((function(t){return t(e)}));var h=void 0!==t.devtools?t.devtools:v.config.devtools;h&&n(this)},y={state:{configurable:!0}};function b(t,e,i){return e.indexOf(t)<0&&(i&&i.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function w(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;S(t,i,[],t._modules.root,!0),_(t,i,e)}function _(t,e,i){var r=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,n={};c(s,(function(e,i){n[i]=p(e,t),Object.defineProperty(t.getters,i,{get:function(){return t._vm[i]},enumerable:!0})}));var o=v.config.silent;v.config.silent=!0,t._vm=new v({data:{$$state:e},computed:n}),v.config.silent=o,t.strict&&E(t),r&&(i&&t._withCommit((function(){r._data.$$state=null})),v.nextTick((function(){return r.$destroy()})))}function S(t,e,i,r,s){var n=!i.length,o=t._modules.getNamespace(i);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!n&&!s){var a=k(e,i.slice(0,-1)),c=i[i.length-1];t._withCommit((function(){v.set(a,c,r.state)}))}var u=r.context=$(t,o,i);r.forEachMutation((function(e,i){var r=o+i;C(t,r,e,u)})),r.forEachAction((function(e,i){var r=e.root?i:o+i,s=e.handler||e;O(t,r,s,u)})),r.forEachGetter((function(e,i){var r=o+i;j(t,r,e,u)})),r.forEachChild((function(r,n){S(t,e,i.concat(n),r,s)}))}function $(t,e,i){var r=""===e,s={dispatch:r?t.dispatch:function(i,r,s){var n=A(i,r,s),o=n.payload,a=n.options,c=n.type;return a&&a.root||(c=e+c),t.dispatch(c,o)},commit:r?t.commit:function(i,r,s){var n=A(i,r,s),o=n.payload,a=n.options,c=n.type;a&&a.root||(c=e+c),t.commit(c,o,a)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return x(t,e)}},state:{get:function(){return k(t.state,i)}}}),s}function x(t,e){if(!t._makeLocalGettersCache[e]){var i={},r=e.length;Object.keys(t.getters).forEach((function(s){if(s.slice(0,r)===e){var n=s.slice(r);Object.defineProperty(i,n,{get:function(){return t.getters[s]},enumerable:!0})}})),t._makeLocalGettersCache[e]=i}return t._makeLocalGettersCache[e]}function C(t,e,i,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push((function(e){i.call(t,r.state,e)}))}function O(t,e,i,r){var s=t._actions[e]||(t._actions[e]=[]);s.push((function(e){var s=i.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return h(s)||(s=Promise.resolve(s)),t._devtoolHook?s.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):s}))}function j(t,e,i,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return i(r.state,r.getters,t.state,t.getters)})}function E(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function k(t,e){return e.reduce((function(t,e){return t[e]}),t)}function A(t,e,i){return u(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function M(t){v&&t===v||(v=t,i(v))}y.state.get=function(){return this._vm._data.$$state},y.state.set=function(t){0},g.prototype.commit=function(t,e,i){var r=this,s=A(t,e,i),n=s.type,o=s.payload,a=(s.options,{type:n,payload:o}),c=this._mutations[n];c&&(this._withCommit((function(){c.forEach((function(t){t(o)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},g.prototype.dispatch=function(t,e){var i=this,r=A(t,e),s=r.type,n=r.payload,o={type:s,payload:n},a=this._actions[s];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(o,i.state)}))}catch(u){0}var c=a.length>1?Promise.all(a.map((function(t){return t(n)}))):a[0](n);return new Promise((function(t,e){c.then((function(e){try{i._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(o,i.state)}))}catch(u){0}t(e)}),(function(t){try{i._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(o,i.state,t)}))}catch(u){0}e(t)}))}))}},g.prototype.subscribe=function(t,e){return b(t,this._subscribers,e)},g.prototype.subscribeAction=function(t,e){var i="function"===typeof t?{before:t}:t;return b(i,this._actionSubscribers,e)},g.prototype.watch=function(t,e,i){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,i)},g.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},g.prototype.registerModule=function(t,e,i){void 0===i&&(i={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),S(this,this.state,t,this._modules.get(t),i.preserveState),_(this,this.state)},g.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var i=k(e.state,t.slice(0,-1));v.delete(i,t[t.length-1])})),w(this)},g.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},g.prototype.hotUpdate=function(t){this._modules.update(t),w(this,!0)},g.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(g.prototype,y);var T=P((function(t,e){var i={};return L(e).forEach((function(e){var r=e.key,s=e.val;i[r]=function(){var e=this.$store.state,i=this.$store.getters;if(t){var r=G(this.$store,"mapState",t);if(!r)return;e=r.context.state,i=r.context.getters}return"function"===typeof s?s.call(this,e,i):e[s]},i[r].vuex=!0})),i})),N=P((function(t,e){var i={};return L(e).forEach((function(e){var r=e.key,s=e.val;i[r]=function(){var e=[],i=arguments.length;while(i--)e[i]=arguments[i];var r=this.$store.commit;if(t){var n=G(this.$store,"mapMutations",t);if(!n)return;r=n.context.commit}return"function"===typeof s?s.apply(this,[r].concat(e)):r.apply(this.$store,[s].concat(e))}})),i})),D=P((function(t,e){var i={};return L(e).forEach((function(e){var r=e.key,s=e.val;s=t+s,i[r]=function(){if(!t||G(this.$store,"mapGetters",t))return this.$store.getters[s]},i[r].vuex=!0})),i})),F=P((function(t,e){var i={};return L(e).forEach((function(e){var r=e.key,s=e.val;i[r]=function(){var e=[],i=arguments.length;while(i--)e[i]=arguments[i];var r=this.$store.dispatch;if(t){var n=G(this.$store,"mapActions",t);if(!n)return;r=n.context.dispatch}return"function"===typeof s?s.apply(this,[r].concat(e)):r.apply(this.$store,[s].concat(e))}})),i})),H=function(t){return{mapState:T.bind(null,t),mapGetters:D.bind(null,t),mapMutations:N.bind(null,t),mapActions:F.bind(null,t)}};function L(t){return R(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function R(t){return Array.isArray(t)||u(t)}function P(t){return function(e,i){return"string"!==typeof e?(i=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,i)}}function G(t,e,i){var r=t._modulesNamespaceMap[i];return r}function W(t){void 0===t&&(t={});var e=t.collapsed;void 0===e&&(e=!0);var i=t.filter;void 0===i&&(i=function(t,e,i){return!0});var r=t.transformer;void 0===r&&(r=function(t){return t});var s=t.mutationTransformer;void 0===s&&(s=function(t){return t});var n=t.actionFilter;void 0===n&&(n=function(t,e){return!0});var o=t.actionTransformer;void 0===o&&(o=function(t){return t});var c=t.logMutations;void 0===c&&(c=!0);var u=t.logActions;void 0===u&&(u=!0);var h=t.logger;return void 0===h&&(h=console),function(t){var p=a(t.state);"undefined"!==typeof h&&(c&&t.subscribe((function(t,n){var o=a(n);if(i(t,p,o)){var c=V(),u=s(t),d="mutation "+t.type+c;I(h,d,e),h.log("%c prev state","color: #9E9E9E; font-weight: bold",r(p)),h.log("%c mutation","color: #03A9F4; font-weight: bold",u),h.log("%c next state","color: #4CAF50; font-weight: bold",r(o)),q(h)}p=o})),u&&t.subscribeAction((function(t,i){if(n(t,i)){var r=V(),s=o(t),a="action "+t.type+r;I(h,a,e),h.log("%c action","color: #03A9F4; font-weight: bold",s),q(h)}})))}}function I(t,e,i){var r=i?t.groupCollapsed:t.group;try{r.call(t,e)}catch(s){t.log(e)}}function q(t){try{t.groupEnd()}catch(e){t.log("—— log end ——")}}function V(){var t=new Date;return" @ "+B(t.getHours(),2)+":"+B(t.getMinutes(),2)+":"+B(t.getSeconds(),2)+"."+B(t.getMilliseconds(),3)}function U(t,e){return new Array(e+1).join(t)}function B(t,e){return U("0",e-t.toString().length)+t}var z={Store:g,install:M,version:"3.6.2",mapState:T,mapMutations:N,mapGetters:D,mapActions:F,createNamespacedHelpers:H,createLogger:W};t.exports=z}).call(this,i("c8ba"))},dca4:function(t,e,i){},f9dc:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"oiling-detail"},[i("detail-header",{attrs:{"query-time":t.queryTime,title:t.$t("record.tempHumiDetails"),state:100,showCount:"",showRightBtn:"",showRightRefresh:""},on:{"select-action":t.selectAction}}),i("div",{staticClass:"detail-item-content",staticStyle:{position:"relative"}},[t.isEmpty?i("div",{staticClass:"full",staticStyle:{"background-color":"#fff"}},[i("van-empty",{staticClass:"custom-image",attrs:{description:t.$t("tips.noData"),image:t.imageSrc}})],1):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"detail-item-content-echarts",style:{height:t.chartsHeight+"px"}},[i("div",{style:{width:"100%",height:t.chartsHeight+"px"},attrs:{id:"temp-charts"}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEmpty,expression:"!isEmpty"}],staticClass:"detail-item-content-table",style:{height:t.chartsHeight+"px"}},[i("div",{staticClass:"temp-humi-header"},[i("div",{staticStyle:{width:"30%",color:"#000000"},domProps:{textContent:t._s(t.$t("record.time"))}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp1Str],expression:"selected[temp1Str]"}],style:t.itemWidth,domProps:{textContent:t._s(t.$t("record.temp1"))}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp2Str],expression:"selected[temp2Str]"}],style:t.itemWidth,domProps:{textContent:t._s(t.$t("record.temp2"))}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp3Str],expression:"selected[temp3Str]"}],style:t.itemWidth,domProps:{textContent:t._s(t.$t("record.temp3"))}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp4Str],expression:"selected[temp4Str]"}],style:t.itemWidth,domProps:{textContent:t._s(t.$t("record.temp4"))}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.humi1Str],expression:"selected[humi1Str]"}],style:t.itemWidth,domProps:{textContent:t._s(t.$t("record.humi1"))}})]),i("div",{ref:"tableBody",staticClass:"detail-item-content-table-body"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._l(t.dataList,(function(e,r){return[i("div",{key:r,staticClass:"temp-humi-item",style:{backgroundColor:t.rowIndex==r?"#ECF2F6":e.bgColor}},[i("div",{staticStyle:{width:"30%"}},[i("span",{domProps:{textContent:t._s(e.time)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp1Str],expression:"selected[temp1Str]"}],style:t.itemWidth},[i("span",{domProps:{textContent:t._s(e.temp1)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp2Str],expression:"selected[temp2Str]"}],style:t.itemWidth},[i("span",{domProps:{textContent:t._s(e.temp2)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp3Str],expression:"selected[temp3Str]"}],style:t.itemWidth},[i("span",{domProps:{textContent:t._s(e.temp3)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.temp4Str],expression:"selected[temp4Str]"}],style:t.itemWidth},[i("span",{domProps:{textContent:t._s(e.temp4)}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selected[t.humi1Str],expression:"selected[humi1Str]"}],style:t.itemWidth},[i("span",{domProps:{textContent:t._s(e.humi1)}})])])]}))],2)],1)])]),i("van-popup",{attrs:{round:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-loading",{attrs:{type:"spinner",color:"#ffffff"}})],1)],1)},s=[],n=i("ade3"),o=i("5530"),a=(i("159b"),i("fb6a"),i("1276"),i("ac1f"),i("5319"),i("a9e3"),i("b680"),i("5101")),c=i("2f62"),u=i("43c8"),h=i.n(u),p=i("ae60"),d=i("2236"),m=i("c276"),l=i("b562"),f=i("d7a6"),v={name:"TempStatisticsDetail",filters:{dateTime:function(t){return a["a"].longToDateTimeStr(t,a["a"].getOffset())}},components:{DetailHeader:d["a"],Icon:p["a"]},data:function(){return{show:!0,isLoading:!0,imageSrc:i("6095"),queryTime:0,chartsHeight:0,selected:{},temp1Str:"",temp2Str:"",temp3Str:"",temp4Str:"",humi1Str:"",itemWidth:{width:"0%"},rowIndex:-1}},methods:Object(o["a"])(Object(o["a"])({},Object(f["mapMutations"])(["setSelectedRecords"])),{},{back:function(){this.$router.back()},onRefresh:function(){var t=this;this.isLoading=!0;var e=this.$parent.requestData,i=this.$parent.globalRecords,r=this.$parent.deviceNames,s=this.selectedDeviceId;e=Object(o["a"])({},e),e.deviceids=[s],Object(l["q"])(e).then((function(e){var n=e.records,o=e.addressmap;t.$toast.clear(),n=n[0].records,n.sort((function(t,e){return t.updatetime-e.updatetime})),n.forEach((function(e,i){e.alarmstatus=t.getTempStatusStr(e.alarmstatus),e.address=Object(m["i"])(o,e.callat,e.callon),e.alarmDuration=Object(m["r"])(e.duration,t)})),i[s]=n;var a=r[s].devicename;t.setSelectedRecords({devicename:a,deviceid:s,records:n}),setTimeout((function(){t.isLoading=!1}),300)}))},getTempStatusStr:function(t){var e="";switch(t){case-91:e=this.$t("record.lowTempWarning");break;case-1:e=this.$t("record.lowTempAlarm");break;case 91:e=this.$t("record.highTempWarning");break;case 1:e=this.$t("record.highTempAlarm");break}return e},selectAction:function(t){var e=t.type;"download"==e?this.downloadExcel():"refresh"==e?this.onRefresh():this.printExcel()},showEcharts:function(){var t=this;this.show=!0;var e={recvtime:[],temp1:[],temp2:[],temp3:[],temp4:[],humi1:[]};this.selectedRecords.forEach((function(t){var i=536870911==t.temp1?"-":Object(m["d"])(t.temp1/100),r=536870911==t.temp2?"-":Object(m["d"])(t.temp2/100),s=536870911==t.temp3?"-":Object(m["d"])(t.temp3/100),n=536870911==t.temp4?"-":Object(m["d"])(t.temp4/100),o=t.humi1<0||t.humi1>1e3?"-":t.humi1/10;e.recvtime.push(t.dateStr.slice(5,t.dateStr.length)),e.temp1.push(i),e.temp2.push(r),e.temp3.push(s),e.temp4.push(n),e.humi1.push(o)})),setTimeout((function(){t.charts.setOption(Object(m["l"])(e,t.temp,t.humi,t.time,t.tempHumiStr,t.temp1Str,t.temp2Str,t.temp3Str,t.temp4Str,t.humi1Str,t.selected)),t.charts.resize(),t.charts.on("legendselectchanged",(function(e){t.selected=e.selected,t.setItemWidth()})),t.charts.getZr().on("click",(function(e){var i=[e.offsetX,e.offsetY];if(t.charts.containPixel("grid",i)&&t.dataList.length){var r=t.charts.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];r=t.dataList.length-r-1,t.$refs.tableBody.scrollTop=30*r,t.rowIndex=r}})),t.setItemWidth(),t.show=!1}),300)},printExcel:function(){var t=this.selectedDeviceId,e=this.$store.state.deviceNames[t].devicename,i=this.selected,r=i[this.temp1Str],s=i[this.temp2Str],n=i[this.temp3Str],o=i[this.temp4Str],a=i[this.humi1Str],c=[[e]],u=[this.$t("record.time")];r&&u.push(this.$t("record.temp1")),s&&u.push(this.$t("record.temp2")),n&&u.push(this.$t("record.temp3")),o&&u.push(this.$t("record.temp4")),a&&u.push(this.$t("record.humi1")),c.push(u);var h=this.temperatureUnit;this.selectedRecords.forEach((function(t){var e=[],i=536870911==t.temp1?"-":Object(m["d"])(t.temp1/100)+h,u=536870911==t.temp2?"-":Object(m["d"])(t.temp2/100)+h,p=536870911==t.temp3?"-":Object(m["d"])(t.temp3/100)+h,d=536870911==t.temp4?"-":Object(m["d"])(t.temp4/100)+h,l=t.humi1<0||t.humi1>1e3?"-":t.humi1/10+"%";e.push(t.dateStr.slice(5,t.dateStr.length)),r&&e.push(i),s&&e.push(u),n&&e.push(p),o&&e.push(d),a&&e.push(l),c.push(e)}));var p=JSON.stringify(c);window.flutter_inappwebview.callHandler("blobToBase64Handler",p,"print","")},downloadExcel:function(){if(this.selectedRecords.length>0){var t="zh"==this.$i18n.locale;this.$toast.loading({message:t?"下载中":"Downloading",forbidClick:!0});var e=this.selectedDeviceId,i=this.$store.state.deviceNames[e].devicename,r=this.selected,s=r[this.temp1Str],n=r[this.temp2Str],o=r[this.temp3Str],a=r[this.temp4Str],c=r[this.humi1Str],u=[[this.$t("record.index"),this.$t("record.devicename"),this.$t("record.deviceid"),this.$t("record.time")]];s&&u[0].push(this.$t("record.temp1")),n&&u[0].push(this.$t("record.temp2")),o&&u[0].push(this.$t("record.temp3")),a&&u[0].push(this.$t("record.temp4")),c&&u[0].push(this.$t("record.humi1")),u[0].push(this.$t("record.status")),u[0].push(this.$t("record.address"));var h=this.temperatureUnit;this.selectedRecords.forEach((function(t,r){var p=[],d=536870911==t.temp1?"-":Object(m["d"])(t.temp1/100)+h,l=536870911==t.temp2?"-":Object(m["d"])(t.temp2/100)+h,f=536870911==t.temp3?"-":Object(m["d"])(t.temp3/100)+h,v=536870911==t.temp4?"-":Object(m["d"])(t.temp4/100)+h,g=t.humi1<0||t.humi1>1e3?"-":t.humi1/10+"%";p.push(r+1),p.push(i),p.push(e),p.push(t.dateStr),s&&p.push(d),n&&p.push(l),o&&p.push(f),a&&p.push(v),c&&p.push(g),p.push(t.strstatus?t.strstatus:"-"),p.push(t.address?t.address:"-"),u.push(p)}));var p=this.charts.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"});this.devicename=i;var d={title:this.$t("record.tempStatistics")+" "+i+"-"+e,data:u,dateRange:this.queryDetailDateRange,deviceid:e,devicename:i,imgData:{imgBase64:p,echartTitle:this.$t("record.tempAndHumidityCurve"),tableList:this.getImgDataList(e)}};console.log(d.imgData),new ExcelCls(d).exportExcel("download")}},getImgDataList:function(t){var e=this.selected[this.temp1Str],i=this.selected[this.temp2Str],r=this.selected[this.temp3Str],s=this.selected[this.temp4Str],n=this.selected[this.humi1Str],o=this.queryDetailDateRange.split(" - "),a=this.devicename;a=a.replace(/[*?:\\\/\[\]]/g,"");var c=[];c.push([a+" - "+t+" "+this.$t("record.tempAndHumidityCurve")]),c.push([this.$t("record.devicename"),a,this.$t("record.deviceid"),t]),c.push([this.$t("record.startDate"),o[0],this.$t("record.endDate"),o[1]]),c.push([this.$t("record.sensorType"),this.$t("record.maxValue"),this.$t("record.minValue"),this.$t("record.averageValue")]);var u=null,h=null,p=null,d=null,m=null;return e&&(u=[this.$t("record.temp1")],c.push(u)),i&&(h=[this.$t("record.temp2")],c.push(h)),r&&(p=[this.$t("record.temp3")],c.push(p)),s&&(d=[this.$t("record.temp4")],c.push(d)),n&&(m=[this.$t("record.humi1")],c.push(m)),this.pushTempAndHumiValue(u,h,p,d,m),c},pushTempAndHumiValue:function(t,e,i,r,s){var n=this.selected[this.temp1Str],o=this.selected[this.temp2Str],a=this.selected[this.temp3Str],c=this.selected[this.temp4Str],u=this.selected[this.humi1Str],h=99999,p=-99999,d=0,m=[],l=99999,f=-99999,v=0,g=[],y=99999,b=-99999,w=0,_=[],S=99999,$=-99999,x=0,C=[],O=99999,j=-99999,E=0,k=[],A=this.temperatureUnit;this.dataList.forEach((function(t){if(n&&"-"!=t.temp1){var e=Number(t.temp1.replace(A,""));e>p&&(p=e),e<h&&(h=e),m.push(e)}if(o&&"-"!=t.temp2){var i=Number(t.temp2.replace(A,""));i>f&&(f=i),i<l&&(l=i),g.push(i)}if(a&&"-"!=t.temp3){var r=Number(t.temp3.replace(A,""));r>b&&(b=r),r<y&&(y=r),_.push(r)}if(c&&"-"!=t.temp4){var s=Number(t.temp4.replace(A,""));s>$&&($=s),s<S&&(S=s),C.push(s)}if(u&&"-"!=t.humi1){var d=Number(t.humi1.replace("%",""));d>j&&(j=d),d<O&&(O=d),k.push(d)}})),n&&(-99999!==p&&99999!==h?(p=p.toFixed(2)+A,h=h.toFixed(2)+A,d=this.calculateAverage(m),d=d.toFixed(2)+A):p=h=d="-",t.push(p),t.push(h),t.push(d)),o&&(-99999!==f&&99999!==l?(f=f.toFixed(2)+A,l=l.toFixed(2)+A,v=this.calculateAverage(g),v=v.toFixed(2)+A):f=l=v="-",e.push(f),e.push(l),e.push(v)),a&&(-99999!==b&&99999!==y?(b=b.toFixed(2)+A,y=y.toFixed(2)+A,w=this.calculateAverage(_),w=w.toFixed(2)+A):b=y=w="-",i.push(b),i.push(y),i.push(w)),c&&(-99999!==$&&99999!==S?($=$.toFixed(2)+A,S=S.toFixed(2)+A,x=this.calculateAverage(C),x=x.toFixed(2)+A):$=S=x="-",r.push($),r.push(S),r.push(x)),u&&(-99999!==j&&99999!==O?(j=j.toFixed(1)+"%",O=O.toFixed(1)+"%",E=this.calculateAverage(k),E=E.toFixed(1)+"%"):j=O=E="-",s.push(j),s.push(O),s.push(E))},calculateAverage:function(t){if(0===t.length)return 0;var e=t.reduce((function(t,e){return t+e}),0),i=e/t.length;return i},setItemWidth:function(){var t=0;for(var e in this.selected)this.selected[e]&&t++;this.itemWidth={width:(70/t).toFixed(2)+"%"}}}),beforeDestroy:function(){this.$toast.clear()},computed:Object(o["a"])(Object(o["a"])({},Object(c["e"])(["selectedRecords","selectedDeviceId","selectedDeviceName","queryDetailDateRange"])),{},{isEmpty:function(){return 0==this.selectedRecords.length},temperatureUnit:function(){return"celsius"==this.$store.state.userSetting.unit_temperature?"°C":"°F"},dataList:function(){var t=this,e=[],i=this.selectedRecords;return i.forEach((function(r,s){var n=s-1,o=i[n],c=a["a"].longToDateTimeStr(r.updatetime,a["a"].getOffset());r.dateStr=c;var u=!1;o&&65535!=o.temp1&&536870911!=r.temp1&&Math.abs(o.temp1-r.temp1)>=100&&(u=!0),0==u&&o&&65535!=o.temp2&&536870911!=r.temp2&&Math.abs(o.temp2-r.temp2)>=100&&(u=!0),0==u&&o&&65535!=o.temp3&&536870911!=r.temp3&&Math.abs(o.temp3-r.temp3)>=100&&(u=!0),0==u&&o&&65535!=o.temp4&&536870911!=r.temp4&&Math.abs(o.temp4-r.temp4)>=100&&(u=!0);var h=t.temperatureUnit;e.unshift({time:c.slice(5,c.length),temp1:536870911==r.temp1?"-":r.temp1/100+h,temp2:536870911==r.temp2?"-":r.temp2/100+h,temp3:536870911==r.temp3?"-":r.temp3/100+h,temp4:536870911==r.temp4?"-":r.temp4/100+h,humi1:r.humi1<0||r.humi1>1e3?"-":(r.humi1/10).toFixed(1)+"%",bgColor:u?"#F8F8A9":"#ffffff"})})),e}}),mounted:function(){var t,e=this,i="zh"==this.$i18n.locale;this.temp=i?"温度":"Temp",this.humi=i?"湿度":"Humi",this.time=i?"时间":"Time",this.tempHumiStr=i?"温湿度":"",this.temp1Str=i?"温度1":"Temp1",this.temp2Str=i?"温度2":"Temp2",this.temp3Str=i?"温度3":"Temp3",this.temp4Str=i?"温度4":"Temp4",this.humi1Str=i?"湿度1":"Humi1",this.selected=(t={},Object(n["a"])(t,this.temp1Str,!0),Object(n["a"])(t,this.temp2Str,!1),Object(n["a"])(t,this.temp3Str,!1),Object(n["a"])(t,this.temp4Str,!1),Object(n["a"])(t,this.humi1Str,!1),t),this.$nextTick((function(){e.queryTime=Number(e.$route.query.queryTime),e.charts=h.a.init(document.getElementById("temp-charts")),e.chartsHeight=((document.documentElement.clientHeight||document.body.clientHeight)-160)/2,e.showEcharts()}))}},g=v,y=(i("2c7d"),i("2877")),b=Object(y["a"])(g,r,s,!1,null,null,null);e["default"]=b.exports}}]);